"use strict";(self.webpackChunkminesweep_angular=self.webpackChunkminesweep_angular||[]).push([[179],{898:()=>{function Fe(n){return"function"==typeof n}function gl(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const dh=gl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function la(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class zn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Fe(r))try{r()}catch(s){e=s instanceof dh?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{rM(s)}catch(o){e=e??[],o instanceof dh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new dh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)rM(e);else{if(e instanceof zn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&la(t,e)}remove(e){const{_finalizers:t}=this;t&&la(t,e),e instanceof zn&&e._removeParent(this)}}zn.EMPTY=(()=>{const n=new zn;return n.closed=!0,n})();const tM=zn.EMPTY;function nM(n){return n instanceof zn||n&&"closed"in n&&Fe(n.remove)&&Fe(n.add)&&Fe(n.unsubscribe)}function rM(n){Fe(n)?n():n.unsubscribe()}const Ks={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},hh={setTimeout(n,e,...t){const{delegate:r}=hh;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=hh;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function iM(n){hh.setTimeout(()=>{const{onUnhandledError:e}=Ks;if(!e)throw n;e(n)})}function sM(){}const mz=uy("C",void 0,void 0);function uy(n,e,t){return{kind:n,value:e,error:t}}let Qs=null;function fh(n){if(Ks.useDeprecatedSynchronousErrorHandling){const e=!Qs;if(e&&(Qs={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Qs;if(Qs=null,t)throw r}}else n()}class ly extends zn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nM(e)&&e.add(this)):this.destination=Iz}static create(e,t,r){return new ml(e,t,r)}next(e){this.isStopped?dy(function _z(n){return uy("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?dy(function yz(n){return uy("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dy(mz,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const wz=Function.prototype.bind;function cy(n,e){return wz.call(n,e)}class Ez{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ph(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ph(r)}else ph(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ph(t)}}}class ml extends ly{constructor(e,t,r){let i;if(super(),Fe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Ks.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cy(e.next,s),error:e.error&&cy(e.error,s),complete:e.complete&&cy(e.complete,s)}):i=e}this.destination=new Ez(i)}}function ph(n){Ks.useDeprecatedSynchronousErrorHandling?function vz(n){Ks.useDeprecatedSynchronousErrorHandling&&Qs&&(Qs.errorThrown=!0,Qs.error=n)}(n):iM(n)}function dy(n,e){const{onStoppedNotification:t}=Ks;t&&hh.setTimeout(()=>t(n,e))}const Iz={closed:!0,next:sM,error:function bz(n){throw n},complete:sM},hy="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ys(n){return n}function oM(n){return 0===n.length?Ys:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let We=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Cz(n){return n&&n instanceof ly||function Dz(n){return n&&Fe(n.next)&&Fe(n.error)&&Fe(n.complete)}(n)&&nM(n)}(t)?t:new ml(t,r,i);return fh(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=aM(r))((i,s)=>{const o=new ml({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[hy](){return this}pipe(...t){return oM(t)(this)}toPromise(t){return new(t=aM(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function aM(n){var e;return null!==(e=n??Ks.Promise)&&void 0!==e?e:Promise}const Sz=gl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let tn=(()=>{class n extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new uM(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Sz}next(t){fh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){fh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){fh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?tM:(this.currentObservers=null,s.push(t),new zn(()=>{this.currentObservers=null,la(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new We;return t.source=this,t}}return n.create=(e,t)=>new uM(e,t),n})();class uM extends tn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:tM}}function lM(n){return Fe(n?.lift)}function Rt(n){return e=>{if(lM(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Tt(n,e,t,r,i){return new Az(n,e,t,r,i)}class Az extends ly{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function fe(n,e){return Rt((t,r)=>{let i=0;t.subscribe(Tt(r,s=>{r.next(n.call(e,s,i++))}))})}function ss(n){return this instanceof ss?(this.v=n,this):new ss(n)}function fM(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function my(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}(a,u,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const pM=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function gM(n){return Fe(n?.then)}function mM(n){return Fe(n[hy])}function yM(n){return Symbol.asyncIterator&&Fe(n?.[Symbol.asyncIterator])}function _M(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const vM=function Yz(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function wM(n){return Fe(n?.[vM])}function EM(n){return function hM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof ss?Promise.resolve(h.value.v).then(l,c):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function l(h){a("next",h)}function c(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield ss(t.read());if(i)return yield ss(void 0);yield yield ss(r)}}finally{t.releaseLock()}})}function bM(n){return Fe(n?.getReader)}function lr(n){if(n instanceof We)return n;if(null!=n){if(mM(n))return function Xz(n){return new We(e=>{const t=n[hy]();if(Fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(pM(n))return function Jz(n){return new We(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(gM(n))return function Zz(n){return new We(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,iM)})}(n);if(yM(n))return IM(n);if(wM(n))return function e4(n){return new We(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(bM(n))return function t4(n){return IM(EM(n))}(n)}throw _M(n)}function IM(n){return new We(e=>{(function n4(n,e){var t,r,i,s;return function cM(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(d){o(d)}}function u(c){try{l(r.throw(c))}catch(d){o(d)}}function l(c){c.done?s(c.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(c.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=fM(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function wi(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function $t(n,e,t=1/0){return Fe(e)?$t((r,i)=>fe((s,o)=>e(r,s,i,o))(lr(n(r,i))),t):("number"==typeof e&&(t=e),Rt((r,i)=>function r4(n,e,t,r,i,s,o,a){const u=[];let l=0,c=0,d=!1;const h=()=>{d&&!u.length&&!l&&e.complete()},f=g=>l<r?p(g):u.push(g),p=g=>{s&&e.next(g),l++;let m=!1;lr(t(g,c++)).subscribe(Tt(e,_=>{i?.(_),s?f(_):e.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;u.length&&l<r;){const _=u.shift();o?wi(e,o,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(Tt(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function ca(n=1/0){return $t(Ys,n)}const qr=new We(n=>n.complete());function yy(n){return n[n.length-1]}function TM(n){return Fe(yy(n))?n.pop():void 0}function yl(n){return function s4(n){return n&&Fe(n.schedule)}(yy(n))?n.pop():void 0}function gh(n,e=0){return Rt((t,r)=>{t.subscribe(Tt(r,i=>wi(r,n,()=>r.next(i),e),()=>wi(r,n,()=>r.complete(),e),i=>wi(r,n,()=>r.error(i),e)))})}function mh(n,e=0){return Rt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function DM(n,e){if(!n)throw new Error("Iterable cannot be null");return new We(t=>{wi(t,e,()=>{const r=n[Symbol.asyncIterator]();wi(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function mt(n,e){return e?function h4(n,e){if(null!=n){if(mM(n))return function a4(n,e){return lr(n).pipe(mh(e),gh(e))}(n,e);if(pM(n))return function l4(n,e){return new We(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(gM(n))return function u4(n,e){return lr(n).pipe(mh(e),gh(e))}(n,e);if(yM(n))return DM(n,e);if(wM(n))return function c4(n,e){return new We(t=>{let r;return wi(t,e,()=>{r=n[vM](),wi(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>Fe(r?.return)&&r.return()})}(n,e);if(bM(n))return function d4(n,e){return DM(EM(n),e)}(n,e)}throw _M(n)}(n,e):lr(n)}function _y(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new ml({next:()=>{r.unsubscribe(),n()}});return lr(e(...t)).subscribe(r)}function Pe(n){for(let e in n)if(n[e]===Pe)return e;throw Error("Could not find renamed property on target object.")}function vy(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Le(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Le).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function wy(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const g4=Pe({__forward_ref__:Pe});function Ve(n){return n.__forward_ref__=Ve,n.toString=function(){return Le(this())},n}function Y(n){return Ey(n)?n():n}function Ey(n){return"function"==typeof n&&n.hasOwnProperty(g4)&&n.__forward_ref__===Ve}function by(n){return n&&!!n.\u0275providers}const yh="https://g.co/ng/security#xss";class I extends Error{constructor(e,t){super(_h(e,t)),this.code=e}}function _h(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function ie(n){return"string"==typeof n?n:null==n?"":String(n)}function vh(n,e){throw new I(-201,!1)}function cr(n,e){null==n&&function Se(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function U(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function _n(n){return{providers:n.providers||[],imports:n.imports||[]}}function wh(n){return CM(n,Eh)||CM(n,AM)}function CM(n,e){return n.hasOwnProperty(e)?n[e]:null}function SM(n){return n&&(n.hasOwnProperty(Iy)||n.hasOwnProperty(I4))?n[Iy]:null}const Eh=Pe({\u0275prov:Pe}),Iy=Pe({\u0275inj:Pe}),AM=Pe({ngInjectableDef:Pe}),I4=Pe({ngInjectorDef:Pe});var X=(()=>((X=X||{})[X.Default=0]="Default",X[X.Host=1]="Host",X[X.Self=2]="Self",X[X.SkipSelf=4]="SkipSelf",X[X.Optional=8]="Optional",X))();let Ty;function dr(n){const e=Ty;return Ty=n,e}function MM(n,e,t){const r=wh(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&X.Optional?null:void 0!==e?e:void vh(Le(n))}const $e=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_l={},Dy="__NG_DI_FLAG__",bh="ngTempTokenPath",D4="ngTokenPath",C4=/\n/gm,S4="\u0275",xM="__source";let vl;function da(n){const e=vl;return vl=n,e}function A4(n,e=X.Default){if(void 0===vl)throw new I(-203,!1);return null===vl?MM(n,void 0,e):vl.get(n,e&X.Optional?null:void 0,e)}function P(n,e=X.Default){return(function T4(){return Ty}()||A4)(Y(n),e)}function W(n,e=X.Default){return P(n,Ih(e))}function Ih(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Cy(n){const e=[];for(let t=0;t<n.length;t++){const r=Y(n[t]);if(Array.isArray(r)){if(0===r.length)throw new I(900,!1);let i,s=X.Default;for(let o=0;o<r.length;o++){const a=r[o],u=M4(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(P(i,s))}else e.push(P(r))}return e}function wl(n,e){return n[Dy]=e,n.prototype[Dy]=e,n}function M4(n){return n[Dy]}function Ei(n){return{toString:n}.toString()}var Wr=(()=>((Wr=Wr||{})[Wr.OnPush=0]="OnPush",Wr[Wr.Default=1]="Default",Wr))(),Sr=(()=>{return(n=Sr||(Sr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Sr;var n})();const bi={},De=[],Th=Pe({\u0275cmp:Pe}),Sy=Pe({\u0275dir:Pe}),Ay=Pe({\u0275pipe:Pe}),RM=Pe({\u0275mod:Pe}),Ii=Pe({\u0275fac:Pe}),El=Pe({__NG_ELEMENT_ID__:Pe});let R4=0;function Ar(n){return Ei(()=>{const e=PM(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Wr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Sr.Emulated,id:"c"+R4++,styles:n.styles||De,_:null,schemas:n.schemas||null,tView:null};OM(t);const r=n.dependencies;return t.directiveDefs=Dh(r,!1),t.pipeDefs=Dh(r,!0),t})}function P4(n){return Ae(n)||nn(n)}function O4(n){return null!==n}function kn(n){return Ei(()=>({type:n.type,bootstrap:n.bootstrap||De,declarations:n.declarations||De,imports:n.imports||De,exports:n.exports||De,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function kM(n,e){if(null==n)return bi;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function ee(n){return Ei(()=>{const e=PM(n);return OM(e),e})}function vn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ae(n){return n[Th]||null}function nn(n){return n[Sy]||null}function Pn(n){return n[Ay]||null}function Wn(n,e){const t=n[RM]||null;if(!t&&!0===e)throw new Error(`Type ${Le(n)} does not have '\u0275mod' property.`);return t}function PM(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||De,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kM(n.inputs,e),outputs:kM(n.outputs)}}function OM(n){n.features?.forEach(e=>e(n))}function Dh(n,e){if(!n)return null;const t=e?Pn:P4;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(O4)}const Ti=0,O=1,ce=2,rt=3,Mr=4,Xs=5,rn=6,fa=7,lt=8,Ch=9,Sh=10,he=11,My=12,bl=13,FM=14,pa=15,sn=16,Il=17,ga=18,Kr=19,Tl=20,LM=21,je=22,xy=1,VM=2,Ah=7,Mh=8,ma=9,wn=10;function Kn(n){return Array.isArray(n)&&"object"==typeof n[xy]}function xr(n){return Array.isArray(n)&&!0===n[xy]}function Ny(n){return 0!=(4&n.flags)}function Dl(n){return n.componentOffset>-1}function xh(n){return 1==(1&n.flags)}function Nr(n){return!!n.template}function L4(n){return 0!=(256&n[ce])}function Js(n,e){return n.hasOwnProperty(Ii)?n[Ii]:null}class U4{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function hr(){return $M}function $M(n){return n.type.prototype.ngOnChanges&&(n.setInput=j4),$4}function $4(){const n=HM(this),e=n?.current;if(e){const t=n.previous;if(t===bi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function j4(n,e,t,r){const i=this.declaredInputs[t],s=HM(n)||function H4(n,e){return n[jM]=e}(n,{previous:bi,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new U4(u&&u.currentValue,e,a===bi),n[r]=e}hr.ngInherit=!0;const jM="__ngSimpleChanges__";function HM(n){return n[jM]||null}const fr=function(n,e,t){};function jt(n){for(;Array.isArray(n);)n=n[Ti];return n}function Nh(n,e){return jt(e[n])}function Qn(n,e){return jt(e[n.index])}function qM(n,e){return n.data[e]}function ya(n,e){return n[e]}function On(n,e){const t=e[n];return Kn(t)?t:t[Ti]}function Rh(n){return 64==(64&n[ce])}function as(n,e){return null==e?null:n[e]}function WM(n){n[ga]=0}function ky(n,e){n[Xs]+=e;let t=n,r=n[rt];for(;null!==r&&(1===e&&1===t[Xs]||-1===e&&0===t[Xs]);)r[Xs]+=e,t=r,r=r[rt]}const se={lFrame:rx(null),bindingsEnabled:!0};function QM(){return se.bindingsEnabled}function T(){return se.lFrame.lView}function we(){return se.lFrame.tView}function Cl(n){return se.lFrame.contextLView=n,n[lt]}function Sl(n){return se.lFrame.contextLView=null,n}function Ht(){let n=YM();for(;null!==n&&64===n.type;)n=n.parent;return n}function YM(){return se.lFrame.currentTNode}function Qr(n,e){const t=se.lFrame;t.currentTNode=n,t.isParent=e}function Py(){return se.lFrame.isParent}function Oy(){se.lFrame.isParent=!1}function En(){const n=se.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function _a(){return se.lFrame.bindingIndex++}function Ci(n){const e=se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function n3(n,e){const t=se.lFrame;t.bindingIndex=t.bindingRootIndex=n,Fy(e)}function Fy(n){se.lFrame.currentDirectiveIndex=n}function Ly(n){const e=se.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function Vy(n){se.lFrame.currentQueryIndex=n}function i3(n){const e=n[O];return 2===e.type?e.declTNode:1===e.type?n[rn]:null}function tx(n,e,t){if(t&X.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&X.Host||(i=i3(s),null===i||(s=s[pa],10&i.type))););if(null===i)return!1;e=i,n=s}const r=se.lFrame=nx();return r.currentTNode=e,r.lView=n,!0}function By(n){const e=nx(),t=n[O];se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nx(){const n=se.lFrame,e=null===n?null:n.child;return null===e?rx(n):e}function rx(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ix(){const n=se.lFrame;return se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const sx=ix;function Uy(){const n=ix();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function bn(){return se.lFrame.selectedIndex}function Zs(n){se.lFrame.selectedIndex=n}function Xe(){const n=se.lFrame;return qM(n.tView,n.selectedIndex)}function kh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:c}=s;o&&(n.contentHooks??(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks??(n.contentHooks=[])).push(t,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(t,a)),u&&(n.viewHooks??(n.viewHooks=[])).push(-t,u),l&&((n.viewHooks??(n.viewHooks=[])).push(t,l),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(t,l)),null!=c&&(n.destroyHooks??(n.destroyHooks=[])).push(t,c)}}function Ph(n,e,t){ox(n,e,3,t)}function Oh(n,e,t,r){(3&n[ce])===t&&ox(n,e,t,r)}function $y(n,e){let t=n[ce];(3&t)===e&&(t&=2047,t+=1,n[ce]=t)}function ox(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[ga]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[ga]+=65536),(a<s||-1==s)&&(f3(n,t,e,u),n[ga]=(4294901760&n[ga])+u+2),u++}function f3(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[ce]>>11<n[ga]>>16&&(3&n[ce])===e){n[ce]+=2048,fr(4,a,s);try{s.call(a)}finally{fr(5,a,s)}}}else{fr(4,a,s);try{s.call(a)}finally{fr(5,a,s)}}}const va=-1;class Ml{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Hy(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];ux(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function ax(n){return 3===n||4===n||6===n}function ux(n){return 64===n.charCodeAt(0)}function xl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||lx(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function lx(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function cx(n){return n!==va}function Fh(n){return 32767&n}function Lh(n,e){let t=function y3(n){return n>>16}(n),r=e;for(;t>0;)r=r[pa],t--;return r}let Gy=!0;function Vh(n){const e=Gy;return Gy=n,e}const dx=255,hx=5;let _3=0;const Yr={};function Bh(n,e){const t=fx(n,e);if(-1!==t)return t;const r=e[O];r.firstCreatePass&&(n.injectorIndex=e.length,zy(r.data,n),zy(e,null),zy(r.blueprint,null));const i=qy(n,e),s=n.injectorIndex;if(cx(i)){const o=Fh(i),a=Lh(i,e),u=a[O].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function zy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function fx(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function qy(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=wx(i),null===r)return va;if(t++,i=i[pa],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return va}function Wy(n,e,t){!function v3(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(El)&&(r=t[El]),null==r&&(r=t[El]=_3++);const i=r&dx;e.data[n+(i>>hx)]|=1<<i}(n,e,t)}function px(n,e,t){if(t&X.Optional||void 0!==n)return n;vh()}function gx(n,e,t,r){if(t&X.Optional&&void 0===r&&(r=null),!(t&(X.Self|X.Host))){const i=n[Ch],s=dr(void 0);try{return i?i.get(e,r,t&X.Optional):MM(e,r,t&X.Optional)}finally{dr(s)}}return px(r,0,t)}function mx(n,e,t,r=X.Default,i){if(null!==n){if(1024&e[ce]){const o=function T3(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[ce]&&!(256&o[ce]);){const a=yx(s,o,t,r|X.Self,Yr);if(a!==Yr)return a;let u=s.parent;if(!u){const l=o[LM];if(l){const c=l.get(t,Yr,r);if(c!==Yr)return c}u=wx(o),o=o[pa]}s=u}return i}(n,e,t,r,Yr);if(o!==Yr)return o}const s=yx(n,e,t,r,Yr);if(s!==Yr)return s}return gx(e,t,r,i)}function yx(n,e,t,r,i){const s=function b3(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(El)?n[El]:void 0;return"number"==typeof e?e>=0?e&dx:I3:e}(t);if("function"==typeof s){if(!tx(e,n,r))return r&X.Host?px(i,0,r):gx(e,t,r,i);try{const o=s(r);if(null!=o||r&X.Optional)return o;vh()}finally{sx()}}else if("number"==typeof s){let o=null,a=fx(n,e),u=va,l=r&X.Host?e[sn][rn]:null;for((-1===a||r&X.SkipSelf)&&(u=-1===a?qy(n,e):e[a+8],u!==va&&vx(r,!1)?(o=e[O],a=Fh(u),e=Lh(u,e)):a=-1);-1!==a;){const c=e[O];if(_x(s,a,c.data)){const d=E3(a,e,t,o,r,l);if(d!==Yr)return d}u=e[a+8],u!==va&&vx(r,e[O].data[a+8]===l)&&_x(s,a,e)?(o=c,a=Fh(u),e=Lh(u,e)):a=-1}}return i}function E3(n,e,t,r,i,s){const o=e[O],a=o.data[n+8],c=function Uh(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,c=s>>20,h=i?a+c:n.directiveEnd;for(let f=r?a:a+c;f<h;f++){const p=o[f];if(f<u&&t===p||f>=u&&p.type===t)return f}if(i){const f=o[u];if(f&&Nr(f)&&f.type===t)return u}return null}(a,o,t,null==r?Dl(a)&&Gy:r!=o&&0!=(3&a.type),i&X.Host&&s===a);return null!==c?eo(e,o,c,a):Yr}function eo(n,e,t,r){let i=n[t];const s=e.data;if(function p3(n){return n instanceof Ml}(i)){const o=i;o.resolving&&function m4(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new I(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Ce(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ie(n)}(s[t]));const a=Vh(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?dr(o.injectImpl):null;tx(n,r,X.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function h3(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=$M(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==u&&dr(u),Vh(a),o.resolving=!1,sx()}}return i}function _x(n,e,t){return!!(t[e+(n>>hx)]&1<<n)}function vx(n,e){return!(n&X.Self||n&X.Host&&e)}class wa{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return mx(this._tNode,this._lView,e,Ih(r),t)}}function I3(){return new wa(Ht(),T())}function Gt(n){return Ei(()=>{const e=n.prototype.constructor,t=e[Ii]||Ky(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Ii]||Ky(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ky(n){return Ey(n)?()=>{const e=Ky(Y(n));return e&&e()}:Js(n)}function wx(n){const e=n[O],t=e.type;return 2===t?e.declTNode:1===t?n[rn]:null}const ba="__parameters__";function Ta(n,e,t){return Ei(()=>{const r=function Qy(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,c){const d=u.hasOwnProperty(ba)?u[ba]:Object.defineProperty(u,ba,{value:[]})[ba];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class ${constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=U({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function to(n,e){n.forEach(t=>Array.isArray(t)?to(t,e):e(t))}function bx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function jh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Yn(n,e,t){let r=Da(n,e);return r>=0?n[1|r]=t:(r=~r,function A3(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Xy(n,e){const t=Da(n,e);if(t>=0)return n[1|t]}function Da(n,e){return function Ix(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const In=wl(Ta("Optional"),8),Pl=wl(Ta("SkipSelf"),4);var Fn=(()=>((Fn=Fn||{})[Fn.Important=1]="Important",Fn[Fn.DashCase=2]="DashCase",Fn))();const r_=new Map;let Y3=0;const s_="__ngContext__";function on(n,e){Kn(e)?(n[s_]=e[Tl],function J3(n){r_.set(n[Tl],n)}(e)):n[s_]=e}let o_;function a_(n,e){return o_(n,e)}function Vl(n){const e=n[rt];return xr(e)?e[rt]:e}function u_(n){return Hx(n[bl])}function l_(n){return Hx(n[Mr])}function Hx(n){for(;null!==n&&!xr(n);)n=n[Mr];return n}function Sa(n,e,t,r,i){if(null!=r){let s,o=!1;xr(r)?s=r:Kn(r)&&(o=!0,r=r[Ti]);const a=jt(r);0===n&&null!==t?null==i?Qx(e,t,a):no(e,t,a,i||null,!0):1===n&&null!==t?no(e,t,a,i||null,!0):2===n?function m_(n,e,t){const r=qh(n,e);r&&function _q(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Eq(n,e,t,r,i){const s=t[Ah];s!==jt(t)&&Sa(e,n,r,s,i);for(let a=wn;a<t.length;a++){const u=t[a];Bl(u[O],u,n,e,r,s)}}(e,n,s,t,i)}}function d_(n,e,t){return n.createElement(e,t)}function zx(n,e){const t=n[ma],r=t.indexOf(e),i=e[rt];512&e[ce]&&(e[ce]&=-513,ky(i,-1)),t.splice(r,1)}function h_(n,e){if(n.length<=wn)return;const t=wn+e,r=n[t];if(r){const i=r[Il];null!==i&&i!==n&&zx(i,r),e>0&&(n[t-1][Mr]=r[Mr]);const s=jh(n,wn+e);!function cq(n,e){Bl(n,e,e[he],2,null,null),e[Ti]=null,e[rn]=null}(r[O],r);const o=s[Kr];null!==o&&o.detachView(s[O]),r[rt]=null,r[Mr]=null,r[ce]&=-65}return r}function qx(n,e){if(!(128&e[ce])){const t=e[he];t.destroyNode&&Bl(n,e,t,3,null,null),function fq(n){let e=n[bl];if(!e)return f_(n[O],n);for(;e;){let t=null;if(Kn(e))t=e[bl];else{const r=e[wn];r&&(t=r)}if(!t){for(;e&&!e[Mr]&&e!==n;)Kn(e)&&f_(e[O],e),e=e[rt];null===e&&(e=n),Kn(e)&&f_(e[O],e),t=e&&e[Mr]}e=t}}(e)}}function f_(n,e){if(!(128&e[ce])){e[ce]&=-65,e[ce]|=128,function yq(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Ml)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];fr(4,a,u);try{u.call(a)}finally{fr(5,a,u)}}else{fr(4,i,s);try{s.call(i)}finally{fr(5,i,s)}}}}}(n,e),function mq(n,e){const t=n.cleanup,r=e[fa];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[fa]=null}}(n,e),1===e[O].type&&e[he].destroy();const t=e[Il];if(null!==t&&xr(e[rt])){t!==e[rt]&&zx(t,e);const r=e[Kr];null!==r&&r.detachView(n)}!function Z3(n){r_.delete(n[Tl])}(e)}}function Wx(n,e,t){return function Kx(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Ti];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Sr.None||s===Sr.Emulated)return null}return Qn(r,t)}}(n,e.parent,t)}function no(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Qx(n,e,t){n.appendChild(e,t)}function Yx(n,e,t,r,i){null!==r?no(n,e,t,r,i):Qx(n,e,t)}function qh(n,e){return n.parentNode(e)}let p_,Qh,v_,Yh,Zx=function Jx(n,e,t){return 40&n.type?Qn(n,t):null};function Wh(n,e,t,r){const i=Wx(n,r,e),s=e[he],a=function Xx(n,e,t){return Zx(n,e,t)}(r.parent||e[rn],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)Yx(s,i,t[u],a,!1);else Yx(s,i,t,a,!1);void 0!==p_&&p_(s,r,e,t,i)}function Kh(n,e){if(null!==e){const t=e.type;if(3&t)return Qn(e,n);if(4&t)return g_(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Kh(n,r);{const i=n[e.index];return xr(i)?g_(-1,i):jt(i)}}if(32&t)return a_(e,n)()||jt(n[e.index]);{const r=t1(n,e);return null!==r?Array.isArray(r)?r[0]:Kh(Vl(n[sn]),r):Kh(n,e.next)}}return null}function t1(n,e){return null!==e?n[sn][rn].projection[e.projection]:null}function g_(n,e){const t=wn+n+1;if(t<e.length){const r=e[t],i=r[O].firstChild;if(null!==i)return Kh(r,i)}return e[Ah]}function y_(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&on(jt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)y_(n,e,t.child,r,i,s,!1),Sa(e,n,i,a,s);else if(32&u){const l=a_(t,r);let c;for(;c=l();)Sa(e,n,i,c,s);Sa(e,n,i,a,s)}else 16&u?n1(n,e,r,t,i,s):Sa(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Bl(n,e,t,r,i,s){y_(t,r,n.firstChild,e,i,s,!1)}function n1(n,e,t,r,i,s){const o=t[sn],u=o[rn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Sa(e,n,i,u[l],s);else y_(n,e,u,o[rt],i,s,!0)}function r1(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function i1(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Hy(n,e,r),null!==i&&r1(n,e,i),null!==s&&function Iq(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Aa(n){return function __(){if(void 0===Qh&&(Qh=null,$e.trustedTypes))try{Qh=$e.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qh}()?.createHTML(n)||n}function w_(){if(void 0===Yh&&(Yh=null,$e.trustedTypes))try{Yh=$e.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Yh}function o1(n){return w_()?.createHTML(n)||n}function u1(n){return w_()?.createScriptURL(n)||n}class ro{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yh})`}}class Aq extends ro{getTypeName(){return"HTML"}}class Mq extends ro{getTypeName(){return"Style"}}class xq extends ro{getTypeName(){return"Script"}}class Nq extends ro{getTypeName(){return"URL"}}class Rq extends ro{getTypeName(){return"ResourceURL"}}function Xn(n){return n instanceof ro?n.changingThisBreaksApplicationSecurity:n}function Xr(n,e){const t=function kq(n){return n instanceof ro&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${yh})`)}return t===e}class Bq{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Aa(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class Uq{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Aa(e),t}}const jq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Xh(n){return(n=String(n)).match(jq)?n:"unsafe:"+n}function Si(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Ul(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const c1=Si("area,br,col,hr,img,wbr"),d1=Si("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),h1=Si("rp,rt"),E_=Ul(c1,Ul(d1,Si("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ul(h1,Si("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ul(h1,d1)),b_=Si("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),f1=Ul(b_,Si("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Si("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hq=Si("script,style,template");class Gq{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!E_.hasOwnProperty(t))return this.sanitizedSomething=!0,!Hq.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!f1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;b_[a]&&(u=Xh(u)),this.buf.push(" ",o,'="',p1(u),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();E_.hasOwnProperty(t)&&!c1.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(p1(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const zq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qq=/([^\#-~ |!])/g;function p1(n){return n.replace(/&/g,"&amp;").replace(zq,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(qq,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jh;function g1(n,e){let t=null;try{Jh=Jh||function l1(n){const e=new Uq(n);return function $q(){try{return!!(new window.DOMParser).parseFromString(Aa(""),"text/html")}catch{return!1}}()?new Bq(e):e}(n);let r=e?String(e):"";t=Jh.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Jh.getInertBodyElement(r)}while(r!==s);return Aa((new Gq).sanitizeChildren(I_(t)||t))}finally{if(t){const r=I_(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function I_(n){return"content"in n&&function Wq(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Oe=(()=>((Oe=Oe||{})[Oe.NONE=0]="NONE",Oe[Oe.HTML=1]="HTML",Oe[Oe.STYLE=2]="STYLE",Oe[Oe.SCRIPT=3]="SCRIPT",Oe[Oe.URL=4]="URL",Oe[Oe.RESOURCE_URL=5]="RESOURCE_URL",Oe))();function T_(n){const e=$l();return e?o1(e.sanitize(Oe.HTML,n)||""):Xr(n,"HTML")?o1(Xn(n)):g1(function s1(){return void 0!==v_?v_:typeof document<"u"?document:void 0}(),ie(n))}function D_(n){const e=$l();return e?e.sanitize(Oe.URL,n)||"":Xr(n,"URL")?Xn(n):Xh(ie(n))}function m1(n){const e=$l();if(e)return u1(e.sanitize(Oe.RESOURCE_URL,n)||"");if(Xr(n,"ResourceURL"))return u1(Xn(n));throw new I(904,!1)}function $l(){const n=T();return n&&n[My]}const Zh=new $("ENVIRONMENT_INITIALIZER"),_1=new $("INJECTOR",-1),v1=new $("INJECTOR_DEF_TYPES");class w1{get(e,t=_l){if(t===_l){const r=new Error(`NullInjectorError: No provider for ${Le(e)}!`);throw r.name="NullInjectorError",r}return t}}function e6(...n){return{\u0275providers:E1(0,n),\u0275fromNgModule:!0}}function E1(n,...e){const t=[],r=new Set;let i;return to(e,s=>{const o=s;C_(o,t,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&b1(i,t),t}function b1(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];S_(i,s=>{e.push(s)})}}function C_(n,e,t,r){if(!(n=Y(n)))return!1;let i=null,s=SM(n);const o=!s&&Ae(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=SM(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)C_(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{to(s.imports,c=>{C_(c,e,t,r)&&(l||(l=[]),l.push(c))})}finally{}void 0!==l&&b1(l,e)}if(!a){const l=Js(i)||(()=>new i);e.push({provide:i,useFactory:l,deps:De},{provide:v1,useValue:i,multi:!0},{provide:Zh,useValue:()=>P(i),multi:!0})}const u=s.providers;null==u||a||S_(u,c=>{e.push(c)})}}return i!==n&&void 0!==n.providers}function S_(n,e){for(let t of n)by(t)&&(t=t.\u0275providers),Array.isArray(t)?S_(t,e):e(t)}const t6=Pe({provide:String,useValue:Pe});function A_(n){return null!==n&&"object"==typeof n&&t6 in n}function io(n){return"function"==typeof n}const M_=new $("Set Injector scope."),ef={},r6={};let x_;function tf(){return void 0===x_&&(x_=new w1),x_}class Ai{}class D1 extends Ai{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,R_(e,o=>this.processProvider(o)),this.records.set(_1,Ma(void 0,this)),i.has("environment")&&this.records.set(Ai,Ma(void 0,this));const s=this.records.get(M_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(v1.multi,De,X.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=da(this),r=dr(void 0);try{return e()}finally{da(t),dr(r)}}get(e,t=_l,r=X.Default){this.assertNotDestroyed(),r=Ih(r);const i=da(this),s=dr(void 0);try{if(!(r&X.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function u6(n){return"function"==typeof n||"object"==typeof n&&n instanceof $}(e)&&wh(e);a=u&&this.injectableDefInScope(u)?Ma(N_(e),ef):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&X.Self?tf():this.parent).get(e,t=r&X.Optional&&t===_l?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[bh]=o[bh]||[]).unshift(Le(e)),i)throw o;return function x4(n,e,t,r){const i=n[bh];throw e[xM]&&i.unshift(e[xM]),n.message=function N4(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==S4?n.slice(2):n;let i=Le(e);if(Array.isArray(e))i=e.map(Le).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Le(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(C4,"\n  ")}`}("\n"+n.message,i,t,r),n[D4]=i,n[bh]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{dr(s),da(i)}}resolveInjectorInitializers(){const e=da(this),t=dr(void 0);try{const r=this.get(Zh.multi,De,X.Self);for(const i of r)i()}finally{da(e),dr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Le(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new I(205,!1)}processProvider(e){let t=io(e=Y(e))?e:Y(e&&e.provide);const r=function s6(n){return A_(n)?Ma(void 0,n.useValue):Ma(C1(n),ef)}(e);if(io(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Ma(void 0,ef,!0),i.factory=()=>Cy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===ef&&(t.value=r6,t.value=t.factory()),"object"==typeof t.value&&t.value&&function a6(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Y(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function N_(n){const e=wh(n),t=null!==e?e.factory:Js(n);if(null!==t)return t;if(n instanceof $)throw new I(204,!1);if(n instanceof Function)return function i6(n){const e=n.length;if(e>0)throw function kl(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new I(204,!1);const t=function b4(n){return n&&(n[Eh]||n[AM])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new I(204,!1)}function C1(n,e,t){let r;if(io(n)){const i=Y(n);return Js(i)||N_(i)}if(A_(n))r=()=>Y(n.useValue);else if(function T1(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Cy(n.deps||[]));else if(function I1(n){return!(!n||!n.useExisting)}(n))r=()=>P(Y(n.useExisting));else{const i=Y(n&&(n.useClass||n.provide));if(!function o6(n){return!!n.deps}(n))return Js(i)||N_(i);r=()=>new i(...Cy(n.deps))}return r}function Ma(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function R_(n,e){for(const t of n)Array.isArray(t)?R_(t,e):t&&by(t)?R_(t.\u0275providers,e):e(t)}class l6{}class S1{}class d6{resolveComponentFactory(e){throw function c6(n){const e=Error(`No component factory found for ${Le(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let xa=(()=>{class n{}return n.NULL=new d6,n})();function h6(){return Na(Ht(),T())}function Na(n,e){return new Jn(Qn(n,e))}let Jn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=h6,n})();class jl{}let Mi=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function p6(){const n=T(),t=On(Ht().index,n);return(Kn(t)?t:n)[he]}(),n})(),g6=(()=>{class n{}return n.\u0275prov=U({token:n,providedIn:"root",factory:()=>null}),n})();class Ra{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const M1=new Ra("15.2.9"),k_={},P_="ngOriginalError";function O_(n){return n[P_]}class ka{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&O_(e);for(;t&&O_(t);)t=O_(t);return t||null}}function xi(n){return n instanceof Function?n():n}function N1(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const R1="ng-template";function C6(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==N1(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function k1(n){return 4===n.type&&n.value!==R1}function S6(n,e,t){return e===(4!==n.type||t?n.value:R1)}function A6(n,e,t){let r=4;const i=n.attrs||[],s=function N6(n){for(let e=0;e<n.length;e++)if(ax(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!S6(n,u,t)||""===u&&1===e.length){if(Rr(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!C6(n.attrs,l,t)){if(Rr(r))return!1;o=!0}continue}const d=M6(8&r?"class":u,i,k1(n),t);if(-1===d){if(Rr(r))return!1;o=!0;continue}if(""!==l){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==N1(f,l,0)||2&r&&l!==h){if(Rr(r))return!1;o=!0}}}}else{if(!o&&!Rr(r)&&!Rr(u))return!1;if(o&&Rr(u))continue;o=!1,r=u|1&r}}return Rr(r)||o}function Rr(n){return 0==(1&n)}function M6(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function R6(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function P1(n,e,t=!1){for(let r=0;r<e.length;r++)if(A6(n,e[r],t))return!0;return!1}function O1(n,e){return n?":not("+e.trim()+")":e}function P6(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Rr(o)&&(e+=O1(s,i),i=""),r=o,s=s||!Rr(r);t++}return""!==i&&(e+=O1(s,i)),e}const oe={};function te(n){F1(we(),T(),bn()+n,!1)}function F1(n,e,t,r){if(!r)if(3==(3&e[ce])){const s=n.preOrderCheckHooks;null!==s&&Ph(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Oh(e,s,0,t)}Zs(t)}function U1(n,e=null,t=null,r){const i=$1(n,e,t,r);return i.resolveInjectorInitializers(),i}function $1(n,e=null,t=null,r,i=new Set){const s=[t||De,e6(n)];return r=r||("object"==typeof n?void 0:Le(n)),new D1(s,e||tf(),r||null,i)}let Tn=(()=>{class n{static create(t,r){if(Array.isArray(t))return U1({name:""},r,t,"");{const i=t.name??"";return U1({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=_l,n.NULL=new w1,n.\u0275prov=U({token:n,providedIn:"any",factory:()=>P(_1)}),n.__NG_ELEMENT_ID__=-1,n})();function D(n,e=X.Default){const t=T();return null===t?P(n,e):mx(Ht(),t,Y(n),e)}function Q1(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Vy(t[r]),o.contentQueries(2,e[s],s)}}}function rf(n,e,t,r,i,s,o,a,u,l,c){const d=e.blueprint.slice();return d[Ti]=i,d[ce]=76|r,(null!==c||n&&1024&n[ce])&&(d[ce]|=1024),WM(d),d[rt]=d[pa]=n,d[lt]=t,d[Sh]=o||n&&n[Sh],d[he]=a||n&&n[he],d[My]=u||n&&n[My]||null,d[Ch]=l||n&&n[Ch]||null,d[rn]=s,d[Tl]=function X3(){return Y3++}(),d[LM]=c,d[sn]=2==e.type?n[sn]:d,d}function Fa(n,e,t,r,i){let s=n.data[e];if(null===s)s=function U_(n,e,t,r,i){const s=YM(),o=Py(),u=n.data[e]=function oW(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function t3(){return se.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Al(){const n=se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Qr(s,!0),s}function Hl(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $_(n,e,t){By(e);try{const r=n.viewQuery;null!==r&&Y_(1,r,t);const i=n.template;null!==i&&Y1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Q1(n,e),n.staticViewQueries&&Y_(2,n.viewQuery,t);const s=n.components;null!==s&&function rW(n,e){for(let t=0;t<e.length;t++)CW(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ce]&=-5,Uy()}}function sf(n,e,t,r){const i=e[ce];if(128!=(128&i)){By(e);try{WM(e),function JM(n){return se.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Y1(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&Ph(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Oh(e,l,0,null),$y(e,0)}if(function TW(n){for(let e=u_(n);null!==e;e=l_(e)){if(!e[VM])continue;const t=e[ma];for(let r=0;r<t.length;r++){const i=t[r];512&i[ce]||ky(i[rt],1),i[ce]|=512}}}(e),function IW(n){for(let e=u_(n);null!==e;e=l_(e))for(let t=wn;t<e.length;t++){const r=e[t],i=r[O];Rh(r)&&sf(i,r,i.template,r[lt])}}(e),null!==n.contentQueries&&Q1(n,e),o){const l=n.contentCheckHooks;null!==l&&Ph(e,l)}else{const l=n.contentHooks;null!==l&&Oh(e,l,1),$y(e,1)}!function tW(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Zs(~i);else{const s=i,o=t[++r],a=t[++r];n3(o,s),a(2,e[s])}}}finally{Zs(-1)}}(n,e);const a=n.components;null!==a&&function nW(n,e){for(let t=0;t<e.length;t++)DW(n,e[t])}(e,a);const u=n.viewQuery;if(null!==u&&Y_(2,u,r),o){const l=n.viewCheckHooks;null!==l&&Ph(e,l)}else{const l=n.viewHooks;null!==l&&Oh(e,l,2),$y(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ce]&=-41,512&e[ce]&&(e[ce]&=-513,ky(e[rt],-1))}finally{Uy()}}}function Y1(n,e,t,r,i){const s=bn(),o=2&r;try{Zs(-1),o&&e.length>je&&F1(n,e,je,!1),fr(o?2:0,i),t(r,i)}finally{Zs(s),fr(o?3:1,i)}}function j_(n,e,t){if(Ny(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function H_(n,e,t){QM()&&(function fW(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Dl(t)&&function wW(n,e,t){const r=Qn(e,n),i=X1(t),s=n[Sh],o=af(n,rf(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=o}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Bh(t,e),on(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],l=eo(e,n,a,t);on(l,e),null!==o&&EW(0,a-i,l,u,0,o),Nr(u)&&(On(t.index,e)[lt]=eo(e,n,a,t))}}(n,e,t,Qn(t,e)),64==(64&t.flags)&&nN(n,e,t))}function G_(n,e,t=Qn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function X1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=z_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function z_(n,e,t,r,i,s,o,a,u,l){const c=je+r,d=c+i,h=function iW(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:oe);return t}(c,d),f="function"==typeof l?l():l;return h[O]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Z1(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?eN(t,e,i,s):r.hasOwnProperty(i)&&eN(t,e,r[i],s)}return t}function eN(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Zn(n,e,t,r,i,s,o,a){const u=Qn(e,t);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(X_(n,t,c,r,i),Dl(e)&&function lW(n,e){const t=On(e,n);16&t[ce]||(t[ce]|=32)}(t,e.index)):3&e.type&&(r=function uW(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function q_(n,e,t,r){if(QM()){const i=null===r?null:{"":-1},s=function gW(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(P1(e,o.selectors,!1))if(r||(r=[]),Nr(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),W_(n,e,a.length)}else r.unshift(o),W_(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&tN(n,e,t,o,i,a),i&&function mW(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new I(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=xl(t.mergedAttrs,t.attrs)}function tN(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Wy(Bh(t,e),n,r[l].type);!function _W(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const c=r[l];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,u=Hl(n,e,r.length,null);for(let l=0;l<r.length;l++){const c=r[l];t.mergedAttrs=xl(t.mergedAttrs,c.hostAttrs),vW(n,t,e,u,c),yW(u,c,i),null!==c.contentQueries&&(t.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(t.flags|=64);const d=c.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t.index),a=!0),u++}!function aW(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,l=null;for(let c=e.directiveStart;c<i;c++){const d=s[c],h=t?t.get(d):null,p=h?h.outputs:null;u=Z1(d.inputs,c,u,h?h.inputs:null),l=Z1(d.outputs,c,l,p);const g=null===u||null===o||k1(e)?null:bW(u,c,o);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(n,t,s)}function nN(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function r3(){return se.lFrame.currentDirectiveIndex}();try{Zs(s);for(let a=r;a<i;a++){const u=n.data[a],l=e[a];Fy(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&pW(u,l)}}finally{Zs(-1),Fy(o)}}function pW(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function W_(n,e,t){e.componentOffset=t,(n.components??(n.components=[])).push(e.index)}function yW(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Nr(e)&&(t[""]=n)}}function vW(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Js(i.type)),o=new Ml(s,Nr(i),D);n.blueprint[r]=o,t[r]=o,function dW(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function hW(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Hl(n,t,i.hostVars,oe),i)}function Jr(n,e,t,r,i,s){const o=Qn(n,e);!function K_(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?ie(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[he],o,s,n.value,t,r,i)}function EW(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let u=0;u<o.length;){const l=o[u++],c=o[u++],d=o[u++];null!==a?r.setInput(t,d,l,c):t[c]=d}}}function bW(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function rN(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function DW(n,e){const t=On(e,n);if(Rh(t)){const r=t[O];48&t[ce]?sf(r,t,r.template,t[lt]):t[Xs]>0&&Q_(t)}}function Q_(n){for(let r=u_(n);null!==r;r=l_(r))for(let i=wn;i<r.length;i++){const s=r[i];if(Rh(s))if(512&s[ce]){const o=s[O];sf(o,s,o.template,s[lt])}else s[Xs]>0&&Q_(s)}const t=n[O].components;if(null!==t)for(let r=0;r<t.length;r++){const i=On(t[r],n);Rh(i)&&i[Xs]>0&&Q_(i)}}function CW(n,e){const t=On(e,n),r=t[O];(function SW(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),$_(r,t,t[lt])}function af(n,e){return n[bl]?n[FM][Mr]=e:n[bl]=e,n[FM]=e,e}function uf(n){for(;n;){n[ce]|=32;const e=Vl(n);if(L4(n)&&!e)return n;n=e}return null}function lf(n,e,t,r=!0){const i=e[Sh];i.begin&&i.begin();try{sf(n,e,n.template,t)}catch(o){throw r&&aN(e,o),o}finally{i.end&&i.end()}}function Y_(n,e,t){Vy(0),e(n,t)}function iN(n){return n[fa]||(n[fa]=[])}function sN(n){return n.cleanup||(n.cleanup=[])}function aN(n,e){const t=n[Ch],r=t?t.get(ka,null):null;r&&r.handleError(e)}function X_(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],u=e[o],l=n.data[o];null!==l.setInput?l.setInput(u,i,r,a):u[a]=i}}function Ni(n,e,t){const r=Nh(e,n);!function Gx(n,e,t){n.setValue(e,t)}(n[he],r,t)}function cf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=wy(i,a):2==s&&(r=wy(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function df(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(jt(s)),xr(s))for(let a=wn;a<s.length;a++){const u=s[a],l=u[O].firstChild;null!==l&&df(u[O],u,l,r)}const o=t.type;if(8&o)df(n,e,t.child,r);else if(32&o){const a=a_(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=t1(e,t);if(Array.isArray(a))r.push(...a);else{const u=Vl(e[sn]);df(u[O],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Gl{get rootNodes(){const e=this._lView,t=e[O];return df(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[lt]}set context(e){this._lView[lt]=e}get destroyed(){return 128==(128&this._lView[ce])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[rt];if(xr(e)){const t=e[Mh],r=t?t.indexOf(this):-1;r>-1&&(h_(e,r),jh(t,r))}this._attachedToViewContainer=!1}qx(this._lView[O],this._lView)}onDestroy(e){!function J1(n,e,t,r){const i=iN(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&sN(n).push(r,i.length-1))}(this._lView[O],this._lView,null,e)}markForCheck(){uf(this._cdRefInjectingView||this._lView)}detach(){this._lView[ce]&=-65}reattach(){this._lView[ce]|=64}detectChanges(){lf(this._lView[O],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hq(n,e){Bl(n,e,e[he],2,null,null)}(this._lView[O],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=e}}class AW extends Gl{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;lf(e[O],e,e[lt],!1)}checkNoChanges(){}get context(){return null}}class uN extends xa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ae(e);return new zl(t,this.ngModule)}}function lN(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class xW{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ih(r);const i=this.injector.get(e,k_,r);return i!==k_||t===k_?i:this.parentInjector.get(e,t,r)}}class zl extends S1{get inputs(){return lN(this.componentDef.inputs)}get outputs(){return lN(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function O6(n){return n.map(P6).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ai?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new xW(e,s):e,a=o.get(jl,null);if(null===a)throw new I(407,!1);const u=o.get(g6,null),l=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=r?function sW(n,e,t){return n.selectRootElement(e,t===Sr.ShadowDom)}(l,r,this.componentDef.encapsulation):d_(l,c,function MW(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),h=this.componentDef.onPush?288:272,f=z_(0,null,null,1,0,null,null,null,null,null),p=rf(null,f,null,h,null,null,a,l,u,o,null);let g,m;By(p);try{const _=this.componentDef;let b,v=null;_.findHostDirectiveDefs?(b=[],v=new Map,_.findHostDirectiveDefs(_,b,v),b.push(_)):b=[_];const A=function RW(n,e){const t=n[O],r=je;return n[r]=e,Fa(t,r,2,"#host",null)}(p,d),L=function kW(n,e,t,r,i,s,o,a){const u=i[O];!function PW(n,e,t,r){for(const i of n)e.mergedAttrs=xl(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(cf(e,e.mergedAttrs,!0),null!==t&&i1(r,t,e))}(r,n,e,o);const l=s.createRenderer(e,t),c=rf(i,X1(t),null,t.onPush?32:16,i[n.index],n,s,l,a||null,null,null);return u.firstCreatePass&&W_(u,n,r.length-1),af(i,c),i[n.index]=c}(A,d,_,b,p,a,l);m=qM(f,je),d&&function FW(n,e,t,r){if(r)Hy(n,t,["ng-version",M1.full]);else{const{attrs:i,classes:s}=function F6(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Rr(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Hy(n,t,i),s&&s.length>0&&r1(n,t,s.join(" "))}}(l,_,d,r),void 0!==t&&function LW(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(m,this.ngContentSelectors,t),g=function OW(n,e,t,r,i,s){const o=Ht(),a=i[O],u=Qn(o,i);tN(a,i,o,t,null,r);for(let c=0;c<t.length;c++)on(eo(i,a,o.directiveStart+c,o),i);nN(a,i,o),u&&on(u,i);const l=eo(i,a,o.directiveStart+o.componentOffset,o);if(n[lt]=i[lt]=l,null!==s)for(const c of s)c(l,e);return j_(a,o,n),l}(L,_,b,v,p,[VW]),$_(f,p,null)}finally{Uy()}return new NW(this.componentType,g,Na(m,p),p,m)}}class NW extends l6{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new AW(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;X_(s[O],s,i,e,t),uf(On(this._tNode.index,s))}}get injector(){return new wa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function VW(){const n=Ht();kh(T()[O],n)}function Me(n){let e=function cN(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Nr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new I(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=J_(n.inputs),o.declaredInputs=J_(n.declaredInputs),o.outputs=J_(n.outputs);const a=i.hostBindings;a&&jW(n,a);const u=i.viewQuery,l=i.contentQueries;if(u&&UW(n,u),l&&$W(n,l),vy(n.inputs,i.inputs),vy(n.declaredInputs,i.declaredInputs),vy(n.outputs,i.outputs),Nr(i)&&i.data.animation){const c=n.data;c.animation=(c.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Me&&(t=!1)}}e=Object.getPrototypeOf(e)}!function BW(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xl(i.hostAttrs,t=xl(t,i.hostAttrs))}}(r)}function J_(n){return n===bi?{}:n===De?[]:n}function UW(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function $W(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function jW(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function hf(n){return!!Z_(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Z_(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Zr(n,e,t){return n[e]=t}function an(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function so(n,e,t,r){const i=an(n,e,t);return an(n,e+1,r)||i}function Vn(n,e,t,r){const i=T();return an(i,_a(),e)&&(we(),Jr(Xe(),i,n,e,t,r)),Vn}function Ba(n,e,t,r,i,s){const a=so(n,function Di(){return se.lFrame.bindingIndex}(),t,i);return Ci(2),a?e+ie(t)+r+ie(i)+s:oe}function Ke(n,e,t,r,i,s,o,a){const u=T(),l=we(),c=n+je,d=l.firstCreatePass?function JW(n,e,t,r,i,s,o,a,u){const l=e.consts,c=Fa(e,n,4,o||null,as(l,a));q_(e,t,c,as(l,u)),kh(e,c);const d=c.tView=z_(2,c,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,l,u,e,t,r,i,s,o):l.data[c];Qr(d,!1);const h=u[he].createComment("");Wh(l,u,h,d),on(h,u),af(u,u[c]=rN(h,u,h,d)),xh(d)&&H_(l,u,d),null!=o&&G_(u,d,a)}function pe(n,e,t){const r=T();return an(r,_a(),e)&&Zn(we(),Xe(),r,n,e,r[he],t,!1),pe}function ev(n,e,t,r,i){const o=i?"class":"style";X_(n,t,e.inputs[o],o,r)}function G(n,e,t,r){const i=T(),s=we(),o=je+n,a=i[he],u=s.firstCreatePass?function t9(n,e,t,r,i,s){const o=e.consts,u=Fa(e,n,2,r,as(o,i));return q_(e,t,u,as(o,s)),null!==u.attrs&&cf(u,u.attrs,!1),null!==u.mergedAttrs&&cf(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],l=i[o]=d_(a,e,function d3(){return se.lFrame.currentNamespace}()),c=xh(u);return Qr(u,!0),i1(a,l,u),32!=(32&u.flags)&&Wh(s,i,l,u),0===function Q4(){return se.lFrame.elementDepthCount}()&&on(l,i),function Y4(){se.lFrame.elementDepthCount++}(),c&&(H_(s,i,u),j_(s,u,i)),null!==r&&G_(i,u),G}function z(){let n=Ht();Py()?Oy():(n=n.parent,Qr(n,!1));const e=n;!function X4(){se.lFrame.elementDepthCount--}();const t=we();return t.firstCreatePass&&(kh(t,n),Ny(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function g3(n){return 0!=(8&n.flags)}(e)&&ev(t,e,T(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function m3(n){return 0!=(16&n.flags)}(e)&&ev(t,e,T(),e.stylesWithoutHost,!1),z}function un(n,e,t,r){return G(n,e,t,r),z(),un}function qa(n,e,t){const r=T(),i=we(),s=n+je,o=i.firstCreatePass?function n9(n,e,t,r,i){const s=e.consts,o=as(s,r),a=Fa(e,n,8,"ng-container",o);return null!==o&&cf(a,o,!0),q_(e,t,a,as(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];Qr(o,!0);const a=r[s]=r[he].createComment("");return Wh(i,r,a,o),on(a,r),xh(o)&&(H_(i,r,o),j_(i,o,r)),null!=t&&G_(r,o),qa}function Wa(){let n=Ht();const e=we();return Py()?Oy():(n=n.parent,Qr(n,!1)),e.firstCreatePass&&(kh(e,n),Ny(n)&&e.queries.elementEnd(n)),Wa}function pf(){return T()}function Wl(n){return!!n&&"function"==typeof n.then}function TN(n){return!!n&&"function"==typeof n.subscribe}const tv=TN;function Re(n,e,t,r){const i=T(),s=we(),o=Ht();return function CN(n,e,t,r,i,s,o){const a=xh(r),l=n.firstCreatePass&&sN(n),c=e[lt],d=iN(e);let h=!0;if(3&r.type||o){const g=Qn(r,e),m=o?o(g):g,_=d.length,b=o?A=>o(jt(A[r.index])):r.index;let v=null;if(!o&&a&&(v=function r9(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[fa],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,h=!1;else{s=AN(r,e,c,s,!1);const A=t.listen(m,i,s);d.push(s,A),l&&l.push(i,b,_,_+1)}}else s=AN(r,e,c,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const L=e[p[m]][p[m+1]].subscribe(s),V=d.length;d.push(s,L),l&&l.push(i,r.index,V,-(V+1))}}}(s,i,i[he],o,n,e,r),Re}function SN(n,e,t,r){try{return fr(6,e,t),!1!==t(r)}catch(i){return aN(n,i),!1}finally{fr(7,e,t)}}function AN(n,e,t,r,i){return function s(o){if(o===Function)return r;uf(n.componentOffset>-1?On(n.index,e):e);let u=SN(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)u=SN(e,t,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function zt(n=1){return function s3(n){return(se.lFrame.contextLView=function o3(n,e){for(;n>0;)e=e[pa],n--;return e}(n,se.lFrame.contextLView))[lt]}(n)}function gf(n,e){return n<<17|e<<2}function us(n){return n>>17&32767}function rv(n){return 2|n}function oo(n){return(131068&n)>>2}function iv(n,e){return-131069&n|e<<2}function sv(n){return 1|n}function VN(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?us(s):oo(s),u=!1;for(;0!==a&&(!1===u||o);){const c=n[a+1];h9(n[a],e)&&(u=!0,n[a+1]=r?sv(c):rv(c)),a=r?us(c):oo(c)}u&&(n[t+1]=r?rv(s):sv(s))}function h9(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Da(n,e)>=0}const Ct={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function BN(n){return n.substring(Ct.key,Ct.keyEnd)}function UN(n,e){const t=Ct.textEnd;return t===e?-1:(e=Ct.keyEnd=function m9(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Ct.key=e,t),Ka(n,e,t))}function Ka(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Qa(n,e,t){return kr(n,e,t,!1),Qa}function mf(n,e){return kr(n,e,null,!0),mf}function Ri(n){!function Pr(n,e,t,r){const i=we(),s=Ci(2);i.firstUpdatePass&&qN(i,null,s,r);const o=T();if(t!==oe&&an(o,s,t)){const a=i.data[bn()];if(YN(a,r)&&!zN(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(t=wy(u,t||"")),ev(i,a,o,t,r)}else!function C9(n,e,t,r,i,s,o,a){i===oe&&(i=De);let u=0,l=0,c=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;null!==c||null!==d;){const h=u<i.length?i[u+1]:void 0,f=l<s.length?s[l+1]:void 0;let g,p=null;c===d?(u+=2,l+=2,h!==f&&(p=d,g=f)):null===d||null!==c&&c<d?(u+=2,p=c):(l+=2,p=d,g=f),null!==p&&KN(n,e,t,r,p,g,o,a),c=u<i.length?i[u]:null,d=l<s.length?s[l]:null}}(i,a,o,o[he],o[s+1],o[s+1]=function T9(n,e,t){if(null==t||""===t)return De;const r=[],i=Xn(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,s)}}(D9,ti,n,!0)}function ti(n,e){for(let t=function p9(n){return function jN(n){Ct.key=0,Ct.keyEnd=0,Ct.value=0,Ct.valueEnd=0,Ct.textEnd=n.length}(n),UN(n,Ka(n,0,Ct.textEnd))}(e);t>=0;t=UN(e,t))Yn(n,BN(e),!0)}function kr(n,e,t,r){const i=T(),s=we(),o=Ci(2);s.firstUpdatePass&&qN(s,n,o,r),e!==oe&&an(i,o,e)&&KN(s,s.data[bn()],i,i[he],n,i[o+1]=function S9(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Le(Xn(n)))),n}(e,t),r,o)}function zN(n,e){return e>=n.expandoStartIndex}function qN(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[bn()],o=zN(n,t);YN(s,r)&&null===e&&!o&&(e=!1),e=function w9(n,e,t,r){const i=Ly(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Kl(t=ov(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=ov(i,n,e,t,r),null===s){let u=function E9(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==oo(r))return n[us(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=ov(null,n,e,u[1],r),u=Kl(u,e.attrs,r),function b9(n,e,t,r){n[us(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function I9(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Kl(r,n[s].hostAttrs,t);return Kl(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function c9(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=us(o),u=oo(o);n[r]=t;let c,l=!1;if(Array.isArray(t)?(c=t[1],(null===c||Da(t,c)>0)&&(l=!0)):c=t,i)if(0!==u){const h=us(n[a+1]);n[r+1]=gf(h,a),0!==h&&(n[h+1]=iv(n[h+1],r)),n[a+1]=function u9(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=gf(a,0),0!==a&&(n[a+1]=iv(n[a+1],r)),a=r;else n[r+1]=gf(u,0),0===a?a=r:n[u+1]=iv(n[u+1],r),u=r;l&&(n[r+1]=rv(n[r+1])),VN(n,c,r,!0),VN(n,c,r,!1),function d9(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Da(s,e)>=0&&(t[r+1]=sv(t[r+1]))}(e,c,n,r,s),o=gf(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}function ov(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Kl(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Kl(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Yn(n,o,!!t||e[++s]))}return void 0===n?null:n}function D9(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&Yn(n,r,t)}function KN(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,l=u[a+1],c=function l9(n){return 1==(1&n)}(l)?QN(u,e,t,i,oo(l),o):void 0;yf(c)||(yf(s)||function a9(n){return 2==(2&n)}(l)&&(s=QN(u,null,t,i,a,o)),function bq(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Fn.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Fn.Important),n.setStyle(t,r,i,s))}}(r,o,Nh(bn(),t),i,s))}function QN(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],l=Array.isArray(u),c=l?u[1]:u,d=null===c;let h=t[i+1];h===oe&&(h=d?De:void 0);let f=d?Xy(h,r):c===r?h:void 0;if(l&&!yf(f)&&(f=Xy(u,r)),yf(f)&&(a=f,o))return a;const p=n[i+1];i=o?us(p):oo(p)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Xy(u,r))}return a}function yf(n){return void 0!==n}function YN(n,e){return 0!=(n.flags&(e?8:16))}function ae(n,e=""){const t=T(),r=we(),i=n+je,s=r.firstCreatePass?Fa(r,i,1,e,null):r.data[i],o=t[i]=function c_(n,e){return n.createText(e)}(t[he],e);Wh(r,t,o,s),Qr(s,!1)}function ls(n){return Or("",n,""),ls}function Or(n,e,t){const r=T(),i=function Va(n,e,t,r){return an(n,_a(),t)?e+ie(t)+r:oe}(r,n,e,t);return i!==oe&&Ni(r,bn(),i),Or}function av(n,e,t,r,i){const s=T(),o=Ba(s,n,e,t,r,i);return o!==oe&&Ni(s,bn(),o),av}function uv(n,e,t){const r=T();if(an(r,_a(),e)){const s=we(),o=Xe();Zn(s,o,r,n,e,function oN(n,e,t){return(null===n||Nr(n))&&(t=function z4(n){for(;Array.isArray(n);){if("object"==typeof n[xy])return n;n=n[Ti]}return null}(t[e.index])),t[he]}(Ly(s.data),o,r),t,!0)}return uv}const Xa="en-US";let mR=Xa;function dv(n,e,t,r,i){if(n=Y(n),Array.isArray(n))for(let s=0;s<n.length;s++)dv(n[s],e,t,r,i);else{const s=we(),o=T();let a=io(n)?n:Y(n.provide),u=C1(n);const l=Ht(),c=1048575&l.providerIndexes,d=l.directiveStart,h=l.providerIndexes>>20;if(io(n)||!n.multi){const f=new Ml(u,i,D),p=fv(a,e,i?c:c+h,d);-1===p?(Wy(Bh(l,o),s,a),hv(s,n,e.length),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=fv(a,e,c+h,d),p=fv(a,e,c,c+h),m=p>=0&&t[p];if(i&&!m||!i&&!(f>=0&&t[f])){Wy(Bh(l,o),s,a);const _=function z5(n,e,t,r,i){const s=new Ml(n,t,D);return s.multi=[],s.index=e,s.componentProviders=0,$R(s,i,r&&!t),s}(i?G5:H5,t.length,i,r,u);!i&&m&&(t[p].providerFactory=_),hv(s,n,e.length,0),e.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(_),o.push(_)}else hv(s,n,f>-1?f:p,$R(t[i?p:f],u,!i&&r));!i&&r&&m&&t[p].componentProviders++}}}function hv(n,e,t,r){const i=io(e),s=function n6(n){return!!n.useClass}(e);if(i||s){const u=(s?Y(e.useClass):e).prototype.ngOnDestroy;if(u){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const c=l.indexOf(t);-1===c?l.push(t,[r,u]):l[c+1].push(r,u)}else l.push(t,u)}}}function $R(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function fv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function H5(n,e,t,r){return pv(this.multi,[])}function G5(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=eo(t,t[O],this.providerFactory.index,r);s=a.slice(0,o),pv(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],pv(i,s);return s}function pv(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Qe(n,e=[]){return t=>{t.providersResolver=(r,i)=>function j5(n,e,t){const r=we();if(r.firstCreatePass){const i=Nr(n);dv(t,r.data,r.blueprint,i,!0),dv(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Ja{}class jR{}class HR extends Ja{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new uN(this);const r=Wn(e);this._bootstrapComponents=xi(r.bootstrap),this._r3Injector=$1(e,t,[{provide:Ja,useValue:this},{provide:xa,useValue:this.componentFactoryResolver}],Le(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class gv extends jR{constructor(e){super(),this.moduleType=e}create(e){return new HR(this.moduleType,e)}}class W5 extends Ja{constructor(e,t,r){super(),this.componentFactoryResolver=new uN(this),this.instance=null;const i=new D1([...e,{provide:Ja,useValue:this},{provide:xa,useValue:this.componentFactoryResolver}],t||tf(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function bf(n,e,t=null){return new W5(n,e,t).injector}let K5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=E1(0,t.type),i=r.length>0?bf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=U({token:n,providedIn:"environment",factory:()=>new n(P(Ai))}),n})();function If(n){n.getStandaloneInjector=e=>e.get(K5).getOrCreateStandaloneInjector(n)}function uo(n,e,t,r){return YR(T(),En(),n,e,t,r)}function ec(n,e){const t=n[e];return t===oe?void 0:t}function YR(n,e,t,r,i,s){const o=e+t;return an(n,o,i)?Zr(n,o+1,s?r.call(s,i):r(i)):ec(n,o+1)}function yv(n,e){const t=we();let r;const i=n+je;t.firstCreatePass?(r=function h7(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Js(r.type)),o=dr(D);try{const a=Vh(!1),u=s();return Vh(a),function ZW(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,T(),i,u),u}finally{dr(o)}}function nk(n,e,t,r){const i=n+je,s=T(),o=ya(s,i);return tc(s,i)?function XR(n,e,t,r,i,s,o){const a=e+t;return so(n,a,i,s)?Zr(n,a+2,o?r.call(o,i,s):r(i,s)):ec(n,a+2)}(s,En(),e,o.transform,t,r,o):o.transform(t,r)}function tc(n,e){return n[O].data[e].pure}function _v(n){return e=>{setTimeout(n,void 0,e)}}const Je=class m7 extends tn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=_v(s),i&&(i=_v(i)),o&&(o=_v(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof zn&&e.add(a),a}};let ki=(()=>{class n{}return n.__NG_ELEMENT_ID__=w7,n})();const _7=ki,v7=class extends _7{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tView,i=rf(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[Il]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[Kr];return null!==o&&(i[Kr]=o.createEmbeddedView(r)),$_(r,i,e),new Gl(i)}};function w7(){return function Tf(n,e){return 4&n.type?new v7(e,n,Na(n,e)):null}(Ht(),T())}let Fr=(()=>{class n{}return n.__NG_ELEMENT_ID__=E7,n})();function E7(){return function sk(n,e){let t;const r=e[n.index];if(xr(r))t=r;else{let i;if(8&n.type)i=jt(r);else{const s=e[he];i=s.createComment("");const o=Qn(n,e);no(s,qh(s,o),i,function vq(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=rN(r,e,i,n),af(e,t)}return new rk(t,n,e)}(Ht(),T())}const b7=Fr,rk=class extends b7{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Na(this._hostTNode,this._hostLView)}get injector(){return new wa(this._hostTNode,this._hostLView)}get parentInjector(){const e=qy(this._hostTNode,this._hostLView);if(cx(e)){const t=Lh(e,this._hostLView),r=Fh(e);return new wa(t[O].data[r+8],t)}return new wa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=ik(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-wn}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,i),o}createComponent(e,t,r,i,s){const o=e&&!function Rl(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const u=o?e:new zl(Ae(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const h=(o?l:this.parentInjector).get(Ai,null);h&&(s=h)}const c=u.create(l,i,void 0,s);return this.insert(c.hostView,a),c}insert(e,t){const r=e._lView,i=r[O];if(function K4(n){return xr(n[rt])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=r[rt],h=new rk(d,d[rn],d[rt]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function pq(n,e,t,r){const i=wn+r,s=t.length;r>0&&(t[i-1][Mr]=e),r<s-wn?(e[Mr]=t[i],bx(t,wn+r,e)):(t.push(e),e[Mr]=null),e[rt]=t;const o=e[Il];null!==o&&t!==o&&function gq(n,e){const t=n[ma];e[sn]!==e[rt][rt][sn]&&(n[VM]=!0),null===t?n[ma]=[e]:t.push(e)}(o,e);const a=e[Kr];null!==a&&a.insertView(n),e[ce]|=64}(i,r,o,s);const a=g_(s,o),u=r[he],l=qh(u,o[Ah]);return null!==l&&function dq(n,e,t,r,i,s){r[Ti]=i,r[rn]=e,Bl(n,r,t,1,i,s)}(i,o[rn],u,r,l,a),e.attachToViewContainerRef(),bx(wv(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=ik(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=h_(this._lContainer,t);r&&(jh(wv(this._lContainer),t),qx(r[O],r))}detach(e){const t=this._adjustIndex(e,-1),r=h_(this._lContainer,t);return r&&null!=jh(wv(this._lContainer),t)?new Gl(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function ik(n){return n[Mh]}function wv(n){return n[Mh]||(n[Mh]=[])}function Cf(...n){}const Sf=new $("Application Initializer");let Af=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Cf,this.reject=Cf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Wl(s))t.push(s);else if(tv(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(P(Sf,8))},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rc=new $("AppId",{providedIn:"root",factory:function Nk(){return`${Nv()}${Nv()}${Nv()}`}});function Nv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Rk=new $("Platform Initializer"),Mf=new $("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kk=new $("AnimationModuleType");let Y7=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Pi=new $("LocaleId",{providedIn:"root",factory:()=>W(Pi,X.Optional|X.SkipSelf)||function X7(){return typeof $localize<"u"&&$localize.locale||Xa}()});class Z7{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Pk=(()=>{class n{compileModuleSync(t){return new gv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=xi(Wn(t).declarations).reduce((o,a)=>{const u=Ae(a);return u&&o.push(new zl(u)),o},[]);return new Z7(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const n8=(()=>Promise.resolve(0))();function Rv(n){typeof Zone>"u"?n8.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ke{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Je(!1),this.onMicrotaskEmpty=new Je(!1),this.onStable=new Je(!1),this.onError=new Je(!1),typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function r8(){let n=$e.requestAnimationFrame,e=$e.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function o8(n){const e=()=>{!function s8(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call($e,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Pv(n),n.isCheckStableRunning=!0,kv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Pv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return Lk(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Vk(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return Lk(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),Vk(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Pv(n),kv(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ke.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(ke.isInAngularZone())throw new I(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,i8,Cf,Cf);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const i8={};function kv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Pv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Lk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Vk(n){n._nesting--,kv(n)}class a8{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Je,this.onMicrotaskEmpty=new Je,this.onStable=new Je,this.onError=new Je}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const Bk=new $(""),xf=new $("");let Lv,Ov=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Lv||(function u8(n){Lv=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ke.assertNotInAngularZone(),Rv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Rv(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(P(ke),P(Fv),P(xf))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})(),Fv=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Lv?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Oi=!1;let cs=null;const Uk=new $("AllowMultipleToken"),Vv=new $("PlatformDestroyListeners"),$k=new $("appBootstrapListener");class jk{constructor(e,t){this.name=e,this.token=t}}function Gk(n,e,t=[]){const r=`Platform: ${e}`,i=new $(r);return(s=[])=>{let o=Bv();if(!o||o.injector.get(Uk,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function d8(n){if(cs&&!cs.get(Uk,!1))throw new I(400,!1);cs=n;const e=n.get(qk);(function Hk(n){const e=n.get(Rk,null);e&&e.forEach(t=>t())})(n)}(function zk(n=[],e){return Tn.create({name:e,providers:[{provide:M_,useValue:"platform"},{provide:Vv,useValue:new Set([()=>cs=null])},...n]})}(a,r))}return function f8(n){const e=Bv();if(!e)throw new I(401,!1);return e}()}}function Bv(){return cs?.get(qk)??null}let qk=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function Kk(n,e){let t;return t="noop"===n?new a8:("zone.js"===n?void 0:n)||new ke(e),t}(r?.ngZone,function Wk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:ke,useValue:i}];return i.run(()=>{const o=Tn.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),u=a.injector.get(ka,null);if(!u)throw new I(402,!1);return i.runOutsideAngular(()=>{const l=i.onError.subscribe({next:c=>{u.handleError(c)}});a.onDestroy(()=>{Nf(this._modules,a),l.unsubscribe()})}),function Qk(n,e,t){try{const r=t();return Wl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(u,i,()=>{const l=a.injector.get(Af);return l.runInitializers(),l.donePromise.then(()=>(function yR(n){cr(n,"Expected localeId to be defined"),"string"==typeof n&&(mR=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Pi,Xa)||Xa),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=Yk({},r);return function l8(n,e,t){const r=new gv(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(lo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new I(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new I(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Vv,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(P(Tn))},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Yk(n,e){return Array.isArray(e)?e.reduce(Yk,n):{...n,...e}}let lo=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new We(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new We(a=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{ke.assertNotInAngularZone(),Rv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const l=this._zone.onUnstable.subscribe(()=>{ke.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),l.unsubscribe()}});this.isStable=function f4(...n){const e=yl(n),t=function o4(n,e){return"number"==typeof yy(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?lr(r[0]):ca(t)(mt(r,e)):qr}(s,o.pipe(function p4(n={}){const{connector:e=(()=>new tn),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,l=0,c=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,c=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return Rt((g,m)=>{l++,!d&&!c&&h();const _=u=u??e();m.add(()=>{l--,0===l&&!d&&!c&&(a=_y(p,i))}),_.subscribe(m),!o&&l>0&&(o=new ml({next:b=>_.next(b),error:b=>{d=!0,h(),a=_y(f,t,b),_.error(b)},complete:()=>{c=!0,h(),a=_y(f,r),_.complete()}}),lr(g).subscribe(o))})(s)}}()))}bootstrap(t,r){const i=t instanceof S1;if(!this._injector.get(Af).done){!i&&function ha(n){const e=Ae(n)||nn(n)||Pn(n);return null!==e&&e.standalone}(t);throw new I(405,Oi)}let o;o=i?t:this._injector.get(xa).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function c8(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Ja),l=o.create(Tn.NULL,[],r||o.selector,a),c=l.location.nativeElement,d=l.injector.get(Bk,null);return d?.registerApplication(c),l.onDestroy(()=>{this.detachView(l.hostView),Nf(this.components,l),d?.unregisterApplication(c)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new I(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Nf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get($k,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Nf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new I(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(P(ke),P(Ai),P(ka))},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let ic=(()=>{class n{}return n.__NG_ELEMENT_ID__=g8,n})();function g8(n){return function m8(n,e,t){if(Dl(n)&&!t){const r=On(n.index,e);return new Gl(r,r)}return 47&n.type?new Gl(e[sn],e):null}(Ht(),T(),16==(16&n))}class tP{constructor(){}supports(e){return hf(e)}create(e){return new b8(e)}}const E8=(n,e)=>e;class b8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||E8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<rP(r,i,s)?t:r,a=rP(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,c=u-i;if(l!=c){for(let h=0;h<l;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;c<=p&&p<l&&(s[h]=f+1)}s[o.previousIndex]=c-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!hf(e))throw new I(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function QW(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new I8(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new nP),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nP),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class I8{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class T8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class nP{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new T8,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rP(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class iP{constructor(){}supports(e){return e instanceof Map||Z_(e)}create(){return new D8}}class D8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Z_(e)))throw new I(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new C8(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class C8{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sP(){return new Pf([new tP])}let Pf=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||sP()),deps:[[n,new Pl,new In]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new I(901,!1)}}return n.\u0275prov=U({token:n,providedIn:"root",factory:sP}),n})();function oP(){return new sc([new iP])}let sc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||oP()),deps:[[n,new Pl,new In]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new I(901,!1)}}return n.\u0275prov=U({token:n,providedIn:"root",factory:oP}),n})();const M8=Gk(null,"core",[]);let x8=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(P(lo))},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({}),n})();function tu(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Gv=null;function Fi(){return Gv}class k8{}const yt=new $("DocumentToken");let zv=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:function(){return function P8(){return P(aP)}()},providedIn:"platform"}),n})();const O8=new $("Location Initialized");let aP=(()=>{class n extends zv{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fi().getBaseHref(this._doc)}onPopState(t){const r=Fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){uP()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){uP()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(P(yt))},n.\u0275prov=U({token:n,factory:function(){return function F8(){return new aP(P(yt))}()},providedIn:"platform"}),n})();function uP(){return!!window.history.pushState}function qv(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function lP(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Li(n){return n&&"?"!==n[0]?"?"+n:n}let ho=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:function(){return W(dP)},providedIn:"root"}),n})();const cP=new $("appBaseHref");let dP=(()=>{class n extends ho{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??W(yt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qv(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Li(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Li(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Li(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(P(zv),P(cP,8))},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),L8=(()=>{class n extends ho{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=qv(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Li(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Li(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(P(zv),P(cP,8))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})(),Wv=(()=>{class n{constructor(t){this._subject=new Je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function U8(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(lP(hP(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Li(r))}normalize(t){return n.stripTrailingSlash(function B8(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,hP(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Li(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Li(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Li,n.joinWithSlash=qv,n.stripTrailingSlash=lP,n.\u0275fac=function(t){return new(t||n)(P(ho))},n.\u0275prov=U({token:n,factory:function(){return function V8(){return new Wv(P(ho))}()},providedIn:"root"}),n})();function hP(n){return n.replace(/\/index.html$/,"")}const rw=/\s+/,EP=[];let iw=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=EP,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(rw):EP}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(rw):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(rw).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(D(Pf),D(sc),D(Jn),D(Mi))},n.\u0275dir=ee({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class DK{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sw=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new DK(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),TP(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{TP(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(D(Fr),D(ki),D(Pf))},n.\u0275dir=ee({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function TP(n,e){n.context.$implicit=e.item}let uc=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new SK,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){DP("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){DP("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(D(Fr),D(ki))},n.\u0275dir=ee({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class SK{constructor(){this.$implicit=null,this.ngIf=null}}function DP(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Le(e)}'.`)}let uw=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Fn.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(D(Jn),D(sc),D(Mi))},n.\u0275dir=ee({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})();class NK{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class RK{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const kK=new RK,PK=new NK;let SP=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Wl(t))return kK;if(TN(t))return PK;throw function Br(n,e){return new I(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(D(ic,16))},n.\u0275pipe=vn({name:"async",type:n,pure:!1,standalone:!0}),n})(),JK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({}),n})();let nQ=(()=>{class n{}return n.\u0275prov=U({token:n,providedIn:"root",factory:()=>new rQ(P(yt),window)}),n})();class rQ{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function iQ(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=xP(this.window.history)||xP(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function xP(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class RQ extends k8{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fw extends RQ{static makeCurrent(){!function R8(n){Gv||(Gv=n)}(new fw)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function kQ(){return cc=cc||document.querySelector("base"),cc?cc.getAttribute("href"):null}();return null==t?null:function PQ(n){qf=qf||document.createElement("a"),qf.setAttribute("href",n);const e=qf.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){cc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function IK(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let qf,cc=null;const OP=new $("TRANSITION_ID"),FQ=[{provide:Sf,useFactory:function OQ(n,e,t){return()=>{t.get(Af).donePromise.then(()=>{const r=Fi(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[OP,yt,Tn],multi:!0}];let VQ=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})();const Wf=new $("EventManagerPlugins");let Kf=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(P(Wf),P(ke))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})();class FP{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Fi().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let LP=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})(),dc=(()=>{class n extends LP{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(P(yt))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})();const pw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gw=/%COMP%/g,UP=new $("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function $P(n,e){return e.flat(100).map(t=>t.replace(gw,n))}function jP(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qf=(()=>{class n{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new mw(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof zP?i.applyToHost(t):i instanceof yw&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,u=this.removeStylesOnCompDestory;switch(r.encapsulation){case Sr.Emulated:s=new zP(o,a,r,this.appId,u);break;case Sr.ShadowDom:return new zQ(o,a,t,r);default:s=new yw(o,a,r,u)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(P(Kf),P(dc),P(rc),P(UP))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})();class mw{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pw[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(GP(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(GP(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=pw[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=pw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Fn.DashCase|Fn.Important)?e.style.setProperty(t,r,i&Fn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Fn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,jP(r)):this.eventManager.addEventListener(e,t,jP(r))}}function GP(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class zQ extends mw{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=$P(i.id,i.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class yw extends mw{constructor(e,t,r,i,s=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=$P(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class zP extends yw{constructor(e,t,r,i,s){const o=i+"-"+r.id;super(e,t,r,s,o),this.contentAttr=function jQ(n){return"_ngcontent-%COMP%".replace(gw,n)}(o),this.hostAttr=function HQ(n){return"_nghost-%COMP%".replace(gw,n)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let qQ=(()=>{class n extends FP{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(P(yt))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})();const qP=["alt","control","meta","shift"],WQ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KQ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let QQ=(()=>{class n extends FP{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fi().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),qP.forEach(l=>{const c=r.indexOf(l);c>-1&&(r.splice(c,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=WQ[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),qP.forEach(o=>{o!==i&&(0,KQ[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(P(yt))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})();const KP=[{provide:Mf,useValue:"browser"},{provide:Rk,useValue:function YQ(){fw.makeCurrent()},multi:!0},{provide:yt,useFactory:function JQ(){return function Sq(n){v_=n}(document),document},deps:[]}],ZQ=Gk(M8,"browser",KP),QP=new $(""),YP=[{provide:xf,useClass:class LQ{addToWindow(e){$e.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},$e.getAllAngularTestabilities=()=>e.getAllTestabilities(),$e.getAllAngularRootElements=()=>e.getAllRootElements(),$e.frameworkStabilizers||($e.frameworkStabilizers=[]),$e.frameworkStabilizers.push(r=>{const i=$e.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Fi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:Bk,useClass:Ov,deps:[ke,Fv,xf]},{provide:Ov,useClass:Ov,deps:[ke,Fv,xf]}],XP=[{provide:M_,useValue:"root"},{provide:ka,useFactory:function XQ(){return new ka},deps:[]},{provide:Wf,useClass:qQ,multi:!0,deps:[yt,ke,Mf]},{provide:Wf,useClass:QQ,multi:!0,deps:[yt]},{provide:Qf,useClass:Qf,deps:[Kf,dc,rc,UP]},{provide:jl,useExisting:Qf},{provide:LP,useExisting:dc},{provide:dc,useClass:dc,deps:[yt]},{provide:Kf,useClass:Kf,deps:[Wf,ke]},{provide:class sQ{},useClass:VQ,deps:[]},[]];let JP=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:rc,useValue:t.appId},{provide:OP,useExisting:rc},FQ]}}}return n.\u0275fac=function(t){return new(t||n)(P(QP,12))},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({providers:[...XP,...YP],imports:[JK,x8]}),n})(),ZP=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(P(yt))},n.\u0275prov=U({token:n,factory:function(t){let r=null;return r=t?new t:function tY(){return new ZP(P(yt))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let nO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:function(t){let r=null;return r=t?new(t||n):P(rO),r},providedIn:"root"}),n})(),rO=(()=>{class n extends nO{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Oe.NONE:return r;case Oe.HTML:return Xr(r,"HTML")?Xn(r):g1(this._doc,String(r)).toString();case Oe.STYLE:return Xr(r,"Style")?Xn(r):r;case Oe.SCRIPT:if(Xr(r,"Script"))return Xn(r);throw new Error("unsafe value used in a script context");case Oe.URL:return Xr(r,"URL")?Xn(r):Xh(String(r));case Oe.RESOURCE_URL:if(Xr(r,"ResourceURL"))return Xn(r);throw new Error(`unsafe value used in a resource URL context (see ${yh})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${yh})`)}}bypassSecurityTrustHtml(t){return function Pq(n){return new Aq(n)}(t)}bypassSecurityTrustStyle(t){return function Oq(n){return new Mq(n)}(t)}bypassSecurityTrustScript(t){return function Fq(n){return new xq(n)}(t)}bypassSecurityTrustUrl(t){return function Lq(n){return new Nq(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Vq(n){return new Rq(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(P(yt))},n.\u0275prov=U({token:n,factory:function(t){let r=null;return r=t?new t:function oY(n){return new rO(n.get(yt))}(P(Tn)),r},providedIn:"root"}),n})();function Q(...n){return mt(n,yl(n))}class ln extends tn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Yf=gl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:aY}=Array,{getPrototypeOf:uY,prototype:lY,keys:cY}=Object;function iO(n){if(1===n.length){const e=n[0];if(aY(e))return{args:e,keys:null};if(function dY(n){return n&&"object"==typeof n&&uY(n)===lY}(e)){const t=cY(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:hY}=Array;function sO(n){return fe(e=>function fY(n,e){return hY(e)?n(...e):n(e)}(n,e))}function oO(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Xf(...n){const e=yl(n),t=TM(n),{args:r,keys:i}=iO(n);if(0===r.length)return mt([],e);const s=new We(function pY(n,e,t=Ys){return r=>{aO(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)aO(e,()=>{const l=mt(n[u],e);let c=!1;l.subscribe(Tt(r,d=>{s[u]=d,c||(c=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>oO(i,o):Ys));return t?s.pipe(sO(t)):s}function aO(n,e,t){n?wi(t,n,e):e()}function ww(...n){return function gY(){return ca(1)}()(mt(n,yl(n)))}function uO(n){return new We(e=>{lr(n()).subscribe(e)})}function hc(n,e){const t=Fe(n)?n:()=>n,r=i=>i.error(t());return new We(e?i=>e.schedule(r,0,i):r)}function Ew(){return Rt((n,e)=>{let t=null;n._refCount++;const r=Tt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class lO extends We{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,lM(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zn;const t=this.getSubject();e.add(this.source.subscribe(Tt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zn.EMPTY)}return e}refCount(){return Ew()(this)}}function ni(n,e){return Rt((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Tt(r,u=>{i?.unsubscribe();let l=0;const c=s++;lr(n(u,c)).subscribe(i=Tt(r,d=>r.next(e?e(u,d,c,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function nu(n){return n<=0?()=>qr:Rt((e,t)=>{let r=0;e.subscribe(Tt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function hs(n,e){return Rt((t,r)=>{let i=0;t.subscribe(Tt(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Jf(n){return Rt((e,t)=>{let r=!1;e.subscribe(Tt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function cO(n=yY){return Rt((e,t)=>{let r=!1;e.subscribe(Tt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yY(){return new Yf}function fs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hs((i,s)=>n(i,s,r)):Ys,nu(1),t?Jf(e):cO(()=>new Yf))}function fo(n,e){return Fe(e)?$t(n,e,1):$t(n,1)}function qt(n,e,t){const r=Fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Rt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Tt(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Ys}function ps(n){return Rt((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Tt(t,void 0,void 0,o=>{s=lr(n(o,ps(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function dO(n,e){return Rt(function _Y(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(Tt(o,c=>{const d=l++;u=a?n(u,c,d):(a=!0,c),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function bw(n){return n<=0?()=>qr:Rt((e,t)=>{let r=[];e.subscribe(Tt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hO(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hs((i,s)=>n(i,s,r)):Ys,bw(1),t?Jf(e):cO(()=>new Yf))}function fc(n,e=!1){return Rt((t,r)=>{let i=0;t.subscribe(Tt(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}function Iw(n){return Rt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ue="primary",pc=Symbol("RouteTitle");class wY{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ru(n){return new wY(n)}function EY(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ri(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!fO(n[i],e[i]))return!1;return!0}function fO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function pO(n){return Array.prototype.concat.apply([],n)}function gO(n){return n.length>0?n[n.length-1]:null}function Wt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function gs(n){return tv(n)?n:Wl(n)?mt(Promise.resolve(n)):Q(n)}const Zf=!1,IY={exact:function _O(n,e,t){if(!po(n.segments,e.segments)||!ep(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_O(n.children[r],e.children[r],t))return!1;return!0},subset:vO},mO={exact:function TY(n,e){return ri(n,e)},subset:function DY(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fO(n[t],e[t]))},ignored:()=>!0};function yO(n,e,t){return IY[t.paths](n.root,e.root,t.matrixParams)&&mO[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vO(n,e,t){return wO(n,e,e.segments,t)}function wO(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!po(i,t)||e.hasChildren()||!ep(i,t,r))}if(n.segments.length===t.length){if(!po(n.segments,t)||!ep(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!vO(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(po(n.segments,i)&&ep(n.segments,i,r)&&n.children[ue])&&wO(n.children[ue],e,s,r)}}function ep(n,e,t){return e.every((r,i)=>mO[t](n[i].parameters,r.parameters))}class ms{constructor(e=new ge([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ru(this.queryParams)),this._queryParamMap}toString(){return AY.serialize(this)}}class ge{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Wt(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tp(this)}}class gc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ru(this.parameters)),this._parameterMap}toString(){return IO(this)}}function po(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let mc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:function(){return new Tw},providedIn:"root"}),n})();class Tw{parse(e){const t=new LY(e);return new ms(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${yc(e.root,!0)}`,r=function NY(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${np(t)}=${np(i)}`).join("&"):`${np(t)}=${np(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function MY(n){return encodeURI(n)}(e.fragment)}`:""}`}}const AY=new Tw;function tp(n){return n.segments.map(e=>IO(e)).join("/")}function yc(n,e){if(!n.hasChildren())return tp(n);if(e){const t=n.children[ue]?yc(n.children[ue],!1):"",r=[];return Wt(n.children,(i,s)=>{s!==ue&&r.push(`${s}:${yc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function SY(n,e){let t=[];return Wt(n.children,(r,i)=>{i===ue&&(t=t.concat(e(r,i)))}),Wt(n.children,(r,i)=>{i!==ue&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ue?[yc(n.children[ue],!1)]:[`${i}:${yc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ue]?`${tp(n)}/${t[0]}`:`${tp(n)}/(${t.join("//")})`}}function EO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function np(n){return EO(n).replace(/%3B/gi,";")}function Dw(n){return EO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rp(n){return decodeURIComponent(n)}function bO(n){return rp(n.replace(/\+/g,"%20"))}function IO(n){return`${Dw(n.path)}${function xY(n){return Object.keys(n).map(e=>`;${Dw(e)}=${Dw(n[e])}`).join("")}(n.parameters)}`}const RY=/^[^\/()?;=#]+/;function ip(n){const e=n.match(RY);return e?e[0]:""}const kY=/^[^=?&#]+/,OY=/^[^&#]+/;class LY{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ue]=new ge(e,t)),r}parseSegment(){const e=ip(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new I(4009,Zf);return this.capture(e),new gc(rp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ip(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ip(this.remaining);i&&(r=i,this.capture(r))}e[rp(t)]=rp(r)}parseQueryParam(e){const t=function PY(n){const e=n.match(kY);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function FY(n){const e=n.match(OY);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=bO(t),s=bO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ip(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new I(4010,Zf);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ue);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ue]:new ge([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new I(4011,Zf)}}function Cw(n){return n.segments.length>0?new ge([],{[ue]:n}):n}function sp(n){const e={};for(const r of Object.keys(n.children)){const s=sp(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function VY(n){if(1===n.numberOfChildren&&n.children[ue]){const e=n.children[ue];return new ge(n.segments.concat(e.segments),e.children)}return n}(new ge(n.segments,e))}function go(n){return n instanceof ms}const Sw=!1;function BY(n,e,t,r,i){if(0===t.length)return iu(e.root,e.root,e.root,r,i);const s=function AO(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new SO(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Wt(s.outlets,(u,l)=>{a[l]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new SO(t,e,r)}(t);return s.toRoot()?iu(e.root,e.root,new ge([],{}),r,i):function o(u){const l=function $Y(n,e,t,r){if(n.isAbsolute)return new su(e.root,!0,0);if(-1===r)return new su(t,t===e.root,0);return function MO(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new I(4005,Sw&&"Invalid number of '../'");i=r.segments.length}return new su(r,!1,i-s)}(t,r+(_c(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,u),c=l.processChildren?ou(l.segmentGroup,l.index,s.commands):Aw(l.segmentGroup,l.index,s.commands);return iu(e.root,l.segmentGroup,c,r,i)}(n.snapshot?._lastPathIndex)}function _c(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function vc(n){return"object"==typeof n&&null!=n&&n.outlets}function iu(n,e,t,r,i){let o,s={};r&&Wt(r,(u,l)=>{s[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`}),o=n===e?t:CO(n,e,t);const a=Cw(sp(o));return new ms(a,s,i)}function CO(n,e,t){const r={};return Wt(n.children,(i,s)=>{r[s]=i===e?t:CO(i,e,t)}),new ge(n.segments,r)}class SO{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_c(r[0]))throw new I(4003,Sw&&"Root segment cannot have matrix parameters");const i=r.find(vc);if(i&&i!==gO(r))throw new I(4004,Sw&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class su{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Aw(n,e,t){if(n||(n=new ge([],{})),0===n.segments.length&&n.hasChildren())return ou(n,e,t);const r=function HY(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(vc(a))break;const u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!NO(u,l,o))return s;r+=2}else{if(!NO(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new ge(n.segments.slice(0,r.pathIndex),{});return s.children[ue]=new ge(n.segments.slice(r.pathIndex),n.children),ou(s,0,i)}return r.match&&0===i.length?new ge(n.segments,{}):r.match&&!n.hasChildren()?Mw(n,e,t):r.match?ou(n,0,i):Mw(n,e,t)}function ou(n,e,t){if(0===t.length)return new ge(n.segments,{});{const r=function jY(n){return vc(n[0])?n[0].outlets:{[ue]:n}}(t),i={};if(!r[ue]&&n.children[ue]&&1===n.numberOfChildren&&0===n.children[ue].segments.length){const s=ou(n.children[ue],e,t);return new ge(n.segments,s.children)}return Wt(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Aw(n.children[o],e,s))}),Wt(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new ge(n.segments,i)}}function Mw(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(vc(s)){const u=GY(s.outlets);return new ge(r,u)}if(0===i&&_c(t[0])){r.push(new gc(n.segments[e].path,xO(t[0]))),i++;continue}const o=vc(s)?s.outlets[ue]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&_c(a)?(r.push(new gc(o,xO(a))),i+=2):(r.push(new gc(o,{})),i++)}return new ge(r,{})}function GY(n){const e={};return Wt(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Mw(new ge([],{}),0,t))}),e}function xO(n){const e={};return Wt(n,(t,r)=>e[r]=`${t}`),e}function NO(n,e,t){return n==t.path&&ri(e,t.parameters)}const wc="imperative";class ii{constructor(e,t){this.id=e,this.url=t}}class xw extends ii{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class mo extends ii{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class op extends ii{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ap extends ii{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Nw extends ii{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zY extends ii{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qY extends ii{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WY extends ii{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class KY extends ii{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QY extends ii{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YY{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class XY{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class JY{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZY{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eX{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tX{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RO{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let iX=(()=>{class n{createUrlTree(t,r,i,s,o,a){return BY(t||r.root,i,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})(),oX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:function(e){return iX.\u0275fac(e)},providedIn:"root"}),n})();class kO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Rw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Rw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=kw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return kw(e,this._root).map(t=>t.value)}}function Rw(n,e){if(n===e.value)return e;for(const t of e.children){const r=Rw(n,t);if(r)return r}return null}function kw(n,e){if(n===e.value)return[e];for(const t of e.children){const r=kw(n,t);if(r.length)return r.unshift(e),r}return[]}class Bi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function au(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class PO extends kO{constructor(e,t){super(e),this.snapshot=t,Pw(this,e)}toString(){return this.snapshot.toString()}}function OO(n,e){const t=function aX(n,e){const o=new up([],{},{},"",{},ue,e,null,n.root,-1,{});return new LO("",new Bi(o,[]))}(n,e),r=new ln([new gc("",{})]),i=new ln({}),s=new ln({}),o=new ln({}),a=new ln(""),u=new uu(r,i,o,a,s,ue,e,t.root);return u.snapshot=t.root,new PO(new Bi(u,[]),t)}class uu{constructor(e,t,r,i,s,o,a,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(fe(l=>l[pc]))??Q(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(fe(e=>ru(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(fe(e=>ru(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function FO(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function uX(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class up{get title(){return this.data?.[pc]}constructor(e,t,r,i,s,o,a,u,l,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._urlSegment=l,this._lastPathIndex=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ru(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ru(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class LO extends kO{constructor(e,t){super(t),this.url=e,Pw(this,t)}toString(){return VO(this._root)}}function Pw(n,e){e.value._routerState=n,e.children.forEach(t=>Pw(n,t))}function VO(n){const e=n.children.length>0?` { ${n.children.map(VO).join(", ")} } `:"";return`${n.value}${e}`}function Ow(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ri(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ri(e.params,t.params)||n.params.next(t.params),function bY(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ri(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ri(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fw(n,e){const t=ri(n.params,e.params)&&function CY(n,e){return po(n,e)&&n.every((t,r)=>ri(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Fw(n.parent,e.parent))}function Ec(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cX(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ec(n,r,i);return Ec(n,r)})}(n,e,t);return new Bi(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ec(n,a)),o}}const r=function dX(n){return new uu(new ln(n.url),new ln(n.params),new ln(n.queryParams),new ln(n.fragment),new ln(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Ec(n,s));return new Bi(r,i)}}const Lw="ngNavigationCancelingError";function BO(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=go(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UO(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function UO(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Lw]=!0,r.cancellationCode=e,t&&(r.url=t),r}function $O(n){return jO(n)&&go(n.url)}function jO(n){return n&&n[Lw]}class hX{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new bc,this.attachRef=null}}let bc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hX,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lp=!1;let Vw=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new Je,this.deactivateEvents=new Je,this.attachEvents=new Je,this.detachEvents=new Je,this.parentContexts=W(bc),this.location=W(Fr),this.changeDetector=W(ic),this.environmentInjector=W(Ai)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I(4012,lp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I(4012,lp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I(4012,lp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new I(4013,lp);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new fX(t,a,i.injector);if(r&&function pX(n){return!!n.resolveComponentFactory}(r)){const l=r.resolveComponentFactory(o);this.activated=i.createComponent(l,i.length,u)}else this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ee({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[hr]}),n})();class fX{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===uu?this.route:e===bc?this.childContexts:this.parent.get(e,t)}}let Bw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ar({type:n,selectors:[["ng-component"]],standalone:!0,features:[If],decls:1,vars:0,template:function(t,r){1&t&&un(0,"router-outlet")},dependencies:[Vw],encapsulation:2}),n})();function HO(n,e){return n.providers&&!n._injector&&(n._injector=bf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function $w(n){const e=n.children&&n.children.map($w),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=Bw),t}function _r(n){return n.outlet||ue}function GO(n,e){const t=n.filter(r=>_r(r)===e);return t.push(...n.filter(r=>_r(r)!==e)),t}function Ic(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class vX{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ow(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=au(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Wt(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=au(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=au(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=au(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new tX(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ZY(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Ow(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ow(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Ic(i.snapshot),u=a?.get(xa)??null;o.attachRef=null,o.route=i,o.resolver=u,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class zO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cp{constructor(e,t){this.component=e,this.route=t}}function wX(n,e,t){const r=n._root;return Tc(r,e?e._root:null,t,[r.value])}function lu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function E4(n){return null!==wh(n)}(n)?e.get(n):n:r}function Tc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=au(e);return n.children.forEach(o=>{(function bX(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function IX(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!po(n.url,e.url);case"pathParamsOrQueryParamsChange":return!po(n.url,e.url)||!ri(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fw(n,e)||!ri(n.queryParams,e.queryParams);default:return!Fw(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new zO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Tc(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new cp(a.outlet.component,o))}else o&&Dc(e,a,i),i.canActivateChecks.push(new zO(r)),Tc(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Wt(s,(o,a)=>Dc(o,t.getContext(a),i)),i}function Dc(n,e,t){const r=au(n),i=n.value;Wt(r,(s,o)=>{Dc(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new cp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Cc(n){return"function"==typeof n}function jw(n){return n instanceof Yf||"EmptyError"===n?.name}const dp=Symbol("INITIAL_VALUE");function cu(){return ni(n=>Xf(n.map(e=>e.pipe(nu(1),function mY(...n){const e=yl(n);return Rt((t,r)=>{(e?ww(n,t,e):ww(n,t)).subscribe(r)})}(dp)))).pipe(fe(e=>{for(const t of e)if(!0!==t){if(t===dp)return dp;if(!1===t||t instanceof ms)return t}return!0}),hs(e=>e!==dp),nu(1)))}function qO(n){return function Tz(...n){return oM(n)}(qt(e=>{if(go(e))throw BO(0,e)}),fe(e=>!0===e))}const Hw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WO(n,e,t,r,i){const s=Gw(n,e,t);return s.matched?function UX(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Q(i.map(o=>{const a=lu(o,n);return gs(function MX(n){return n&&Cc(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(cu(),qO()):Q(!0)}(r=HO(e,r),e,t).pipe(fe(o=>!0===o?s:{...Hw})):Q(s)}function Gw(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Hw}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||EY)(t,n,e);if(!i)return{...Hw};const s={};Wt(i.posParams,(a,u)=>{s[u]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function hp(n,e,t,r){if(t.length>0&&function HX(n,e,t){return t.some(r=>fp(n,e,r)&&_r(r)!==ue)}(n,t,r)){const s=new ge(e,function jX(n,e,t,r){const i={};i[ue]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&_r(s)!==ue){const o=new ge([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[_r(s)]=o}return i}(n,e,r,new ge(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function GX(n,e,t){return t.some(r=>fp(n,e,r))}(n,t,r)){const s=new ge(n.segments,function $X(n,e,t,r,i){const s={};for(const o of r)if(fp(n,t,o)&&!i[_r(o)]){const a=new ge([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[_r(o)]=a}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new ge(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function fp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function KO(n,e,t,r){return!!(_r(n)===r||r!==ue&&fp(e,t,n))&&("**"===n.path||Gw(e,n,t).matched)}function QO(n,e,t){return 0===e.length&&!n.children[t]}const pp=!1;class gp{constructor(e){this.segmentGroup=e||null}}class YO{constructor(e){this.urlTree=e}}function Sc(n){return hc(new gp(n))}function XO(n){return hc(new YO(n))}class KX{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=hp(this.urlTree.root,[],[],this.config).segmentGroup,t=new ge(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,ue).pipe(fe(s=>this.createUrlTree(sp(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ps(s=>{if(s instanceof YO)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof gp?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ue).pipe(fe(i=>this.createUrlTree(sp(i),e.queryParams,e.fragment))).pipe(ps(i=>{throw i instanceof gp?this.noMatchError(i):i}))}noMatchError(e){return new I(4002,pp)}createUrlTree(e,t,r){const i=Cw(e);return new ms(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(fe(s=>new ge([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return mt(i).pipe(fo(s=>{const o=r.children[s],a=GO(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(fe(u=>({segment:u,outlet:s})))}),dO((s,o)=>(s[o.outlet]=o.segment,s),{}),hO())}expandSegment(e,t,r,i,s,o){return mt(r).pipe(fo(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(ps(l=>{if(l instanceof gp)return Q(null);throw l}))),fs(a=>!!a),ps((a,u)=>{if(jw(a))return QO(t,i,s)?Q(new ge([],{})):Sc(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return KO(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):Sc(t):Sc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?XO(s):this.lineralizeSegments(r,s).pipe($t(o=>{const a=new ge(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:c}=Gw(t,i,s);if(!a)return Sc(t);const d=this.applyRedirectCommands(u,i.redirectTo,c);return i.redirectTo.startsWith("/")?XO(d):this.lineralizeSegments(i,d).pipe($t(h=>this.expandSegment(e,t,r,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=HO(r,e),r.loadChildren?(r._loadedRoutes?Q({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(fe(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new ge(i,{})))):Q(new ge(i,{}))):WO(t,r,i,e).pipe(ni(({matched:o,consumedSegments:a,remainingSegments:u})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe($t(c=>{const d=c.injector??e,h=c.routes,{segmentGroup:f,slicedSegments:p}=hp(t,a,u,h),g=new ge(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(fe(v=>new ge(a,v)));if(0===h.length&&0===p.length)return Q(new ge(a,{}));const m=_r(r)===s;return this.expandSegment(d,g,h,p,m?ue:s,!0).pipe(fe(b=>new ge(a.concat(b.segments),b.children)))})):Sc(t)))}getChildConfig(e,t,r){return t.children?Q({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Q({routes:t._loadedRoutes,injector:t._loadedInjector}):function BX(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Q(!0):Q(i.map(o=>{const a=lu(o,n);return gs(function DX(n){return n&&Cc(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(cu(),qO())}(e,t,r).pipe($t(i=>i?this.configLoader.loadChildren(e,t).pipe(qt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function qX(n){return hc(UO(pp,3))}())):Q({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Q(r);if(i.numberOfChildren>1||!i.children[ue])return e.redirectTo,hc(new I(4e3,pp));i=i.children[ue]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new ms(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Wt(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Wt(t.children,(a,u)=>{o[u]=this.createSegmentGroup(e,a,r,i)}),new ge(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new I(4001,pp);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class YX{}class ZX{constructor(e,t,r,i,s,o,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=hp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ue).pipe(fe(t=>{if(null===t)return null;const r=new up([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ue,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Bi(r,t),s=new LO(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=FO(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return mt(Object.keys(r.children)).pipe(fo(i=>{const s=r.children[i],o=GO(t,i);return this.processSegmentGroup(e,o,s,i)}),dO((i,s)=>i&&s?(i.push(...s),i):null),fc(i=>null!==i),Jf(null),hO(),fe(i=>{if(null===i)return null;const s=ZO(i);return function eJ(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return mt(t).pipe(fo(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),fs(o=>!!o),ps(o=>{if(jw(o))return QO(r,i,s)?Q([]):Q(null);throw o}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!KO(t,r,i,s))return Q(null);let o;if("**"===t.path){const a=i.length>0?gO(i).parameters:{},u=tF(r)+i.length;o=Q({snapshot:new up(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nF(t),_r(t),t.component??t._loadedComponent??null,t,eF(r),u,rF(t)),consumedSegments:[],remainingSegments:[]})}else o=WO(r,t,i,e).pipe(fe(({matched:a,consumedSegments:u,remainingSegments:l,parameters:c})=>{if(!a)return null;const d=tF(r)+u.length;return{snapshot:new up(u,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nF(t),_r(t),t.component??t._loadedComponent??null,t,eF(r),d,rF(t)),consumedSegments:u,remainingSegments:l}}));return o.pipe(ni(a=>{if(null===a)return Q(null);const{snapshot:u,consumedSegments:l,remainingSegments:c}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function tJ(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=hp(r,l,c,h.filter(m=>void 0===m.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(fe(m=>null===m?null:[new Bi(u,m)]));if(0===h.length&&0===p.length)return Q([new Bi(u,[])]);const g=_r(t)===s;return this.processSegment(d,h,f,p,g?ue:s).pipe(fe(m=>null===m?null:[new Bi(u,m)]))}))}}function nJ(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ZO(n){const e=[],t=new Set;for(const r of n){if(!nJ(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=ZO(r.children);e.push(new Bi(r.value,i))}return e.filter(r=>!t.has(r))}function eF(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function tF(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function nF(n){return n.data||{}}function rF(n){return n.resolve||{}}function iF(n){return"string"==typeof n.title||null===n.title}function zw(n){return ni(e=>{const t=n(e);return t?mt(t).pipe(fe(()=>e)):Q(e)})}const du=new $("ROUTES");let qw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=W(Pk)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=gs(t.loadComponent()).pipe(fe(oF),qt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Iw(()=>{this.componentLoaders.delete(t)})),i=new lO(r,()=>new tn).pipe(Ew());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(fe(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,l,c=!1;Array.isArray(a)?l=a:(u=a.create(t).injector,l=pO(u.get(du,[],X.Self|X.Optional)));return{routes:l.map($w),injector:u}}),Iw(()=>{this.childrenLoaders.delete(r)})),o=new lO(s,()=>new tn).pipe(Ew());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return gs(t()).pipe(fe(oF),$t(r=>r instanceof jR||Array.isArray(r)?Q(r):mt(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oF(n){return function cJ(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let yp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new tn,this.configLoader=W(qw),this.environmentInjector=W(Ai),this.urlSerializer=W(mc),this.rootContexts=W(bc),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new XY(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new YY(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ln({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:wc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(hs(r=>0!==r.id),fe(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),ni(r=>{let i=!1,s=!1;return Q(r).pipe(qt(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ni(o=>{const a=t.browserUrlTree.toString(),u=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!u&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const c="";return this.events.next(new ap(o.id,t.serializeUrl(r.rawUrl),c,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),qr}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return aF(o.source)&&(t.browserUrlTree=o.extractedUrl),Q(o).pipe(ni(c=>{const d=this.transitions?.getValue();return this.events.next(new xw(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),d!==this.transitions?.getValue()?qr:Promise.resolve(c)}),function QX(n,e,t,r){return ni(i=>function WX(n,e,t,r,i){return new KX(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(fe(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),qt(c=>{this.currentNavigation={...this.currentNavigation,finalUrl:c.urlAfterRedirects},r.urlAfterRedirects=c.urlAfterRedirects}),function iJ(n,e,t,r,i){return $t(s=>function JX(n,e,t,r,i,s,o="emptyOnly"){return new ZX(n,e,t,r,i,o,s).recognize().pipe(ni(a=>null===a?function XX(n){return new We(e=>e.error(n))}(new YX):Q(a)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(fe(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),qt(c=>{if(r.targetSnapshot=c.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!c.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl);t.setBrowserUrl(h,c)}t.browserUrlTree=c.urlAfterRedirects}const d=new zY(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:c,extractedUrl:d,source:h,restoredState:f,extras:p}=o,g=new xw(c,this.urlSerializer.serialize(d),h,f);this.events.next(g);const m=OO(d,this.rootComponentType).snapshot;return Q(r={...o,targetSnapshot:m,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const c="";return this.events.next(new ap(o.id,t.serializeUrl(r.extractedUrl),c,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),qr}}),qt(o=>{const a=new qY(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),fe(o=>r={...o,guards:wX(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function NX(n,e){return $t(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Q({...t,guardsResult:!0}):function RX(n,e,t,r){return mt(n).pipe($t(i=>function VX(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Q(s.map(a=>{const u=Ic(e)??i,l=lu(a,u);return gs(function AX(n){return n&&Cc(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):u.runInContext(()=>l(n,e,t,r))).pipe(fs())})).pipe(cu()):Q(!0)}(i.component,i.route,t,e,r)),fs(i=>!0!==i,!0))}(o,r,i,n).pipe($t(a=>a&&function TX(n){return"boolean"==typeof n}(a)?function kX(n,e,t,r){return mt(e).pipe(fo(i=>ww(function OX(n,e){return null!==n&&e&&e(new JY(n)),Q(!0)}(i.route.parent,r),function PX(n,e){return null!==n&&e&&e(new eX(n)),Q(!0)}(i.route,r),function LX(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function EX(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>uO(()=>Q(o.guards.map(u=>{const l=Ic(o.node)??t,c=lu(u,l);return gs(function SX(n){return n&&Cc(n.canActivateChild)}(c)?c.canActivateChild(r,n):l.runInContext(()=>c(r,n))).pipe(fs())})).pipe(cu())));return Q(s).pipe(cu())}(n,i.path,t),function FX(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Q(!0);const i=r.map(s=>uO(()=>{const o=Ic(e)??t,a=lu(s,o);return gs(function CX(n){return n&&Cc(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(fs())}));return Q(i).pipe(cu())}(n,i.route,t))),fs(i=>!0!==i,!0))}(r,s,n,e):Q(a)),fe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),qt(o=>{if(r.guardsResult=o.guardsResult,go(o.guardsResult))throw BO(0,o.guardsResult);const a=new WY(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),hs(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),zw(o=>{if(o.guards.canActivateChecks.length)return Q(o).pipe(qt(a=>{const u=new KY(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),ni(a=>{let u=!1;return Q(a).pipe(function sJ(n,e){return $t(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Q(t);let s=0;return mt(i).pipe(fo(o=>function oJ(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!iF(i)&&(s[pc]=i.title),function aJ(n,e,t,r){const i=function uJ(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Q({});const s={};return mt(i).pipe($t(o=>function lJ(n,e,t,r){const i=Ic(e)??r,s=lu(n,i);return gs(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(fs(),qt(a=>{s[o]=a}))),bw(1),function vY(n){return fe(()=>n)}(s),ps(o=>jw(o)?qr:hc(o)))}(s,n,e,r).pipe(fe(o=>(n._resolvedData=o,n.data=FO(n,t).resolve,i&&iF(i)&&(n.data[pc]=i.title),null)))}(o.route,r,n,e)),qt(()=>s++),bw(1),$t(o=>s===i.length?Q(t):qr))})}(t.paramsInheritanceStrategy,this.environmentInjector),qt({next:()=>u=!0,complete:()=>{u||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),qt(a=>{const u=new QY(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),zw(o=>{const a=u=>{const l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(qt(c=>{u.component=c}),fe(()=>{})));for(const c of u.children)l.push(...a(c));return l};return Xf(a(o.targetSnapshot.root)).pipe(Jf(),nu(1))}),zw(()=>this.afterPreactivation()),fe(o=>{const a=function lX(n,e,t){const r=Ec(n,e._root,t?t._root:void 0);return new PO(r,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),qt(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>fe(r=>(new vX(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),nu(1),qt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new mo(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Iw(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ps(o=>{if(s=!0,jO(o)){$O(o)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new op(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),$O(o)){const u=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),l={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||aF(r.source)};t.scheduleNavigation(u,wc,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new Nw(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(o))}catch(u){r.reject(u)}}return qr}))}))}cancelNavigationTransition(t,r,i){const s=new op(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aF(n){return n!==wc}let uF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ue);return r}getResolvedTitleForRoute(t){return t.data[pc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:function(){return W(dJ)},providedIn:"root"}),n})(),dJ=(()=>{class n extends uF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(P(ZP))},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:function(){return W(pJ)},providedIn:"root"}),n})();class fJ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let pJ=(()=>{class n extends fJ{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Gt(n)))(r||n)}}(),n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _p=new $("",{providedIn:"root",factory:()=>({})});let mJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:function(){return W(yJ)},providedIn:"root"}),n})(),yJ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _J(n){throw n}function vJ(n,e,t){return e.parse("/")}const wJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},EJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Un=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=W(Y7),this.isNgZoneEnabled=!1,this.options=W(_p,{optional:!0})||{},this.errorHandler=this.options.errorHandler||_J,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||vJ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=W(mJ),this.routeReuseStrategy=W(hJ),this.urlCreationStrategy=W(oX),this.titleStrategy=W(uF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=pO(W(du,{optional:!0})??[]),this.navigationTransitions=W(yp),this.urlSerializer=W(mc),this.location=W(Wv),this.isNgZoneEnabled=W(ke)instanceof ke&&ke.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ms,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=OO(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),wc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map($w),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let c=null;switch(a){case"merge":c={...this.currentUrlTree.queryParams,...s};break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=s||null}return null!==c&&(c=this.removeEmptyProps(c)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,c,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=go(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,wc,null,r)}navigate(t,r={skipLocationChange:!1}){return function bJ(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new I(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...wJ}:!1===r?{...EJ}:r,go(t))return yO(this.currentUrlTree,t,i);const s=this.parseUrl(t);return yO(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l,c;return o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,u=h}),c="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:c,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hu=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new tn;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof mo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=tu(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=tu(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=tu(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function y1(n,e,t){return function Jq(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?m1:D_}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(D(Un),D(uu),function $h(n){return function w3(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(ax(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Ht(),n)}("tabindex"),D(Mi),D(Jn),D(ho))},n.\u0275dir=ee({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&Re("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&Vn("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[hr]}),n})();class lF{}let DJ=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(hs(t=>t instanceof mo),fo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=bf(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return mt(i).pipe(ca())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Q(null);const s=i.pipe($t(o=>null===o?Q(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?mt([s,this.loader.loadComponent(r)]).pipe(ca()):s})}}return n.\u0275fac=function(t){return new(t||n)(P(Un),P(Pk),P(Ai),P(lF),P(qw))},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Kw=new $("");let cF=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof mo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof RO&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new RO(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function K1(){throw new Error("invalid")}()},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})();var er=(()=>((er=er||{})[er.COMPLETE=0]="COMPLETE",er[er.FAILED=1]="FAILED",er[er.REDIRECTING=2]="REDIRECTING",er))();const fu=!1;function ys(n,e){return{\u0275kind:n,\u0275providers:e}}const Qw=new $("",{providedIn:"root",factory:()=>!1});function hF(){const n=W(Tn);return e=>{const t=n.get(lo);if(e!==t.components[0])return;const r=n.get(Un),i=n.get(fF);1===n.get(Yw)&&r.initialNavigation(),n.get(pF,null,X.Optional)?.setUpPreloading(),n.get(Kw,null,X.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const fF=new $(fu?"bootstrap done indicator":"",{factory:()=>new tn}),Yw=new $(fu?"initial navigation":"",{providedIn:"root",factory:()=>1});function xJ(){let n=[];return n=fu?[{provide:Zh,multi:!0,useFactory:()=>{const e=W(Un);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function nX(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],ys(1,n)}const pF=new $(fu?"router preloader":"");function NJ(n){return ys(0,[{provide:pF,useExisting:DJ},{provide:lF,useExisting:n}])}const Ac=!1,gF=new $(Ac?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),RJ=[Wv,{provide:mc,useClass:Tw},Un,bc,{provide:uu,useFactory:function dF(n){return n.routerState.root},deps:[Un]},qw,Ac?{provide:Qw,useValue:!0}:[]];function kJ(){return new jk("Router",Un)}let mF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[RJ,Ac&&r?.enableTracing?xJ().\u0275providers:[],{provide:du,multi:!0,useValue:t},{provide:gF,useFactory:LJ,deps:[[Un,new In,new Pl]]},{provide:_p,useValue:r||{}},r?.useHash?{provide:ho,useClass:L8}:{provide:ho,useClass:dP},{provide:Kw,useFactory:()=>{const n=W(nQ),e=W(ke),t=W(_p),r=W(yp),i=W(mc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new cF(i,r,n,e,t)}},r?.preloadingStrategy?NJ(r.preloadingStrategy).\u0275providers:[],{provide:jk,multi:!0,useFactory:kJ},r?.initialNavigation?VJ(r):[],[{provide:yF,useFactory:hF},{provide:$k,multi:!0,useExisting:yF}]]}}static forChild(t){return{ngModule:n,providers:[{provide:du,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(P(gF,8))},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({imports:[Bw]}),n})();function LJ(n){if(Ac&&n)throw new I(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function VJ(n){return["disabled"===n.initialNavigation?ys(3,[{provide:Sf,multi:!0,useFactory:()=>{const e=W(Un);return()=>{e.setUpLocationChangeListener()}}},{provide:Yw,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ys(2,[{provide:Yw,useValue:0},{provide:Sf,multi:!0,deps:[Tn],useFactory:e=>{const t=e.get(O8,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Un),s=e.get(fF);(function CJ(n,e){n.events.pipe(hs(t=>t instanceof mo||t instanceof op||t instanceof Nw||t instanceof ap),fe(t=>t instanceof mo||t instanceof ap?er.COMPLETE:t instanceof op&&(0===t.code||1===t.code)?er.REDIRECTING:er.FAILED),hs(t=>t!==er.REDIRECTING),nu(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(yp).afterPreactivation=()=>(r(!0),s.closed?Q(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const yF=new $(Ac?"Router Initializer":"");function _F(n,e,t,r,i,s,o){try{var a=n[s](o),u=a.value}catch(l){return void t(l)}a.done?e(u):Promise.resolve(u).then(r,i)}function y(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(u){_F(s,r,i,o,a,"next",u)}function a(u){_F(s,r,i,o,a,"throw",u)}o(void 0)})}}const vF=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},Jw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0;let h=(15&a)<<2|l>>6,f=63&l;u||(f=64,o||(h=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vF(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==l||null==d)throw new HJ;r.push(s<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==d&&r.push(l<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HJ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pu=function(n){return function(n){const e=vF(n);return Jw.encodeByteArray(e,!0)}(n).replace(/\./g,"")},wp=()=>{try{return function qJ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&function(n){try{return Jw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},XJ=n=>{const e=(n=>{var e,t;return null===(t=null===(e=wp())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]},EF=()=>{var n;return null===(n=wp())||void 0===n?void 0:n.config};class Ep{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function Zw(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function _s(){try{return"object"==typeof indexedDB}catch{return!1}}function gu(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function eE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class nr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ur.prototype.create)}}class Ur{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function iZ(n,e){return n.replace(sZ,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new nr(i,`${this.serviceName}: ${o} (${i}).`,r)}}const sZ=/\{\$([^}]+)}/g;function tE(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(IF(s)&&IF(o)){if(!tE(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function IF(n){return null!==n&&"object"==typeof n}const lZ=1e3,cZ=2,dZ=144e5,hZ=.5;function iE(n,e=lZ,t=cZ){const r=e*Math.pow(t,n),i=Math.round(hZ*r*(Math.random()-.5)*2);return Math.min(dZ,r+i)}function Sn(n){return n&&n._delegate?n._delegate:n}class At{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const yo="[DEFAULT]";class pZ{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Ep;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function mZ(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:yo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return y(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=yo){return this.instances.has(e)}getOptions(e=yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===yo?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=yo){return this.component?this.component.multipleInstances?e:yo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class yZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pZ(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const sE=[];var _e=(()=>{return(n=_e||(_e={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",_e;var n})();const DF={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},_Z=_e.INFO,vZ={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},wZ=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=vZ[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class _o{constructor(e){this.name=e,this._logLevel=_Z,this._logHandler=wZ,this._userLogHandler=null,sE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?DF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const EZ=(n,e)=>e.some(t=>n instanceof t);let CF,SF;const AF=new WeakMap,oE=new WeakMap,MF=new WeakMap,aE=new WeakMap,uE=new WeakMap;let lE={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return oE.get(n);if("objectStoreNames"===e)return n.objectStoreNames||MF.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vs(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function AZ(n){return"function"==typeof n?function SZ(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function IZ(){return SF||(SF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(cE(this),e),vs(AF.get(this))}:function(...e){return vs(n.apply(cE(this),e))}:function(e,...t){const r=n.call(cE(this),e,...t);return MF.set(r,e.sort?e.sort():[e]),vs(r)}}(n):(n instanceof IDBTransaction&&function DZ(n){if(oE.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});oE.set(n,e)}(n),EZ(n,function bZ(){return CF||(CF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,lE):n)}function vs(n){if(n instanceof IDBRequest)return function TZ(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(vs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&AF.set(t,n)}).catch(()=>{}),uE.set(e,n),e}(n);if(aE.has(n))return aE.get(n);const e=AZ(n);return e!==n&&(aE.set(n,e),uE.set(e,n)),e}const cE=n=>uE.get(n);const MZ=["get","getKey","getAll","getAllKeys","count"],xZ=["put","add","delete","clear"],dE=new Map;function NF(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(dE.get(e))return dE.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=xZ.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!MZ.includes(t))return;const s=function(){var o=y(function*(a,...u){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(yield Promise.all([c[t](...u),i&&l.done]))[0]});return function(u){return o.apply(this,arguments)}}();return dE.set(e,s),s}!function CZ(n){lE=n(lE)}(n=>({...n,get:(e,t,r)=>NF(e,t)||n.get(e,t,r),has:(e,t)=>!!NF(e,t)||n.has(e,t)}));const vo=new _o("@firebase/app"),Ip="[DEFAULT]",iee={"@firebase/app":"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wo=new Map,Tp=new Map;function see(n,e){try{n.container.addComponent(e)}catch(t){vo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}const Ui=new Ur("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class aee{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new At("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}function PF(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Ip,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Ui.create("bad-app-name",{appName:String(i)});if(t||(t=EF()),!t)throw Ui.create("no-options");const s=wo.get(i);if(s){if(tE(t,s.options)&&tE(r,s.config))return s;throw Ui.create("duplicate-app",{appName:i})}const o=new yZ(i);for(const u of Tp.values())o.addComponent(u);const a=new aee(t,r,o);return wo.set(i,a),a}function OF(n=Ip){const e=wo.get(n);if(!e&&n===Ip&&EF())return PF();if(!e)throw Ui.create("no-app",{appName:n});return e}function FF(){return Array.from(wo.values())}function vr(n,e,t){var r;let i=null!==(r=iee[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void vo.warn(a.join(" "))}!function mu(n){const e=n.name;if(Tp.has(e))return vo.debug(`There were multiple attempts to register component ${e}.`),!1;Tp.set(e,n);for(const t of wo.values())see(t,n);return!0}(new At(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}class vee{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function wee(n){return"VERSION"===n.getComponent()?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const yE="@firebase/app",Eo=new _o("@firebase/app"),qee={[yE]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},bo=new Map,Sp=new Map;function Wee(n,e){try{n.container.addComponent(e)}catch(t){Eo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wr(n){const e=n.name;if(Sp.has(e))return Eo.debug(`There were multiple attempts to register component ${e}.`),!1;Sp.set(e,n);for(const t of bo.values())Wee(t,n);return!0}function _E(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const $i=new Ur("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});function Er(n,e,t){var r;let i=null!==(r=qee[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Eo.warn(a.join(" "))}wr(new At(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Jee="firebase-heartbeat-database",Zee=1,xc="firebase-heartbeat-store";let wE=null;function HF(){return wE||(wE=function xF(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=vs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(vs(o.result),u.oldVersion,u.newVersion,vs(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}(Jee,Zee,{upgrade:(n,e)=>{0===e&&n.createObjectStore(xc)}}).catch(n=>{throw $i.create("idb-open",{originalErrorMessage:n.message})})),wE}function EE(){return(EE=y(function*(n){try{return yield(yield HF()).transaction(xc).objectStore(xc).get(zF(n))}catch(e){if(e instanceof nr)Eo.warn(e.message);else{const t=$i.create("idb-get",{originalErrorMessage:e?.message});Eo.warn(t.message)}}})).apply(this,arguments)}function GF(n,e){return bE.apply(this,arguments)}function bE(){return(bE=y(function*(n,e){try{const r=(yield HF()).transaction(xc,"readwrite");yield r.objectStore(xc).put(e,zF(n)),yield r.done}catch(t){if(t instanceof nr)Eo.warn(t.message);else{const r=$i.create("idb-set",{originalErrorMessage:t?.message});Eo.warn(r.message)}}})).apply(this,arguments)}function zF(n){return`${n.name}!${n.options.appId}`}class rte{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ste(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return y(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qF();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return y(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=qF(),{heartbeatsToSend:r,unsentEntries:i}=function ite(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),WF(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),WF(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=pu(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function qF(){return(new Date).toISOString().substring(0,10)}class ste{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(function*(){return!!_s()&&gu().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return y(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function ete(n){return EE.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return y(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return GF(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return y(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return GF(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function WF(n){return pu(JSON.stringify({version:2,heartbeats:n})).length}!function ote(n){wr(new At("platform-logger",e=>new vee(e),"PRIVATE")),wr(new At("heartbeat",e=>new rte(e),"PRIVATE")),Er(yE,"0.9.15",n),Er(yE,"0.9.15","esm2017"),Er("fire-js","")}("");const ate=(n,e)=>e.some(t=>n instanceof t);let KF,QF;const YF=new WeakMap,IE=new WeakMap,XF=new WeakMap,TE=new WeakMap,DE=new WeakMap;let CE={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return IE.get(n);if("objectStoreNames"===e)return n.objectStoreNames||XF.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function pte(n){return"function"==typeof n?function fte(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function lte(){return QF||(QF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(SE(this),e),ws(YF.get(this))}:function(...e){return ws(n.apply(SE(this),e))}:function(e,...t){const r=n.call(SE(this),e,...t);return XF.set(r,e.sort?e.sort():[e]),ws(r)}}(n):(n instanceof IDBTransaction&&function dte(n){if(IE.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});IE.set(n,e)}(n),ate(n,function ute(){return KF||(KF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,CE):n)}function ws(n){if(n instanceof IDBRequest)return function cte(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ws(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&YF.set(t,n)}).catch(()=>{}),DE.set(e,n),e}(n);if(TE.has(n))return TE.get(n);const e=pte(n);return e!==n&&(TE.set(n,e),DE.set(e,n)),e}const SE=n=>DE.get(n),mte=["get","getKey","getAll","getAllKeys","count"],yte=["put","add","delete","clear"],AE=new Map;function JF(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(AE.get(e))return AE.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=yte.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!mte.includes(t))return;const s=function(){var o=y(function*(a,...u){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(yield Promise.all([c[t](...u),i&&l.done]))[0]});return function(u){return o.apply(this,arguments)}}();return AE.set(e,s),s}!function hte(n){CE=n(CE)}(n=>({...n,get:(e,t,r)=>JF(e,t)||n.get(e,t,r),has:(e,t)=>!!JF(e,t)||n.has(e,t)}));const ZF="@firebase/installations",ME="0.6.4",eL=1e4,tL=`w:${ME}`,nL="FIS_v2",_te="https://firebaseinstallations.googleapis.com/v1",vte=36e5,ji=new Ur("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rL(n){return n instanceof nr&&n.code.includes("request-failed")}function xE({projectId:n}){return`${_te}/projects/${n}/installations`}function iL(n){return{token:n.token,requestStatus:2,expiresIn:Ite(n.expiresIn),creationTime:Date.now()}}function NE(n,e){return RE.apply(this,arguments)}function RE(){return(RE=y(function*(n,e){const r=(yield e.json()).error;return ji.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function sL({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function kE(n){return PE.apply(this,arguments)}function PE(){return(PE=y(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Ite(n){return Number(n.replace("s","000"))}function OE(){return(OE=y(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=xE(n),i=sL(n),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:nL,appId:n.appId,sdkVersion:tL})},u=yield kE(()=>fetch(r,a));if(u.ok){const l=yield u.json();return{fid:l.fid||t,registrationStatus:2,refreshToken:l.refreshToken,authToken:iL(l.authToken)}}throw yield NE("Create Installation",u)})).apply(this,arguments)}function aL(n){return new Promise(e=>{setTimeout(e,n)})}const Ste=/^[cdef][\w-]{21}$/,FE="";function Ate(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Mte(n){return function Cte(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Ste.test(t)?t:FE}catch{return FE}}function yu(n){return`${n.appName}!${n.appId}`}const _u=new Map;function uL(n,e){const t=yu(n);lL(t,e),function Rte(n,e){const t=function cL(){return!Io&&"BroadcastChannel"in self&&(Io=new BroadcastChannel("[Firebase] FID Change"),Io.onmessage=n=>{lL(n.data.key,n.data.fid)}),Io}();t&&t.postMessage({key:n,fid:e}),function dL(){0===_u.size&&Io&&(Io.close(),Io=null)}()}(t,e)}function lL(n,e){const t=_u.get(n);if(t)for(const r of t)r(e)}let Io=null;const kte="firebase-installations-database",Pte=1,To="firebase-installations-store";let LE=null;function VE(){return LE||(LE=function gte(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=ws(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ws(o.result),u.oldVersion,u.newVersion,ws(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}(kte,Pte,{upgrade:(n,e)=>{0===e&&n.createObjectStore(To)}})),LE}function Ap(n,e){return BE.apply(this,arguments)}function BE(){return(BE=y(function*(n,e){const t=yu(n),i=(yield VE()).transaction(To,"readwrite"),s=i.objectStore(To),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&uL(n,e.fid),e})).apply(this,arguments)}function UE(n){return $E.apply(this,arguments)}function $E(){return($E=y(function*(n){const e=yu(n),r=(yield VE()).transaction(To,"readwrite");yield r.objectStore(To).delete(e),yield r.done})).apply(this,arguments)}function Nc(n,e){return jE.apply(this,arguments)}function jE(){return(jE=y(function*(n,e){const t=yu(n),i=(yield VE()).transaction(To,"readwrite"),s=i.objectStore(To),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&uL(n,a.fid),a})).apply(this,arguments)}function HE(n){return GE.apply(this,arguments)}function GE(){return GE=y(function*(n){let e;const t=yield Nc(n.appConfig,r=>{const i=function Ote(n){return fL(n||{fid:Ate(),registrationStatus:0})}(r),s=function Fte(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ji.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Lte(n,e){return zE.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Vte(n)}:{installationEntry:e}}(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===FE?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),GE.apply(this,arguments)}function zE(){return zE=y(function*(n,e){try{const t=yield function Dte(n,e){return OE.apply(this,arguments)}(n,e);return Ap(n.appConfig,t)}catch(t){throw rL(t)&&409===t.customData.serverCode?yield UE(n.appConfig):yield Ap(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),zE.apply(this,arguments)}function Vte(n){return qE.apply(this,arguments)}function qE(){return(qE=y(function*(n){let e=yield hL(n.appConfig);for(;1===e.registrationStatus;)yield aL(100),e=yield hL(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield HE(n);return r||t}return e})).apply(this,arguments)}function hL(n){return Nc(n,e=>{if(!e)throw ji.create("installation-not-found");return fL(e)})}function fL(n){return function Bte(n){return 1===n.registrationStatus&&n.registrationTime+eL<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function WE(){return(WE=y(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function $te(n,{fid:e}){return`${xE(n)}/${e}/authTokens:generate`}(n,t),i=function oL(n,{refreshToken:e}){const t=sL(n);return t.append("Authorization",function Tte(n){return`${nL} ${n}`}(e)),t}(n,t),s=e.getImmediate({optional:!0});if(s){const l=yield s.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:tL,appId:n.appId}})},u=yield kE(()=>fetch(r,a));if(u.ok)return iL(yield u.json());throw yield NE("Generate Auth Token",u)})).apply(this,arguments)}function KE(n){return QE.apply(this,arguments)}function QE(){return QE=y(function*(n,e=!1){let t;const r=yield Nc(n.appConfig,s=>{if(!gL(s))throw ji.create("not-registered");const o=s.authToken;if(!e&&function Gte(n){return 2===n.requestStatus&&!function zte(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+vte}(n)}(o))return s;if(1===o.requestStatus)return t=function jte(n,e){return YE.apply(this,arguments)}(n,e),s;{if(!navigator.onLine)throw ji.create("app-offline");const a=function qte(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(s);return t=function Hte(n,e){return XE.apply(this,arguments)}(n,a),a}});return t?yield t:r.authToken}),QE.apply(this,arguments)}function YE(){return(YE=y(function*(n,e){let t=yield pL(n.appConfig);for(;1===t.authToken.requestStatus;)yield aL(100),t=yield pL(n.appConfig);const r=t.authToken;return 0===r.requestStatus?KE(n,e):r})).apply(this,arguments)}function pL(n){return Nc(n,e=>{if(!gL(e))throw ji.create("not-registered");return function Wte(n){return 1===n.requestStatus&&n.requestTime+eL<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function XE(){return XE=y(function*(n,e){try{const t=yield function Ute(n,e){return WE.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Ap(n.appConfig,r),t}catch(t){if(!rL(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Ap(n.appConfig,r)}else yield UE(n.appConfig);throw t}}),XE.apply(this,arguments)}function gL(n){return void 0!==n&&2===n.registrationStatus}function JE(){return(JE=y(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield HE(e);return r?r.catch(console.error):KE(e).catch(console.error),t.fid})).apply(this,arguments)}function ZE(){return ZE=y(function*(n,e=!1){const t=n;return yield function Yte(n){return eb.apply(this,arguments)}(t),(yield KE(t,e)).token}),ZE.apply(this,arguments)}function eb(){return(eb=y(function*(n){const{registrationPromise:e}=yield HE(n);e&&(yield e)})).apply(this,arguments)}function rb(n){return ji.create("missing-app-config-values",{valueName:n})}const mL="installations",tne=n=>{const e=n.getProvider("app").getImmediate(),t=function Zte(n){if(!n||!n.options)throw rb("App Configuration");if(!n.name)throw rb("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw rb(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:_E(e,"heartbeat"),_delete:()=>Promise.resolve()}},nne=n=>{const t=_E(n.getProvider("app").getImmediate(),mL).getImmediate();return{getId:()=>function Kte(n){return JE.apply(this,arguments)}(t),getToken:i=>function Qte(n){return ZE.apply(this,arguments)}(t,i)}};(function rne(){wr(new At(mL,tne,"PUBLIC")),wr(new At("installations-internal",nne,"PRIVATE"))})(),Er(ZF,ME),Er(ZF,ME,"esm2017");const ib="@firebase/remote-config",$n=new Ur("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pne{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return y(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function gne(n=navigator){return n.languages&&n.languages[0]||n.language}class mne{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return y(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:gne()},l={method:"POST",headers:a,body:JSON.stringify(u)},c=fetch(o,l),d=new Promise((_,b)=>{e.signal.addEventListener(()=>{const v=new Error("The operation was aborted.");v.name="AbortError",b(v)})});let h;try{yield Promise.race([c,d]),h=yield c}catch(_){let b="fetch-client-network";throw"AbortError"===_?.name&&(b="fetch-timeout"),$n.create(b,{originalErrorMessage:_?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,m;if(200===h.status){let _;try{_=yield h.json()}catch(b){throw $n.create("fetch-client-parse",{originalErrorMessage:b?.message})}g=_.entries,m=_.state}if("INSTANCE_STATE_UNSPECIFIED"===m?f=500:"NO_CHANGE"===m?f=304:("NO_TEMPLATE"===m||"EMPTY_CONFIG"===m)&&(g={}),304!==f&&200!==f)throw $n.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class vne{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return y(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return y(function*(){yield function yne(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r($n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function _ne(n){if(!(n instanceof nr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+iE(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class bne{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xp(n,e){const t=n.target.error||void 0;return $n.create(e,{originalErrorMessage:t&&t?.message})}const Do="app_namespace_store";class Cne{constructor(e,t,r,i=function Dne(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(xp(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Do,{keyPath:"compositeKey"})}}catch(t){e($n.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return y(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Do],"readonly").objectStore(Do),u=t.createCompositeKey(e);try{const l=a.get(u);l.onerror=c=>{s(xp(c,"storage-get"))},l.onsuccess=c=>{const d=c.target.result;i(d?d.value:void 0)}}catch(l){s($n.create("storage-get",{originalErrorMessage:l?.message}))}})})()}set(e,t){var r=this;return y(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([Do],"readwrite").objectStore(Do),l=r.createCompositeKey(e);try{const c=u.put({compositeKey:l,value:t});c.onerror=d=>{o(xp(d,"storage-set"))},c.onsuccess=()=>{s()}}catch(c){o($n.create("storage-set",{originalErrorMessage:c?.message}))}})})()}delete(e){var t=this;return y(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Do],"readwrite").objectStore(Do),u=t.createCompositeKey(e);try{const l=a.delete(u);l.onerror=c=>{s(xp(c,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){s($n.create("storage-delete",{originalErrorMessage:l?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Sne{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return y(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Mne(){return lb.apply(this,arguments)}function lb(){return(lb=y(function*(){if(!_s())return!1;try{return yield gu()}catch{return!1}})).apply(this,arguments)}!function Ane(){wr(new At("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $n.create("registration-window");if(!_s())throw $n.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw $n.create("registration-project-id");if(!o)throw $n.create("registration-api-key");if(!a)throw $n.create("registration-app-id");const u=new Cne(a,r.name,t=t||"firebase"),l=new Sne(u),c=new _o(ib);c.logLevel=_e.ERROR;const d=new mne(i,"10.1.0",t,s,o,a),h=new vne(d,u),f=new pne(h,u,l,c),p=new bne(r,f,l,u,c);return function dne(n){const e=Sn(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Er(ib,"0.4.4"),Er(ib,"0.4.4","esm2017")}();const xne=(n,e)=>e.some(t=>n instanceof t);let wL,EL;const bL=new WeakMap,cb=new WeakMap,IL=new WeakMap,db=new WeakMap,hb=new WeakMap;let fb={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return cb.get(n);if("objectStoreNames"===e)return n.objectStoreNames||IL.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hi(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Lne(n){return"function"==typeof n?function Fne(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Rne(){return EL||(EL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(pb(this),e),Hi(bL.get(this))}:function(...e){return Hi(n.apply(pb(this),e))}:function(e,...t){const r=n.call(pb(this),e,...t);return IL.set(r,e.sort?e.sort():[e]),Hi(r)}}(n):(n instanceof IDBTransaction&&function Pne(n){if(cb.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});cb.set(n,e)}(n),xne(n,function Nne(){return wL||(wL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,fb):n)}function Hi(n){if(n instanceof IDBRequest)return function kne(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Hi(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&bL.set(t,n)}).catch(()=>{}),hb.set(e,n),e}(n);if(db.has(n))return db.get(n);const e=Lne(n);return e!==n&&(db.set(n,e),hb.set(e,n)),e}const pb=n=>hb.get(n);function TL(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Hi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Hi(o.result),u.oldVersion,u.newVersion,Hi(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function gb(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Hi(t).then(()=>{})}const Vne=["get","getKey","getAll","getAllKeys","count"],Bne=["put","add","delete","clear"],mb=new Map;function DL(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(mb.get(e))return mb.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Bne.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Vne.includes(t))return;const s=function(){var o=y(function*(a,...u){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(u.shift())),(yield Promise.all([c[t](...u),i&&l.done]))[0]});return function(u){return o.apply(this,arguments)}}();return mb.set(e,s),s}!function One(n){fb=n(fb)}(n=>({...n,get:(e,t,r)=>DL(e,t)||n.get(e,t,r),has:(e,t)=>!!DL(e,t)||n.has(e,t)}));const Une="/firebase-messaging-sw.js",$ne="/firebase-cloud-messaging-push-scope",CL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",jne="https://fcmregistrations.googleapis.com/v1",SL="google.c.a.c_id",Hne="google.c.a.c_l",Gne="google.c.a.ts",zne="google.c.a.e";var vu=(()=>{return(n=vu||(vu={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",vu;var n})();function Gi(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qne(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const yb="fcm_token_details_db",Wne=5,AL="fcm_token_object_Store";function _b(){return _b=y(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(yb))return null;let e=null;return(yield TL(yb,Wne,{upgrade:(r=y(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(AL))return;const l=a.objectStore(AL),c=yield l.index("fcmSenderId").get(n);if(yield l.clear(),c)if(2===s){const d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Gi(d.vapidKey)}}}else if(3===s){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Gi(d.auth),p256dh:Gi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Gi(d.vapidKey)}}}else if(4===s){const d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Gi(d.auth),p256dh:Gi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Gi(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield gb(yb),yield gb("fcm_vapid_details_db"),yield gb("undefined"),function Qne(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),_b.apply(this,arguments)}const Yne="firebase-messaging-database",Xne=1,Co="firebase-messaging-store";let vb=null;function wb(){return vb||(vb=TL(Yne,Xne,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Co)}})),vb}function ML(n){return Eb.apply(this,arguments)}function Eb(){return Eb=y(function*(n){const e=Db(n),r=yield(yield wb()).transaction(Co).objectStore(Co).get(e);if(r)return r;{const i=yield function Kne(n){return _b.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield bb(n,i),i}}),Eb.apply(this,arguments)}function bb(n,e){return Ib.apply(this,arguments)}function Ib(){return(Ib=y(function*(n,e){const t=Db(n),i=(yield wb()).transaction(Co,"readwrite");return yield i.objectStore(Co).put(e,t),yield i.done,e})).apply(this,arguments)}function Tb(){return(Tb=y(function*(n){const e=Db(n),r=(yield wb()).transaction(Co,"readwrite");yield r.objectStore(Co).delete(e),yield r.done})).apply(this,arguments)}function Db({appConfig:n}){return n.appId}const Kt=new Ur("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ere(n,e){return Cb.apply(this,arguments)}function Cb(){return(Cb=y(function*(n,e){const t=yield xb(n),r=NL(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(Mb(n.appConfig),i)).json()}catch(o){throw Kt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Kt.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Kt.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function Sb(){return(Sb=y(function*(n,e){const t=yield xb(n),r=NL(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${Mb(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw Kt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Kt.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Kt.create("token-update-no-token");return s.token})).apply(this,arguments)}function xL(n,e){return Ab.apply(this,arguments)}function Ab(){return(Ab=y(function*(n,e){const r={method:"DELETE",headers:yield xb(n)};try{const s=yield(yield fetch(`${Mb(n.appConfig)}/${e}`,r)).json();if(s.error)throw Kt.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Kt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function Mb({projectId:n}){return`${jne}/projects/${n}/registrations`}function xb(n){return Nb.apply(this,arguments)}function Nb(){return(Nb=y(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function NL({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==CL&&(i.web.applicationPubKey=r),i}const nre=6048e5;function Rb(){return Rb=y(function*(n){const e=yield function sre(n,e){return Fb.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Gi(e.getKey("auth")),p256dh:Gi(e.getKey("p256dh"))},r=yield ML(n.firebaseDependencies);if(r){if(function ore(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+nre?function ire(n,e){return Pb.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield xL(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return kL(n.firebaseDependencies,t)}return kL(n.firebaseDependencies,t)}),Rb.apply(this,arguments)}function kb(){return kb=y(function*(n){const e=yield ML(n.firebaseDependencies);e&&(yield xL(n.firebaseDependencies,e.token),yield function Jne(n){return Tb.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),kb.apply(this,arguments)}function Pb(){return Pb=y(function*(n,e){try{const t=yield function tre(n,e){return Sb.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield bb(n.firebaseDependencies,r),t}catch(t){throw yield function RL(n){return kb.apply(this,arguments)}(n),t}}),Pb.apply(this,arguments)}function kL(n,e){return Ob.apply(this,arguments)}function Ob(){return(Ob=y(function*(n,e){const r={token:yield ere(n,e),createTime:Date.now(),subscriptionOptions:e};return yield bb(n,r),r.token})).apply(this,arguments)}function Fb(){return(Fb=y(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qne(e)})})).apply(this,arguments)}function PL(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function are(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function ure(n,e){e.data&&(n.data=e.data)}(e,n),function lre(n,e){var t,r,i,s,o;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(n.fcmOptions.analyticsLabel=u)}(e,n),e}function OL(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function Lb(n){return Kt.create("missing-app-config-values",{valueName:n})}OL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),OL("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hre{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function dre(n){if(!n||!n.options)throw Lb("App Configuration Object");if(!n.name)throw Lb("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw Lb(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function FL(n){return Vb.apply(this,arguments)}function Vb(){return(Vb=y(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(Une,{scope:$ne}),n.swRegistration.update().catch(()=>{})}catch(e){throw Kt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function Bb(){return(Bb=y(function*(n,e){if(!e&&!n.swRegistration&&(yield FL(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Kt.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function Ub(){return(Ub=y(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=CL)})).apply(this,arguments)}function $b(){return $b=y(function*(n,e){if(!navigator)throw Kt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Kt.create("permission-blocked");return yield function pre(n,e){return Ub.apply(this,arguments)}(n,e?.vapidKey),yield function fre(n,e){return Bb.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function rre(n){return Rb.apply(this,arguments)}(n)}),$b.apply(this,arguments)}function jb(){return(jb=y(function*(n,e,t){const r=function mre(n){switch(n){case vu.NOTIFICATION_CLICKED:return"notification_open";case vu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[SL],message_name:t[Hne],message_time:t[Gne],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Hb(){return Hb=y(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===vu.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(PL(t)):n.onMessageHandler.next(PL(t)));const r=t.data;(function cre(n){return"object"==typeof n&&!!n&&SL in n})(r)&&"1"===r[zne]&&(yield function gre(n,e,t){return jb.apply(this,arguments)}(n,t.messageType,r))}),Hb.apply(this,arguments)}const VL="@firebase/messaging",_re=n=>{const e=new hre(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function yre(n,e){return Hb.apply(this,arguments)}(e,t)),e},vre=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function LL(n,e){return $b.apply(this,arguments)}(e,r)}};function UL(){return Gb.apply(this,arguments)}function Gb(){return(Gb=y(function*(){try{yield gu()}catch{return!1}return typeof window<"u"&&_s()&&eE()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wre(){wr(new At("messaging",_re,"PUBLIC")),wr(new At("messaging-internal",vre,"PRIVATE")),Er(VL,"0.12.4"),Er(VL,"0.12.4","esm2017")}();const Np="analytics",Ire="firebase_id",Tre="origin",Dre=6e4,Cre="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wb="https://www.googletagmanager.com/gtag/js",kt=new _o("@firebase/analytics"),An=new Ur("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Are(n){if(!n.startsWith(Wb)){const e=An.create("invalid-gtag-resource",{gtagURL:n});return kt.warn(e.message),""}return n}function $L(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Kb(){return(Kb=y(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield $L(t)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){kt.error(a)}n("config",i,s)})).apply(this,arguments)}function Qb(){return(Qb=y(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield $L(t);for(const u of o){const l=a.find(d=>d.measurementId===u),c=l&&e[l.appId];if(!c){s=[];break}s.push(c)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){kt.error(s)}})).apply(this,arguments)}const Lre=30,jL=new class Bre{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Ure(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Yb(){return(Yb=y(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Ure(r)},s=Cre.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw An.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function Xb(){return(Xb=y(function*(n,e=jL,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw An.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw An.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new zre;return setTimeout(y(function*(){a.abort()}),void 0!==t?t:Dre),HL({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function HL(n,e,t){return Jb.apply(this,arguments)}function Jb(){return Jb=y(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=jL){var s;const{appId:o,measurementId:a}=n;try{yield function Hre(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(An.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(u){if(a)return kt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield function $re(n){return Yb.apply(this,arguments)}(n);return i.deleteThrottleMetadata(o),u}catch(u){const l=u;if(!function Gre(n){if(!(n instanceof nr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l)){if(i.deleteThrottleMetadata(o),a)return kt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:a};throw u}const c=503===Number(null===(s=l?.customData)||void 0===s?void 0:s.httpStatus)?iE(t,i.intervalMillis,Lre):iE(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+c,backoffCount:t+1};return i.setThrottleMetadata(o,d),kt.debug(`Calling attemptFetch again in ${c} millis`),HL(n,d,r,i)}}),Jb.apply(this,arguments)}class zre{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Zb,oI;function eI(){return(eI=y(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function aI(){return(aI=y(function*(){if(!_s())return kt.warn(An.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield gu()}catch(n){return kt.warn(An.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function uI(){return uI=y(function*(n,e,t,r,i,s,o){var a;const u=function jre(n){return Xb.apply(this,arguments)}(n);u.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&kt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>kt.error(f)),e.push(u);const l=function Jre(){return aI.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[c,d]=yield Promise.all([u,l]);(function Fre(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Wb)&&t.src.includes(n))return t;return null})(s)||function xre(n,e){const t=function Mre(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:Are}),r=document.createElement("script"),i=`${Wb}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,c.measurementId),oI&&(i("consent","default",oI),function GL(n){oI=n}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[Tre]="firebase",h.update=!0,null!=d&&(h[Ire]=d),i("config",c.measurementId,h),Zb&&(i("set",Zb),function zL(n){Zb=n}(void 0)),c.measurementId}),uI.apply(this,arguments)}class eie{constructor(e){this.app=e}_delete(){return delete si[this.app.options.appId],Promise.resolve()}}let si={},qL=[];const WL={};let QL,oi,Rp="dataLayer",KL="gtag",lI=!1;function nie(n,e,t){!function tie(){const n=[];if(Zw()&&n.push("This is a browser extension environment."),eE()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=An.create("invalid-analytics-context",{errorInfo:e});kt.warn(t.message)}}();const r=n.options.appId;if(!r)throw An.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw An.create("no-api-key");kt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=si[r])throw An.create("already-exists",{id:r});if(!lI){!function Nre(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Rp);const{wrappedGtag:s,gtagCore:o}=function Ore(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function Pre(n,e,t,r){function s(){return s=y(function*(o,...a){try{if("event"===o){const[u,l]=a;yield function kre(n,e,t,r,i){return Qb.apply(this,arguments)}(n,e,t,u,l)}else if("config"===o){const[u,l]=a;yield function Rre(n,e,t,r,i,s){return Kb.apply(this,arguments)}(n,e,t,r,u,l)}else if("consent"===o){const[u]=a;n("consent","update",u)}else if("get"===o){const[u,l,c]=a;n("get",u,l,c)}else if("set"===o){const[u]=a;n("set",u)}else n(o,...a)}catch(u){kt.error(u)}}),s.apply(this,arguments)}return function i(o){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(si,qL,WL,Rp,KL);oi=s,QL=o,lI=!0}return si[r]=function Zre(n,e,t,r,i,s,o){return uI.apply(this,arguments)}(n,qL,WL,e,QL,Rp,t),new eie(n)}function iie(){return cI.apply(this,arguments)}function cI(){return(cI=y(function*(){if(Zw()||!eE()||!_s())return!1;try{return yield gu()}catch{return!1}})).apply(this,arguments)}const YL="@firebase/analytics";!function oie(){wr(new At(Np,(e,{options:t})=>nie(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),wr(new At("analytics-internal",function n(e){try{const t=e.getProvider(Np).getImmediate();return{logEvent:(r,i,s)=>function sie(n,e,t,r){n=Sn(n),function qre(n,e,t,r,i){return eI.apply(this,arguments)}(oi,si[n.app.options.appId],e,t,r).catch(i=>kt.error(i))}(t,r,i,s)}}catch(t){throw An.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Er(YL,"0.10.0"),Er(YL,"0.10.0","esm2017")}();class aie extends zn{constructor(e,t){super()}schedule(e,t=0){return this}}const kp={setInterval(n,e,...t){const{delegate:r}=kp;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=kp;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class JL extends aie{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return kp.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&kp.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,la(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const ZL={now:()=>(ZL.delegate||Date).now(),delegate:void 0};class Rc{constructor(e,t=Rc.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Rc.now=ZL.now;class e2 extends Rc{constructor(e,t=Rc.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const cie=new class lie extends e2{}(class uie extends JL{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),die=new e2(JL),hI=new Ra("7.6.1"),fI="__angularfire_symbol__analyticsIsSupportedValue",pI="__angularfire_symbol__analyticsIsSupported",gI="__angularfire_symbol__remoteConfigIsSupportedValue",mI="__angularfire_symbol__remoteConfigIsSupported",yI="__angularfire_symbol__messagingIsSupportedValue",_I="__angularfire_symbol__messagingIsSupported";globalThis[pI]||(globalThis[pI]=iie().then(n=>globalThis[fI]=n).catch(()=>globalThis[fI]=!1)),globalThis[_I]||(globalThis[_I]=UL().then(n=>globalThis[yI]=n).catch(()=>globalThis[yI]=!1)),globalThis[mI]||(globalThis[mI]=Mne().then(n=>globalThis[gI]=n).catch(()=>globalThis[gI]=!1));const EI=(n,e)=>{const t=e?[e]:FF(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function wu(){}class t2{constructor(e,t=cie){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class hie{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wu,{},wu,wu)),t.pipe(qt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let n2=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new t2(Zone.current)),this.insideAngular=t.run(()=>new t2(Zone.current,die)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(P(ke))},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function So(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Ao(n){return So().ngZone.run(()=>n())}function pie(n){return So(),function gie(n){return function(t){return(t=t.lift(new hie(n.ngZone))).pipe(mh(n.outsideAngular),gh(n.insideAngular))}}(So())(n)}const mie=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Ao(()=>n.apply(void 0,r))},Mo=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=Ao(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wu,{},wu,wu)))),r[s]=mie(r[s],t));const i=function fie(n){return So().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof We){const s=So();return i.pipe(mh(s.outsideAngular),gh(s.insideAngular))}return Ao(()=>i)}return i instanceof We?i.pipe(pie):i instanceof Promise?Ao(()=>new Promise((s,o)=>i.then(a=>Ao(()=>s(a)),a=>Ao(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Ao(()=>i)};class Eu{constructor(e){return e}}class r2{constructor(){return FF()}}const bI=new $("angularfire2._apps"),_ie={provide:Eu,useFactory:function yie(n){return n&&1===n.length?n[0]:new Eu(OF())},deps:[[new In,bI]]},vie={provide:r2,deps:[[new In,bI]]};function wie(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Eu(r)}}let Eie=(()=>{class n{constructor(t){vr("angularfire",hI.full,"core"),vr("angularfire",hI.full,"app"),vr("angular",M1.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(P(Mf))},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({providers:[_ie,vie]}),n})();function bie(n,...e){return{ngModule:Eie,providers:[{provide:bI,useFactory:wie(n),multi:!0,deps:[ke,Tn,n2,...e]}]}}const Iie=Mo(PF,!0);class cV{constructor(){return EI("auth")}}const xD=new Map,dV={activated:!1,tokenObservers:[]},eae={initialized:!1,enabled:!1};function ot(n){return xD.get(n)||Object.assign({},dV)}function Xp(){return eae}const ND="https://content-firebaseappcheck.googleapis.com/v1",iae="exchangeDebugToken",hV={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class oae{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return y(function*(){t.stop();try{t.pending=new Ep,yield function aae(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ep,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Qt=new Ur("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function RD(n){if(!ot(n).activated)throw Qt.create("use-before-activation",{appName:n.name})}function eg(n,e){return PD.apply(this,arguments)}function PD(){return(PD=y(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(d){throw Qt.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw Qt.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw Qt.create("fetch-parse-error",{originalErrorMessage:d?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Qt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(u[1]),c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}})).apply(this,arguments)}function fV(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${ND}/projects/${t}/apps/${r}:${iae}?key=${i}`,body:{debug_token:e}}}const dae="firebase-app-check-database",hae=1,Hc="firebase-app-check-store";let tg=null;function mV(n,e){return OD.apply(this,arguments)}function OD(){return(OD=y(function*(n,e){const r=(yield function gV(){return tg||(tg=new Promise((n,e)=>{try{const t=indexedDB.open(dae,hae);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Qt.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Hc,{keyPath:"compositeKey"})}}catch(t){e(Qt.create("storage-open",{originalErrorMessage:t?.message}))}}),tg)}()).transaction(Hc,"readwrite"),s=r.objectStore(Hc).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Qt.create("storage-set",{originalErrorMessage:null===(l=u.target.error)||void 0===l?void 0:l.message}))}})})).apply(this,arguments)}const Gc=new _o("@firebase/app-check");function VD(n,e){return _s()?function pae(n,e){return mV(function _V(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Gc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function UD(){return Xp().enabled}function $D(){return jD.apply(this,arguments)}function jD(){return(jD=y(function*(){const n=Xp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const wae={error:"UNKNOWN_ERROR"};function Eae(n){return Jw.encodeString(JSON.stringify(n),!1)}function ng(n){return HD.apply(this,arguments)}function HD(){return(HD=y(function*(n,e=!1){const t=n.app;RD(t);const r=ot(t);let s,i=r.token;if(i&&!Du(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(Du(u)?i=u:yield VD(t,void 0))}if(!e&&i&&Du(i))return{token:i.token};let a,o=!1;if(UD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=eg(fV(t,yield $D()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield VD(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield ot(t).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?Gc.warn(u.message):Gc.error(u),s=u}return i?s?a=Du(i)?{token:i.token,internalError:s}:bV(s):(a={token:i.token},r.token=i,yield VD(t,i)):a=bV(s),o&&function EV(n,e){const t=ot(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,a),a})).apply(this,arguments)}function vV(n){return GD.apply(this,arguments)}function GD(){return(GD=y(function*(n){const e=n.app;RD(e);const{provider:t}=ot(e);if(UD()){const r=yield $D(),{token:i}=yield eg(fV(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function qD(n,e){const t=ot(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function wV(n){const{app:e}=n,t=ot(e);let r=t.tokenRefresher;r||(r=function bae(n){const{app:e}=n;return new oae(y(function*(){let r;if(r=ot(e).token?yield ng(n,!0):yield ng(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ot(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},hV.RETRIAL_MIN_WAIT,hV.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Du(n){return n.expireTimeMillis-Date.now()>0}function bV(n){return{token:Eae(wae),error:n}}class Iae{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ot(this.app);for(const t of e)qD(this.app,t.next);return Promise.resolve()}}const xV="app-check-internal";!function Lae(){wr(new At("app-check",n=>function Tae(n,e){return new Iae(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xV).initialize()})),wr(new At(xV,n=>function Dae(n){return{getToken:e=>ng(n,e),getLimitedUseToken:()=>vV(n),addTokenListener:e=>function zD(n,e,t,r){const{app:i}=n,s=ot(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Du(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),wV(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>wV(n))}(n,"INTERNAL",e),removeTokenListener:e=>qD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Er("@firebase/app-check","0.8.0")}();class RV{constructor(){return EI("app-check")}}typeof window<"u"&&window;var R,jae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$r={},XD=XD||{},re=jae||self;function ig(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function zc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var JD="closure_uid_"+(1e9*Math.random()>>>0),Gae=0;function zae(n,e,t){return n.call.apply(n.bind,arguments)}function qae(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function cn(n,e,t){return(cn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zae:qae).apply(null,arguments)}function sg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ot(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ts(){this.s=this.s,this.o=this.o}Ts.prototype.s=!1,Ts.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Hae(n){Object.prototype.hasOwnProperty.call(n,JD)&&n[JD]||(n[JD]=++Gae)}(this)},Ts.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kV=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ZD(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function PV(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ig(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function dn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}dn.prototype.h=function(){this.defaultPrevented=!0};var Kae=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{re.addEventListener("test",()=>{},e),re.removeEventListener("test",()=>{},e)}catch{}return n}();function qc(n){return/^[\s\xa0]*$/.test(n)}function og(){var n=re.navigator;return n&&(n=n.userAgent)?n:""}function li(n){return-1!=og().indexOf(n)}function eC(n){return eC[" "](n),n}eC[" "]=function(){};var nC,n,Yae=li("Opera"),Cu=li("Trident")||li("MSIE"),OV=li("Edge"),tC=OV||Cu,FV=li("Gecko")&&!(-1!=og().toLowerCase().indexOf("webkit")&&!li("Edge"))&&!(li("Trident")||li("MSIE"))&&!li("Edge"),Xae=-1!=og().toLowerCase().indexOf("webkit")&&!li("Edge");function LV(){var n=re.document;return n?n.documentMode:void 0}e:{var rC="",iC=(n=og(),FV?/rv:([^\);]+)(\)|;)/.exec(n):OV?/Edge\/([\d\.]+)/.exec(n):Cu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Xae?/WebKit\/(\S+)/.exec(n):Yae?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(iC&&(rC=iC?iC[1]:""),Cu){var sC=LV();if(null!=sC&&sC>parseFloat(rC)){nC=String(sC);break e}}nC=rC}var Jae=re.document&&Cu&&(LV()||parseInt(nC,10))||void 0;function Wc(n,e){if(dn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(FV){e:{try{eC(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Zae[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wc.$.h.call(this)}}Ot(Wc,dn);var Zae={2:"touch",3:"pen",4:"mouse"};Wc.prototype.h=function(){Wc.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Kc="closure_listenable_"+(1e6*Math.random()|0),eue=0;function tue(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++eue,this.fa=this.ia=!1}function ag(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function aC(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function BV(n){const e={};for(const t in n)e[t]=n[t];return e}const UV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $V(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<UV.length;s++)t=UV[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ug(n){this.src=n,this.g={},this.h=0}function uC(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=kV(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ag(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function lC(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}ug.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=lC(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new tue(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var cC="closure_lm_"+(1e6*Math.random()|0),dC={};function jV(n,e,t,r,i){if(r&&r.once)return GV(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)jV(n,e[s],t,r,i);return null}return t=gC(t),n&&n[Kc]?n.O(e,t,zc(r)?!!r.capture:!!r,i):HV(n,e,t,!1,r,i)}function HV(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=zc(i)?!!i.capture:!!i,a=fC(n);if(a||(n[cC]=a=new ug(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function rue(){const e=iue;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Kae||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(qV(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function GV(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)GV(n,e[s],t,r,i);return null}return t=gC(t),n&&n[Kc]?n.P(e,t,zc(r)?!!r.capture:!!r,i):HV(n,e,t,!0,r,i)}function zV(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)zV(n,e[s],t,r,i);else r=zc(r)?!!r.capture:!!r,t=gC(t),n&&n[Kc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=lC(s=n.g[e],t,r,i))&&(ag(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=fC(n))&&(e=n.g[e.toString()],n=-1,e&&(n=lC(e,t,r,i)),(t=-1<n?e[n]:null)&&hC(t))}function hC(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Kc])uC(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(qV(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=fC(e))?(uC(t,n),0==t.h&&(t.src=null,e[cC]=null)):ag(n)}}}function qV(n){return n in dC?dC[n]:dC[n]="on"+n}function iue(n,e){if(n.fa)n=!0;else{e=new Wc(e,this);var t=n.listener,r=n.la||n.src;n.ia&&hC(n),n=t.call(r,e)}return n}function fC(n){return(n=n[cC])instanceof ug?n:null}var pC="__closure_events_fn_"+(1e9*Math.random()>>>0);function gC(n){return"function"==typeof n?n:(n[pC]||(n[pC]=function(e){return n.handleEvent(e)}),n[pC])}function Ft(){Ts.call(this),this.i=new ug(this),this.S=this,this.J=null}function Yt(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new dn(e,n);else if(e instanceof dn)e.target=e.target||n;else{var i=e;$V(e=new dn(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=lg(o,r,!0,e)&&i}if(i=lg(o=e.g=n,r,!0,e)&&i,i=lg(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=lg(o=e.g=t[s],r,!1,e)&&i}function lg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,u=o.la||o.src;o.ia&&uC(n.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ot(Ft,Ts),Ft.prototype[Kc]=!0,Ft.prototype.removeEventListener=function(n,e,t,r){zV(this,n,e,t,r)},Ft.prototype.N=function(){if(Ft.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ag(t[r]);delete n.g[e],n.h--}}this.J=null},Ft.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ft.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var mC=re.JSON.stringify;function oue(){var n=yC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var WV=new class sue{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new uue,n=>n.reset());class uue{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lue(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function cue(n){re.setTimeout(()=>{throw n},0)}let Qc,Yc=!1,yC=new class aue{constructor(){this.h=this.g=null}add(e,t){const r=WV.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},KV=()=>{const n=re.Promise.resolve(void 0);Qc=()=>{n.then(due)}};var due=()=>{for(var n;n=oue();){try{n.h.call(n.g)}catch(t){cue(t)}var e=WV;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yc=!1};function cg(n,e){Ft.call(this),this.h=n||1,this.g=e||re,this.j=cn(this.qb,this),this.l=Date.now()}function _C(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function vC(n,e,t){if("function"==typeof n)t&&(n=cn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=cn(n.handleEvent,n)}return 2147483647<Number(e)?-1:re.setTimeout(n,e||0)}function QV(n){n.g=vC(()=>{n.g=null,n.i&&(n.i=!1,QV(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ot(cg,Ft),(R=cg.prototype).ga=!1,R.T=null,R.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Yt(this,"tick"),this.ga&&(_C(this),this.start()))}},R.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},R.N=function(){cg.$.N.call(this),_C(this),delete this.g};class hue extends Ts{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:QV(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xc(n){Ts.call(this),this.h=n,this.g={}}Ot(Xc,Ts);var YV=[];function XV(n,e,t,r){Array.isArray(t)||(t&&(YV[0]=t.toString()),t=YV);for(var i=0;i<t.length;i++){var s=jV(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function JV(n){aC(n.g,function(e,t){this.g.hasOwnProperty(t)&&hC(e)},n),n.g={}}function dg(){this.g=!0}function Su(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function mue(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return mC(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Xc.prototype.N=function(){Xc.$.N.call(this),JV(this)},Xc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dg.prototype.Ea=function(){this.g=!1},dg.prototype.info=function(){};var Po={},ZV=null;function hg(){return ZV=ZV||new Ft}function eB(n){dn.call(this,Po.Ta,n)}function Jc(n){const e=hg();Yt(e,new eB(e))}function tB(n,e){dn.call(this,Po.STAT_EVENT,n),this.stat=e}function Mn(n){const e=hg();Yt(e,new tB(e,n))}function nB(n,e){dn.call(this,Po.Ua,n),this.size=e}function Zc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){n()},e)}Po.Ta="serverreachability",Ot(eB,dn),Po.STAT_EVENT="statevent",Ot(tB,dn),Po.Ua="timingevent",Ot(nB,dn);var fg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},rB={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wC(){}function sB(){}wC.prototype.h=null;var IC,ed={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function EC(){dn.call(this,"d")}function bC(){dn.call(this,"c")}function pg(){}function td(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Xc(this),this.P=yue,this.V=new cg(n=tC?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new oB}function oB(){this.i=null,this.g="",this.h=!1}Ot(EC,dn),Ot(bC,dn),Ot(pg,wC),pg.prototype.g=function(){return new XMLHttpRequest},pg.prototype.i=function(){return{}},IC=new pg;var yue=45e3,TC={},gg={};function DC(n,e,t){n.L=1,n.v=vg(Qi(e)),n.s=t,n.S=!0,aB(n,null)}function aB(n,e){n.G=Date.now(),nd(n),n.A=Qi(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),yB(t.i,"t",r),n.C=0,t=n.l.J,n.h=new oB,n.g=$B(n.l,t?e:null,!n.s),0<n.O&&(n.M=new hue(cn(n.Pa,n,n.g),n.O)),XV(n.U,n.g,"readystatechange",n.nb),e=n.I?BV(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Jc(),function fue(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var d=c.split("_");o=2<=d.length&&"type"==d[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.W,n.s)}function uB(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function lB(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=_ue(n,t),i==gg){4==e&&(n.o=4,Mn(14),r=!1),Su(n.j,n.m,null,"[Incomplete Response]");break}if(i==TC){n.o=4,Mn(15),Su(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Su(n.j,n.m,i,null),CC(n,i)}uB(n)&&i!=gg&&i!=TC&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Mn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),kC(e),e.M=!0,Mn(11))):(Su(n.j,n.m,t,"[Invalid Chunked Response]"),Oo(n),rd(n))}function _ue(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?gg:(t=Number(e.substring(t,r)),isNaN(t)?TC:(r+=1)+t>e.length?gg:(e=e.slice(r,r+t),n.C=r+t,e))}function nd(n){n.Y=Date.now()+n.P,cB(n,n.P)}function cB(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Zc(cn(n.lb,n),e)}function mg(n){n.B&&(re.clearTimeout(n.B),n.B=null)}function rd(n){0==n.l.H||n.J||LB(n.l,n)}function Oo(n){mg(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,_C(n.V),JV(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function CC(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||SC(t.i,n)))if(!n.K&&SC(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Dg(t),Ig(t)}RC(t),Mn(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Zc(cn(t.ib,t),6e3));if(1>=wB(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Lo(t,11)}else if((n.K||t.g==n)&&Dg(t),!qc(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(t.V=l[0],l=l[1],2==t.H)if("c"==l[0]){t.K=l[1],t.pa=l[2];const c=l[3];null!=c&&(t.ra=c,t.l.info("VER="+t.ra));const d=l[4];null!=d&&(t.Ga=d,t.l.info("SVER="+t.Ga));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(t.L=r=1.5*h,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(AC(s,s.h),s.h=null))}if(r.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.Da=g,He(r.I,r.F,g))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=UB(r,r.J?r.pa:null,r.Y),o.K){EB(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.B&&(mg(a),nd(a)),r.g=o}else OB(r);0<t.j.length&&Tg(t)}else"stop"!=l[0]&&"close"!=l[0]||Lo(t,7);else 3==t.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Lo(t,7):NC(t):"noop"!=l[0]&&t.h&&t.h.Aa(l),t.A=0)}Jc()}catch{}}function dB(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ig(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function wue(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ig(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function vue(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ig(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(R=td.prototype).setTimeout=function(n){this.P=n},R.nb=function(n){n=n.target;const e=this.M;e&&3==ci(n)?e.l():this.Pa(n)},R.Pa=function(n){try{if(n==this.g)e:{const c=ci(this.g);var e=this.g.Ia();if(this.g.da(),!(3>c)&&(3!=c||tC||this.g&&(this.h.h||this.g.ja()||MB(this.g)))){this.J||4!=c||7==e||Jc(),mg(this);var t=this.g.da();this.ca=t;t:if(uB(this)){var r=MB(this.g);n="";var i=r.length,s=4==ci(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Oo(this),rd(this);var o="";break t}this.h.i=new re.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function pue(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,c,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qc(a)){var l=a;break t}}l=null}if(!(t=l)){this.i=!1,this.o=3,Mn(12),Oo(this),rd(this);break e}Su(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,CC(this,t)}this.S?(lB(this,c,o),tC&&this.i&&3==c&&(XV(this.U,this.V,"tick",this.mb),this.V.start())):(Su(this.j,this.m,o,null),CC(this,o)),4==c&&Oo(this),this.i&&!this.J&&(4==c?LB(this.l,this):(this.i=!1,nd(this)))}else(function Vue(n){const e={};n=(n.g&&2<=ci(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(qc(n[r]))continue;var t=lue(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function nue(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.o=3,Mn(12)):(this.o=0,Mn(13)),Oo(this),rd(this)}}}catch{}},R.mb=function(){if(this.g){var n=ci(this.g),e=this.g.ja();this.C<e.length&&(mg(this),lB(this,n,e),this.i&&4!=n&&nd(this))}},R.cancel=function(){this.J=!0,Oo(this)},R.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function gue(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Jc(),Mn(17)),Oo(this),this.o=2,rd(this)):cB(this,this.Y-n)};var hB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fo(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Fo){this.h=n.h,yg(this,n.j),this.s=n.s,this.g=n.g,_g(this,n.m),this.l=n.l;var e=n.i,t=new od;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),fB(this,t),this.o=n.o}else n&&(e=String(n).match(hB))?(this.h=!1,yg(this,e[1]||"",!0),this.s=id(e[2]||""),this.g=id(e[3]||"",!0),_g(this,e[4]),this.l=id(e[5]||"",!0),fB(this,e[6]||"",!0),this.o=id(e[7]||"")):(this.h=!1,this.i=new od(null,this.h))}function Qi(n){return new Fo(n)}function yg(n,e,t){n.j=t?id(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function _g(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function fB(n,e,t){e instanceof od?(n.i=e,function Sue(n,e){e&&!n.j&&(Ds(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(gB(this,r),yB(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=sd(e,Due)),n.i=new od(e,n.h))}function He(n,e,t){n.i.set(e,t)}function vg(n){return He(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function id(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,bue),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function bue(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Fo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(sd(e,pB,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(sd(e,pB,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(sd(t,"/"==t.charAt(0)?Tue:Iue,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",sd(t,Cue)),n.join("")};var pB=/[#\/\?@]/g,Iue=/[#\?:]/g,Tue=/[#\?]/g,Due=/[#\?@]/g,Cue=/#/g;function od(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ds(n){n.g||(n.g=new Map,n.h=0,n.i&&function Eue(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function gB(n,e){Ds(n),e=Au(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function mB(n,e){return Ds(n),e=Au(n,e),n.g.has(e)}function yB(n,e,t){gB(n,e),0<t.length&&(n.i=null,n.g.set(Au(n,e),ZD(t)),n.h+=t.length)}function Au(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function _B(n){this.l=n||Mue,n=re.PerformanceNavigationTiming?0<(n=re.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(R=od.prototype).add=function(n,e){Ds(this),this.i=null,n=Au(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},R.forEach=function(n,e){Ds(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},R.ta=function(){Ds(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},R.Z=function(n){Ds(this);let e=[];if("string"==typeof n)mB(this,n)&&(e=e.concat(this.g.get(Au(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},R.set=function(n,e){return Ds(this),this.i=null,mB(this,n=Au(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},R.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},R.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var Mue=10;function vB(n){return!!n.h||!!n.g&&n.g.size>=n.j}function wB(n){return n.h?1:n.g?n.g.size:0}function SC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function AC(n,e){n.g?n.g.add(e):n.h=e}function EB(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function bB(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return ZD(n.i)}_B.prototype.cancel=function(){if(this.i=bB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var xue=class{stringify(n){return re.JSON.stringify(n,void 0)}parse(n){return re.JSON.parse(n,void 0)}};function Nue(){this.g=new xue}function Rue(n,e,t){const r=t||"";try{dB(n,function(i,s){let o=i;zc(i)&&(o=mC(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ad(n){this.l=n.fc||null,this.j=n.ob||!1}function Eg(n,e){Ft.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=MC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ot(ad,wC),ad.prototype.g=function(){return new Eg(this.l,this.j)},ad.prototype.i=function(n){return function(){return n}}({}),Ot(Eg,Ft);var MC=0;function IB(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function ud(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ld(n)}function ld(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(R=Eg.prototype).open=function(n,e){if(this.readyState!=MC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ld(this)},R.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ud(this)),this.readyState=MC},R.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ld(this)),this.g&&(this.readyState=3,ld(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;IB(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},R.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ud(this):ld(this),3==this.readyState&&IB(this)}},R.Za=function(n){this.g&&(this.response=this.responseText=n,ud(this))},R.Ya=function(n){this.g&&(this.response=n,ud(this))},R.ka=function(){this.g&&ud(this)},R.setRequestHeader=function(n,e){this.v.append(n,e)},R.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},R.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Eg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Pue=re.JSON.parse;function at(n){Ft.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=TB,this.L=this.M=!1}Ot(at,Ft);var TB="",Oue=/^https?$/i,Fue=["POST","PUT"];function DB(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,CB(n),bg(n)}function CB(n){n.F||(n.F=!0,Yt(n,"complete"),Yt(n,"error"))}function SB(n){if(n.h&&typeof XD<"u"&&(!n.C[1]||4!=ci(n)||2!=n.da()))if(n.v&&4==ci(n))vC(n.La,0,n);else if(Yt(n,"readystatechange"),4==ci(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(hB)[1]||null;!i&&re.self&&re.self.location&&(i=re.self.location.protocol.slice(0,-1)),r=!Oue.test(i?i.toLowerCase():"")}t=r}if(t)Yt(n,"complete"),Yt(n,"success");else{n.m=6;try{var s=2<ci(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",CB(n)}}finally{bg(n)}}}function bg(n,e){if(n.g){AB(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Yt(n,"ready");try{t.onreadystatechange=r}catch{}}}function AB(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(re.clearTimeout(n.A),n.A=null)}function ci(n){return n.g?n.g.readyState:0}function MB(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case TB:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function xB(n){let e="";return aC(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function xC(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=xB(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):He(n,e,t))}function cd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function NB(n){this.Ga=0,this.j=[],this.l=new dg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cd("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cd("baseRetryDelayMs",5e3,n),this.hb=cd("retryDelaySeedMs",1e4,n),this.eb=cd("forwardChannelMaxRetries",2,n),this.xa=cd("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new _B(n&&n.concurrentRequestLimit),this.Ja=new Nue,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function NC(n){if(RB(n),3==n.H){var e=n.W++,t=Qi(n.I);if(He(t,"SID",n.K),He(t,"RID",e),He(t,"TYPE","terminate"),dd(n,t),(e=new td(n,n.l,e)).L=2,e.v=vg(Qi(t)),t=!1,re.navigator&&re.navigator.sendBeacon)try{t=re.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&re.Image&&((new Image).src=e.v,t=!0),t||(e.g=$B(e.l,null),e.g.ha(e.v)),e.G=Date.now(),nd(e)}BB(n)}function Ig(n){n.g&&(kC(n),n.g.cancel(),n.g=null)}function RB(n){Ig(n),n.u&&(re.clearTimeout(n.u),n.u=null),Dg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&re.clearTimeout(n.m),n.m=null)}function Tg(n){if(!vB(n.i)&&!n.m){n.m=!0;var e=n.Na;Qc||KV(),Yc||(Qc(),Yc=!0),yC.add(e,n),n.C=0}}function kB(n,e){var t;t=e?e.m:n.W++;const r=Qi(n.I);He(r,"SID",n.K),He(r,"RID",t),He(r,"AID",n.V),dd(n,r),n.o&&n.s&&xC(r,n.o,n.s),t=new td(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=PB(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),AC(n.i,t),DC(t,r,e)}function dd(n,e){n.na&&aC(n.na,function(t,r){He(e,r,t)}),n.h&&dB({},function(t,r){He(e,r,t)})}function PB(n,e,t){t=Math.min(n.j.length,t);var r=n.h?cn(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<t;u++){let l=i[u].g;const c=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{Rue(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function OB(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Qc||KV(),Yc||(Qc(),Yc=!0),yC.add(e,n),n.A=0}}function RC(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Zc(cn(n.Ma,n),VB(n,n.A)),n.A++,0))}function kC(n){null!=n.B&&(re.clearTimeout(n.B),n.B=null)}function FB(n){n.g=new td(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Qi(n.wa);He(e,"RID","rpc"),He(e,"SID",n.K),He(e,"AID",n.V),He(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&He(e,"TO",n.qa),He(e,"TYPE","xmlhttp"),dd(n,e),n.o&&n.s&&xC(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=vg(Qi(e)),t.s=null,t.S=!0,aB(t,n)}function Dg(n){null!=n.v&&(re.clearTimeout(n.v),n.v=null)}function LB(n,e){var t=null;if(n.g==e){Dg(n),kC(n),n.g=null;var r=2}else{if(!SC(n.i,e))return;t=e.F,EB(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Yt(r=hg(),new nB(r,t)),Tg(n)}else OB(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function Bue(n,e){return!(wB(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Zc(cn(n.Na,n,e),VB(n,n.C)),n.C++,0)))}(n,e)||2==r&&RC(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Lo(n,5);break;case 4:Lo(n,10);break;case 3:Lo(n,6);break;default:Lo(n,2)}}function VB(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Lo(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=cn(n.pb,n);t||(t=new Fo("//www.google.com/images/cleardot.gif"),re.location&&"http"==re.location.protocol||yg(t,"https"),vg(t)),function kue(n,e){const t=new dg;if(re.Image){const r=new Image;r.onload=sg(wg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=sg(wg,t,r,"TestLoadImage: error",!1,e),r.onabort=sg(wg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=sg(wg,t,r,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Mn(2);n.H=0,n.h&&n.h.za(e),BB(n),RB(n)}function BB(n){if(n.H=0,n.ma=[],n.h){const e=bB(n.i);(0!=e.length||0!=n.j.length)&&(PV(n.ma,e),PV(n.ma,n.j),n.i.i.length=0,ZD(n.j),n.j.length=0),n.h.ya()}}function UB(n,e,t){var r=t instanceof Fo?Qi(t):new Fo(t);if(""!=r.g)e&&(r.g=e+"."+r.g),_g(r,r.m);else{var i=re.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Fo(null);r&&yg(s,r),e&&(s.g=e),i&&_g(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&He(r,t,e),He(r,"VER",n.ra),dd(n,r),r}function $B(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new at(t&&n.Ha&&!n.va?new ad({ob:!0}):n.va)).Oa(n.J),e}function jB(){}function Cg(){if(Cu&&!(10<=Number(Jae)))throw Error("Environmental error: no available transport.")}function rr(n,e){Ft.call(this),this.g=new NB(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!qc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qc(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Mu(this)}function HB(n){EC.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function GB(){bC.call(this),this.status=1}function Mu(n){this.g=n}function jr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function PC(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function xe(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(R=at.prototype).Oa=function(n){this.M=n},R.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():IC.g(),this.C=function iB(n){return n.h||(n.h=n.i())}(this.u?this.u:IC),this.g.onreadystatechange=cn(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void DB(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=re.FormData&&n instanceof re.FormData,!(0<=kV(Fue,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{AB(this),0<this.B&&((this.L=function Lue(n){return Cu&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cn(this.ua,this)):this.A=vC(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){DB(this,s)}},R.ua=function(){typeof XD<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yt(this,"timeout"),this.abort(8))},R.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Yt(this,"complete"),Yt(this,"abort"),bg(this))},R.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bg(this,!0)),at.$.N.call(this)},R.La=function(){this.s||(this.G||this.v||this.l?SB(this):this.kb())},R.kb=function(){SB(this)},R.isActive=function(){return!!this.g},R.da=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}},R.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},R.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Pue(e)}},R.Ia=function(){return this.m},R.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(R=NB.prototype).ra=8,R.H=1,R.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new td(this,this.l,n);let s=this.s;if(this.U&&(s?(s=BV(s),$V(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=PB(this,i,e),He(t=Qi(this.I),"RID",n),He(t,"CVER",22),this.F&&He(t,"X-HTTP-Session-Id",this.F),dd(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(xB(s)))+"&"+e:this.o&&xC(t,this.o,s)),AC(this.i,i),this.bb&&He(t,"TYPE","init"),this.P?(He(t,"$req",e),He(t,"SID","null"),i.aa=!0,DC(i,t,null)):DC(i,t,e),this.H=2}}else 3==this.H&&(n?kB(this,n):0==this.j.length||vB(this.i)||kB(this))},R.Ma=function(){if(this.u=null,FB(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Zc(cn(this.jb,this),n)}},R.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Mn(10),Ig(this),FB(this))},R.ib=function(){null!=this.v&&(this.v=null,Ig(this),RC(this),Mn(19))},R.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Mn(2)):(this.l.info("Failed to ping google.com"),Mn(1))},R.isActive=function(){return!!this.h&&this.h.isActive(this)},(R=jB.prototype).Ba=function(){},R.Aa=function(){},R.za=function(){},R.ya=function(){},R.isActive=function(){return!0},R.Va=function(){},Cg.prototype.g=function(n,e){return new rr(n,e)},Ot(rr,Ft),rr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Mn(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=UB(n,null,n.Y),Tg(n)},rr.prototype.close=function(){NC(this.g)},rr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=mC(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Tg(e)},rr.prototype.N=function(){this.g.h=null,delete this.j,NC(this.g),delete this.g,rr.$.N.call(this)},Ot(HB,EC),Ot(GB,bC),Ot(Mu,jB),Mu.prototype.Ba=function(){Yt(this.g,"a")},Mu.prototype.Aa=function(n){Yt(this.g,new HB(n))},Mu.prototype.za=function(n){Yt(this.g,new GB)},Mu.prototype.ya=function(){Yt(this.g,"b")},Ot(jr,function Uue(){this.blockSize=-1}),jr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},jr.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)PC(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){PC(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){PC(this,r),i=0;break}}this.h=i,this.i+=e},jr.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var $ue={};function OC(n){return-128<=n&&128>n?function Qae(n,e){var t=$ue;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new xe([0|e],0>e?-1:0)}):new xe([0|n],0>n?-1:0)}function di(n){if(isNaN(n)||!isFinite(n))return xu;if(0>n)return Xt(di(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=FC;return new xe(e,0)}var FC=4294967296,xu=OC(0),LC=OC(1),qB=OC(16777216);function Yi(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ir(n){return-1==n.h}function Xt(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new xe(t,~n.h).add(LC)}function Sg(n,e){return n.add(Xt(e))}function Ag(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function hd(n,e){this.g=n,this.h=e}function Mg(n,e){if(Yi(e))throw Error("division by zero");if(Yi(n))return new hd(xu,xu);if(Ir(n))return e=Mg(Xt(n),e),new hd(Xt(e.g),Xt(e.h));if(Ir(e))return e=Mg(n,Xt(e)),new hd(Xt(e.g),e.h);if(30<n.g.length){if(Ir(n)||Ir(e))throw Error("slowDivide_ only works with positive integers.");for(var t=LC,r=e;0>=r.X(n);)t=WB(t),r=WB(r);var i=Nu(t,1),s=Nu(r,1);for(r=Nu(r,2),t=Nu(t,2);!Yi(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=Nu(r,1),t=Nu(t,1)}return e=Sg(n,i.R(e)),new hd(i,e)}for(i=xu;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=di(t)).R(e);Ir(o)||0<o.X(n);)o=(s=di(t-=r)).R(e);Yi(s)&&(s=LC),i=i.add(s),n=Sg(n,o)}return new hd(i,n)}function WB(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new xe(t,n.h)}function Nu(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new xe(i,n.h)}(R=xe.prototype).ea=function(){if(Ir(this))return-Xt(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:FC+r)*e,e*=FC}return n},R.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Yi(this))return"0";if(Ir(this))return"-"+Xt(this).toString(n);for(var e=di(Math.pow(n,6)),t=this,r="";;){var i=Mg(t,e).g,s=((0<(t=Sg(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Yi(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},R.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},R.X=function(n){return Ir(n=Sg(this,n))?-1:Yi(n)?0:1},R.abs=function(){return Ir(this)?Xt(this):this},R.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new xe(t,-2147483648&t[t.length-1]?-1:0)},R.R=function(n){if(Yi(this)||Yi(n))return xu;if(Ir(this))return Ir(n)?Xt(this).R(Xt(n)):Xt(Xt(this).R(n));if(Ir(n))return Xt(this.R(Xt(n)));if(0>this.X(qB)&&0>n.X(qB))return di(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,u=65535&n.D(i);t[2*r+2*i]+=o*u,Ag(t,2*r+2*i),t[2*r+2*i+1]+=s*u,Ag(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,Ag(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,Ag(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new xe(t,0)},R.gb=function(n){return Mg(this,n).h},R.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new xe(t,this.h&n.h)},R.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new xe(t,this.h|n.h)},R.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new xe(t,this.h^n.h)},Cg.prototype.createWebChannel=Cg.prototype.g,rr.prototype.send=rr.prototype.u,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,fg.NO_ERROR=0,fg.TIMEOUT=8,fg.HTTP_ERROR=6,rB.COMPLETE="complete",sB.EventType=ed,ed.OPEN="a",ed.CLOSE="b",ed.ERROR="c",ed.MESSAGE="d",Ft.prototype.listen=Ft.prototype.O,at.prototype.listenOnce=at.prototype.P,at.prototype.getLastError=at.prototype.Sa,at.prototype.getLastErrorCode=at.prototype.Ia,at.prototype.getStatus=at.prototype.da,at.prototype.getResponseJson=at.prototype.Wa,at.prototype.getResponseText=at.prototype.ja,at.prototype.send=at.prototype.ha,at.prototype.setWithCredentials=at.prototype.Oa,jr.prototype.digest=jr.prototype.l,jr.prototype.reset=jr.prototype.reset,jr.prototype.update=jr.prototype.j,xe.prototype.add=xe.prototype.add,xe.prototype.multiply=xe.prototype.R,xe.prototype.modulo=xe.prototype.gb,xe.prototype.compare=xe.prototype.X,xe.prototype.toNumber=xe.prototype.ea,xe.prototype.toString=xe.prototype.toString,xe.prototype.getBits=xe.prototype.D,xe.fromNumber=di,xe.fromString=function zB(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Xt(zB(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=di(Math.pow(e,8)),r=xu,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=di(Math.pow(e,s)),r=r.R(s).add(di(o))):r=(r=r.R(t)).add(di(o))}return r};var jue=$r.createWebChannelTransport=function(){return new Cg},Hue=$r.getStatEventTarget=function(){return hg()},VC=$r.ErrorCode=fg,Gue=$r.EventType=rB,zue=$r.Event=Po,KB=$r.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},que=$r.FetchXmlHttpFactory=ad,xg=$r.WebChannel=sB,Wue=$r.XhrIo=at,Kue=$r.Md5=jr,Ru=$r.Integer=xe;class Lt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");let ku="9.23.0";const Cs=new _o("@firebase/firestore");function BC(){return Cs.logLevel}function S(n,...e){if(Cs.logLevel<=_e.DEBUG){const t=e.map(UC);Cs.debug(`Firestore (${ku}): ${n}`,...t)}}function ht(n,...e){if(Cs.logLevel<=_e.ERROR){const t=e.map(UC);Cs.error(`Firestore (${ku}): ${n}`,...t)}}function Hr(n,...e){if(Cs.logLevel<=_e.WARN){const t=e.map(UC);Cs.warn(`Firestore (${ku}): ${n}`,...t)}}function UC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function F(n="Unexpected state"){const e=`FIRESTORE (${ku}) INTERNAL ASSERTION FAILED: `+n;throw ht(e),new Error(e)}function j(n,e){n||F()}function N(n,e){return n}const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class C extends nr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class YB{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Que{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lt.UNAUTHENTICATED))}shutdown(){}}class Yue{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Jue{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Zue{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Jue(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}function tle(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class JB{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=tle(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function ne(n,e){return n<e?-1:n>e?1:0}function Pu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class tt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new C(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new C(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new C(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new C(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class H{constructor(e){this.timestamp=e}static fromTimestamp(e){return new H(e)}static min(){return new H(new tt(0,0))}static max(){return new H(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class fd{constructor(e,t,r){void 0===t?t=0:t>e.length&&F(),void 0===r?r=e.length-t:r>e.length-t&&F(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===fd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ee extends fd{construct(e,t,r){return new Ee(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new C(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ee(t)}static emptyPath(){return new Ee([])}}const nle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends fd{construct(e,t,r){return new ft(e,t,r)}static isValidIdentifier(e){return nle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new C(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new C(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new C(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new C(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(t)}static emptyPath(){return new ft([])}}class x{constructor(e){this.path=e}static fromPath(e){return new x(Ee.fromString(e))}static fromName(e){return new x(Ee.fromString(e).popFirst(5))}static empty(){return new x(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ee.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ee.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new x(new Ee(e.slice()))}}function tU(n){return new ir(n.readTime,n.key,-1)}class ir{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ir(H.min(),x.empty(),-1)}static max(){return new ir(H.max(),x.empty(),-1)}}function jC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=x.comparator(n.documentKey,e.documentKey),0!==t?t:ne(n.largestBatchId,e.largestBatchId))}const nU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sle{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ss(n){return HC.apply(this,arguments)}function HC(){return HC=y(function*(n){if(n.code!==E.FAILED_PRECONDITION||n.message!==nU)throw n;S("LocalStore","Unexpectedly lost primary lease")}),HC.apply(this,arguments)}class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&F(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new w((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof w?t:w.resolve(t)}catch(t){return w.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):w.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):w.reject(t)}static resolve(e){return new w((t,r)=>{t(e)})}static reject(e){return new w((t,r)=>{r(e)})}static waitFor(e){return new w((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=w.resolve(!1);for(const r of e)t=t.next(i=>i?w.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new w((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,t){return new w((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function As(n){return"IndexedDbTransactionError"===n.name}let sr=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function md(n){return null==n}function yd(n){return 0===n&&1/n==-1/0}function dU(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ms(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hU(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ue{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new Ue(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Og(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Og(this.root,e,this.comparator,!1)}getReverseIterator(){return new Og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Og(this.root,e,this.comparator,!0)}}class Og{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Jt.RED,this.left=i??Jt.EMPTY,this.right=s??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Jt(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Jt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw F();const e=this.left.check();if(e!==this.right.check())throw F();return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1,Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw F()}get value(){throw F()}get color(){throw F()}get left(){throw F()}get right(){throw F()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Jt(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ge{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fU(this.data.getIterator())}getIteratorFrom(e){return new fU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ge(this.comparator);return t.data=e,t}}class fU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hn{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new Ge(ft.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class pU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new pU("Invalid base64 string: "+i):i}}(e);return new xt(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const Ale=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(n){if(j(!!n),"string"==typeof n){let e=0;const t=Ale.exec(n);if(j(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(n.seconds),nanos:ut(n.nanos)}}function ut(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xi(n){return"string"==typeof n?xt.fromBase64String(n):xt.fromUint8Array(n)}function Fg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Lg(n){const e=n.mapValue.fields.__previous_value__;return Fg(e)?Lg(e):e}function _d(n){const e=xs(n.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}class Mle{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Uo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Uo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Uo&&e.projectId===this.projectId&&e.database===this.database}}const Ns={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fg(n)?4:_U(n)?9007199254740991:10:F()}function fi(n,e){if(n===e)return!0;const t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _d(n).isEqual(_d(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=xs(r.timestampValue),o=xs(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Xi(n.bytesValue).isEqual(Xi(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ut(r.geoPointValue.latitude)===ut(i.geoPointValue.latitude)&&ut(r.geoPointValue.longitude)===ut(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ut(r.integerValue)===ut(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=ut(r.doubleValue),o=ut(i.doubleValue);return s===o?yd(s)===yd(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Pu(n.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(dU(s)!==dU(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!fi(s[a],o[a])))return!1;return!0}(n,e);default:return F()}var i}function vd(n,e){return void 0!==(n.values||[]).find(t=>fi(t,e))}function ks(n,e){if(n===e)return 0;const t=Rs(n),r=Rs(e);if(t!==r)return ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ne(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=ut(i.integerValue||i.doubleValue),a=ut(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return gU(n.timestampValue,e.timestampValue);case 4:return gU(_d(n),_d(e));case 5:return ne(n.stringValue,e.stringValue);case 6:return function(i,s){const o=Xi(i),a=Xi(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const l=ne(o[u],a[u]);if(0!==l)return l}return ne(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ne(ut(i.latitude),ut(s.latitude));return 0!==o?o:ne(ut(i.longitude),ut(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const l=ks(o[u],a[u]);if(l)return l}return ne(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Ns.mapValue&&s===Ns.mapValue)return 0;if(i===Ns.mapValue)return 1;if(s===Ns.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},l=Object.keys(u);a.sort(),l.sort();for(let c=0;c<a.length&&c<l.length;++c){const d=ne(a[c],l[c]);if(0!==d)return d;const h=ks(o[a[c]],u[l[c]]);if(0!==h)return h}return ne(a.length,l.length)}(n.mapValue,e.mapValue);default:throw F()}}function gU(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ne(n,e);const t=xs(n),r=xs(e),i=ne(t.seconds,r.seconds);return 0!==i?i:ne(t.nanos,r.nanos)}function Fu(n){return qC(n)}function qC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=xs(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xi(n.bytesValue).toBase64():"referenceValue"in n?x.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=qC(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${qC(r.fields[a])}`;return s+"}"}(n.mapValue):F();var e}function WC(n){return!!n&&"integerValue"in n}function wd(n){return!!n&&"arrayValue"in n}function mU(n){return!!n&&"nullValue"in n}function yU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ug(n){return!!n&&"mapValue"in n}function Ed(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ms(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ed(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ed(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _U(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ug(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ed(t)}setAll(e){let t=ft.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Ed(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Ug(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ug(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ms(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Zt(Ed(this.value))}}function EU(n){const e=[];return Ms(n.fields,(t,r)=>{const i=new ft([t]);if(Ug(r)){const s=EU(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Hn(e)}class ze{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ze(e,0,H.min(),H.min(),H.min(),Zt.empty(),0)}static newFoundDocument(e,t,r,i){return new ze(e,1,t,H.min(),r,i,0)}static newNoDocument(e,t){return new ze(e,2,t,H.min(),H.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new ze(e,3,t,H.min(),H.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(H.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ps{constructor(e,t){this.position=e,this.inclusive=t}}function bU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?x.comparator(x.fromName(o.referenceValue),t.key):ks(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function IU(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fi(n.position[t],e.position[t]))return!1;return!0}class Lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Rle(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class TU{}class ye extends TU{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new kle(e,t,r):"array-contains"===t?new Fle(e,r):"in"===t?new xU(e,r):"not-in"===t?new Lle(e,r):"array-contains-any"===t?new Vle(e,r):new ye(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Ple(e,r):new Ole(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ks(t,this.value)):null!==t&&Rs(this.value)===Rs(t)&&this.matchesComparison(ks(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return F()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ne extends TU{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Ne(e,t)}matches(e){return Vu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Vu(n){return"and"===n.op}function QC(n){return function DU(n){for(const e of n.filters)if(e instanceof Ne)return!1;return!0}(n)&&Vu(n)}function YC(n){if(n instanceof ye)return n.field.canonicalString()+n.op.toString()+Fu(n.value);if(QC(n))return n.filters.map(e=>YC(e)).join(",");{const e=n.filters.map(t=>YC(t)).join(",");return`${n.op}(${e})`}}function CU(n,e){return n instanceof ye?(t=n,(r=e)instanceof ye&&t.op===r.op&&t.field.isEqual(r.field)&&fi(t.value,r.value)):n instanceof Ne?function(t,r){return r instanceof Ne&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,o)=>i&&CU(s,r.filters[o]),!0)}(n,e):void F();var t,r}function AU(n){return n instanceof ye?`${(e=n).field.canonicalString()} ${e.op} ${Fu(e.value)}`:n instanceof Ne?function(e){return e.op.toString()+" {"+e.getFilters().map(AU).join(" ,")+"}"}(n):"Filter";var e}class kle extends ye{constructor(e,t,r){super(e,t,r),this.key=x.fromName(r.referenceValue)}matches(e){const t=x.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ple extends ye{constructor(e,t){super(e,"in",t),this.keys=MU(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ole extends ye{constructor(e,t){super(e,"not-in",t),this.keys=MU(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function MU(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>x.fromName(r.referenceValue))}class Fle extends ye{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wd(t)&&vd(t.arrayValue,this.value)}}class xU extends ye{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vd(this.value.arrayValue,t)}}class Lle extends ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vd(this.value.arrayValue,t)}}class Vle extends ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vd(this.value.arrayValue,r))}}class Ble{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function XC(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Ble(n,e,t,r,i,s,o)}function jo(n){const e=N(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>YC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),md(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fu(r)).join(",")),e.dt=t}return e.dt}function bd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Rle(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CU(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!IU(n.startAt,e.startAt)&&IU(n.endAt,e.endAt)}function $g(n){return x.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ji{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this._t=null}}function Bu(n){return new Ji(n)}function PU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ho(n){const e=N(n);if(null===e.wt){e.wt=[];const t=function Hg(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),r=function JC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Lu(t)),e.wt.push(new Lu(ft.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Lu(ft.keyField(),s))}}}return e.wt}function xn(n){const e=N(n);if(!e._t)if("F"===e.limitType)e._t=XC(e.path,e.collectionGroup,Ho(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Ho(e))t.push(new Lu(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Ps(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ps(e.startAt.position,e.startAt.inclusive):null;e._t=XC(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Gg(n,e,t){return new Ji(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Id(n,e){return bd(xn(n),xn(e))&&n.limitType===e.limitType}function OU(n){return`${jo(xn(n))}|lt:${n.limitType}`}function t0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>AU(r)).join(", ")}]`),md(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fu(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fu(r)).join(",")),`Target(${t})`}(xn(n))}; limitType=${n.limitType})`}function Td(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):x.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Ho(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const a=bU(i,s,o);return i.inclusive?a<=0:a<0}(t.startAt,Ho(t),r)||t.endAt&&!function(i,s,o){const a=bU(i,s,o);return i.inclusive?a>=0:a>0}(t.endAt,Ho(t),r)));var t,r}function LU(n){return(e,t)=>{let r=!1;for(const i of Ho(n)){const s=Ule(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Ule(n,e,t){const r=n.field.isKeyField()?x.comparator(e.key,t.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?ks(a,u):F()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return F()}}class Zi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return hU(this.inner)}size(){return this.innerSize}}const $le=new Ue(x.comparator);function Gn(){return $le}const VU=new Ue(x.comparator);function Dd(...n){let e=VU;for(const t of n)e=e.insert(t.key,t);return e}function BU(n){let e=VU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function pi(){return Cd()}function UU(){return Cd()}function Cd(){return new Zi(n=>n.toString(),(n,e)=>n.isEqual(e))}const jle=new Ue(x.comparator),Hle=new Ge(x.comparator);function le(...n){let e=Hle;for(const t of n)e=e.add(t);return e}const Gle=new Ge(ne);function $U(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yd(e)?"-0":e}}function jU(n){return{integerValue:""+n}}function HU(n,e){return function iU(n){return"number"==typeof n&&Number.isInteger(n)&&!yd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?jU(e):$U(n,e)}class zg{constructor(){this._=void 0}}function zle(n,e,t){return n instanceof Uu?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Fg(i)&&(i=Lg(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Go?zU(n,e):n instanceof zo?qU(n,e):function(r,i){const s=GU(r,i),o=WU(s)+WU(r.gt);return WC(s)&&WC(r.gt)?jU(o):$U(r.serializer,o)}(n,e)}function qle(n,e,t){return n instanceof Go?zU(n,e):n instanceof zo?qU(n,e):t}function GU(n,e){return n instanceof $u?WC(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Uu extends zg{}class Go extends zg{constructor(e){super(),this.elements=e}}function zU(n,e){const t=KU(e);for(const r of n.elements)t.some(i=>fi(i,r))||t.push(r);return{arrayValue:{values:t}}}class zo extends zg{constructor(e){super(),this.elements=e}}function qU(n,e){let t=KU(e);for(const r of n.elements)t=t.filter(i=>!fi(i,r));return{arrayValue:{values:t}}}class $u extends zg{constructor(e,t){super(),this.serializer=e,this.gt=t}}function WU(n){return ut(n.integerValue||n.doubleValue)}function KU(n){return wd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Kle{constructor(e,t){this.version=e,this.transformResults=t}}class Ye{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ye}static exists(e){return new Ye(void 0,e)}static updateTime(e){return new Ye(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Wg{}function QU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hu(n.key,Ye.none()):new ju(n.key,n.data,Ye.none());{const t=n.data,r=Zt.empty();let i=new Ge(ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new es(n.key,r,new Hn(i.toArray()),Ye.none())}}function Qle(n,e,t){n instanceof ju?function(r,i,s){const o=r.value.clone(),a=JU(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof es?function(r,i,s){if(!qg(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=JU(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(XU(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ad(n,e,t,r){return n instanceof ju?function(i,s,o,a){if(!qg(i.precondition,s))return o;const u=i.value.clone(),l=ZU(i.fieldTransforms,a,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof es?function(i,s,o,a){if(!qg(i.precondition,s))return o;const u=ZU(i.fieldTransforms,a,s),l=s.data;return l.setAll(XU(i)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(c=>c.field))}(n,e,t,r):(o=t,qg(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function Yle(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=GU(r.transform,i||null);null!=s&&(null===t&&(t=Zt.empty()),t.set(r.field,s))}return t||null}function YU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Pu(t,r,(i,s)=>function Wle(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Go&&r instanceof Go||t instanceof zo&&r instanceof zo?Pu(t.elements,r.elements,fi):t instanceof $u&&r instanceof $u?fi(t.gt,r.gt):t instanceof Uu&&r instanceof Uu);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ju extends Wg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class es extends Wg{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function JU(n,e,t){const r=new Map;j(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,qle(o,a,t[i]))}return r}function ZU(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,zle(s,o,e))}return r}class Hu extends Wg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r0 extends Wg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class s0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Qle(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ad(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=UU();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=QU(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),le())}isEqual(e){return this.batchId===e.batchId&&Pu(this.mutations,e.mutations,(t,r)=>YU(t,r))&&Pu(this.baseMutations,e.baseMutations,(t,r)=>YU(t,r))}}class o0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){j(e.mutations.length===r.length);let i=jle;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new o0(e,t,r,i)}}class a0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jle{constructor(e,t){this.count=e,this.unchangedNames=t}}var Et,be;function t$(n){if(void 0===n)return ht("GRPC error has no .code"),E.UNKNOWN;switch(n){case Et.OK:return E.OK;case Et.CANCELLED:return E.CANCELLED;case Et.UNKNOWN:return E.UNKNOWN;case Et.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case Et.INTERNAL:return E.INTERNAL;case Et.UNAVAILABLE:return E.UNAVAILABLE;case Et.UNAUTHENTICATED:return E.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case Et.NOT_FOUND:return E.NOT_FOUND;case Et.ALREADY_EXISTS:return E.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return E.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case Et.ABORTED:return E.ABORTED;case Et.OUT_OF_RANGE:return E.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return E.UNIMPLEMENTED;case Et.DATA_LOSS:return E.DATA_LOSS;default:return F()}}(be=Et||(Et={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";class u0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Kg}static getOrCreateInstance(){return null===Kg&&(Kg=new u0),Kg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Kg=null;const Zle=new Ru([4294967295,4294967295],0);function r$(n){const e=function n$(){return new TextEncoder}().encode(n),t=new Kue;return t.update(e),new Uint8Array(t.digest())}function i$(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ru([t,r],0),new Ru([i,s],0)]}class l0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Md(`Invalid padding: ${t}`);if(r<0)throw new Md(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Md(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Md(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ru.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Ru.fromNumber(r)));return 1===i.compare(Zle)&&(i=new Ru([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=r$(e),[r,i]=i$(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);if(!this.At(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new l0(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.It)return;const t=r$(e),[r,i]=i$(t);for(let s=0;s<this.hashCount;s++){const o=this.Et(r,i,s);this.Rt(o)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Md extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xd{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Nd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xd(H.min(),i,new Ue(ne),Gn(),le())}}class Nd{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Nd(r,t,le(),le(),le())}}class Qg{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class s${constructor(e,t){this.targetId=e,this.Vt=t}}class o${constructor(e,t,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class a${constructor(){this.St=0,this.Dt=l$(),this.Ct=xt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=le(),t=le(),r=le();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:F()}}),new Nd(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=l$()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ece{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Gn(),this.zt=u$(),this.Wt=new Ue(ne)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:F()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const o=s.target;if($g(o))if(0===i){const a=new x(o.path);this.Yt(r,a,ze.newNoDocument(a,H.min()))}else j(1===i);else{const a=this.ie(r);if(a!==i){const u=this.re(e,a);0!==u&&(this.ee(r),this.Wt=this.Wt.insert(r,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=u0.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(l,c,d){var h,f,p,g,m,_;const b={localCacheCount:c,existenceFilterCount:d.count},v=d.unchangedNames;return v&&(b.bloomFilter={applied:0===l,hashCount:null!==(h=v?.hashCount)&&void 0!==h?h:0,bitmapLength:null!==(g=null===(p=null===(f=v?.bits)||void 0===f?void 0:f.bitmap)||void 0===p?void 0:p.length)&&void 0!==g?g:0,padding:null!==(_=null===(m=v?.bits)||void 0===m?void 0:m.padding)&&void 0!==_?_:0}),b}(u,a,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let u,l;try{u=Xi(s).toUint8Array()}catch(c){if(c instanceof pU)return Hr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw c}try{l=new l0(u,o,a)}catch(c){return Hr(c instanceof Md?"BloomFilter error: ":"Applying bloom filter failed: ",c),1}return 0===l.It?1:i!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.vt(a)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&$g(a.target)){const u=new x(a.target.path);null!==this.jt.get(u)||this.ae(o,u)||this.Yt(o,u,ze.newNoDocument(u,e))}s.Mt&&(t.set(o,s.Ot()),s.Ft())}});let r=le();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.se(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const i=new xd(e,t,this.Wt,this.jt,r);return this.jt=Gn(),this.zt=u$(),this.Wt=new Ue(ne),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new a$,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ge(ne),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||S("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new a$),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function u$(){return new Ue(x.comparator)}function l$(){return new Ue(x.comparator)}const tce=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),nce=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),rce=(()=>({and:"AND",or:"OR"}))();class ice{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function c0(n,e){return n.useProto3Json||md(e)?e:{value:e}}function Gu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c$(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sce(n,e){return Gu(n,e.toTimestamp())}function pt(n){return j(!!n),H.fromTimestamp(function(e){const t=xs(e);return new tt(t.seconds,t.nanos)}(n))}function d0(n,e){return(t=n,new Ee(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function d$(n){const e=Ee.fromString(n);return j(w$(e)),e}function Rd(n,e){return d0(n.databaseId,e.path)}function gi(n,e){const t=d$(e);if(t.get(1)!==n.databaseId.projectId)throw new C(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new C(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new x(f$(t))}function h0(n,e){return d0(n.databaseId,e)}function kd(n){return new Ee(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function f$(n){return j(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function p$(n,e,t){return{name:Rd(n,e),fields:t.value.mapValue.fields}}function m$(n,e){return{documents:[h0(n,e.path)]}}function p0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=h0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=h0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return v$(Ne.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(l=>{return{field:Os((c=l).field),direction:cce(c.dir)};var c})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=c0(n,e.limit);var a,u;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),t}function y$(n){let e=function h$(n){const e=d$(n);return 4===e.length?Ee.emptyPath():f$(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){j(1===r);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=function(c){const d=_$(c);return d instanceof Ne&&QC(d)?d.getFilters():[d]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(c=>{return new Lu(zu((d=c).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;t.limit&&(a=function(c){let d;return d="object"==typeof c?c.value:c,md(d)?null:d}(t.limit));let u=null;var c;t.startAt&&(u=new Ps((c=t.startAt).values||[],!!c.before));let l=null;return t.endAt&&(l=function(c){return new Ps(c.values||[],!c.before)}(t.endAt)),function kU(n,e,t,r,i,s,o,a){return new Ji(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",u,l)}function _$(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zu(e.unaryFilter.field);return ye.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=zu(e.unaryFilter.field);return ye.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zu(e.unaryFilter.field);return ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=zu(e.unaryFilter.field);return ye.create(s,"!=",{nullValue:"NULL_VALUE"});default:return F()}}(n):void 0!==n.fieldFilter?ye.create(zu((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return F()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Ne.create(e.compositeFilter.filters.map(t=>_$(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return F()}}(e.compositeFilter.op))}(n):F();var e}function cce(n){return tce[n]}function dce(n){return nce[n]}function hce(n){return rce[n]}function Os(n){return{fieldPath:n.canonicalString()}}function zu(n){return ft.fromServerFormat(n.fieldPath)}function v$(n){return n instanceof ye?function(e){if("=="===e.op){if(yU(e.value))return{unaryFilter:{field:Os(e.field),op:"IS_NAN"}};if(mU(e.value))return{unaryFilter:{field:Os(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(yU(e.value))return{unaryFilter:{field:Os(e.field),op:"IS_NOT_NAN"}};if(mU(e.value))return{unaryFilter:{field:Os(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(e.field),op:dce(e.op),value:e.value}}}(n):n instanceof Ne?function(e){const t=e.getFilters().map(r=>v$(r));return 1===t.length?t[0]:{compositeFilter:{op:hce(e.op),filters:t}}}(n):F()}function fce(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function w$(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ts{constructor(e,t,r,i,s=H.min(),o=H.min(),a=xt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class E${constructor(e){this.fe=e}}function g0(n){const e=y$({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Gg(e,e.limit,"L"):e}class Qo{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ut(e.integerValue));else if("doubleValue"in e){const r=ut(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),yd(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Xi(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?_U(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):F()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),x.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Qo.Ve=new Qo;class bce{constructor(){this.rn=new E0}addToCollectionParentIndex(e,t){return this.rn.add(t),w.resolve()}getCollectionParents(e,t){return w.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return w.resolve()}deleteFieldIndex(e,t){return w.resolve()}getDocumentsMatchingTarget(e,t){return w.resolve(null)}getIndexType(e,t){return w.resolve(0)}getFieldIndexes(e,t){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,t){return w.resolve(ir.min())}getMinOffsetFromCollectionGroup(e,t){return w.resolve(ir.min())}updateCollectionGroup(e,t,r){return w.resolve()}updateIndexEntries(e,t){return w.resolve()}}class E0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ge(Ee.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Ee.comparator)).toArray()}}class fn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);class Xo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Xo(0)}static Mn(){return new Xo(-1)}}class Ace{constructor(){this.changes=new Zi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?w.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Nce{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class W${constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Ad(r.mutation,i,Hn.empty(),tt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=le()){const i=pi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Dd();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=pi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,le()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Gn();const o=Cd(),a=Cd();return t.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(void 0===c||c.mutation instanceof es)?s=s.insert(l.key,l):void 0!==c?(o.set(l.key,c.mutation.getFieldMask()),Ad(c.mutation,l,c.mutation.getFieldMask(),tt.now())):o.set(l.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),t.forEach((l,c)=>{var d;return a.set(l,new Nce(c,null!==(d=o.get(l))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Cd();let i=new Ue((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let c=r.get(u)||Hn.empty();c=a.applyToLocalView(l,c),r.set(u,c);const d=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,d=UU();c.forEach(h=>{if(!s.has(h)){const f=QU(t.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return w.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return x.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function ZC(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):w.resolve(pi());let a=-1,u=s;return o.next(l=>w.forEach(l,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?w.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{u=u.insert(c,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,le())).next(c=>({batchId:a,changes:BU(c)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new x(t)).next(r=>{let i=Dd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Dd();return this.indexManager.getCollectionParents(e,i).next(o=>w.forEach(o,a=>{const u=(l=t,c=a.child(i),new Ji(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(l=>{l.forEach((c,d)=>{s=s.insert(c,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((a,u)=>{const l=u.getKey();null===s.get(l)&&(s=s.insert(l,ze.newInvalidDocument(l)))});let o=Dd();return s.forEach((a,u)=>{const l=i.get(a);void 0!==l&&Ad(l.mutation,u,Hn.empty(),tt.now()),Td(t,u)&&(o=o.insert(a,u))}),o})}}class Rce{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return w.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:pt(r.createTime)}),w.resolve()}getNamedQuery(e,t){return w.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:g0(r.bundledQuery),readTime:pt(r.readTime)}),w.resolve();var r}}class kce{constructor(){this.overlays=new Ue(x.comparator),this.ls=new Map}getOverlay(e,t){return w.resolve(this.overlays.get(t))}getOverlays(e,t){const r=pi();return w.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),w.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),w.resolve()}getOverlaysForCollection(e,t,r){const i=pi(),s=t.length+1,o=new x(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return w.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ue((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let c=s.get(l.largestBatchId);null===c&&(c=pi(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=pi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return w.resolve(a)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new a0(t,r));let s=this.ls.get(t);void 0===s&&(s=le(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class b0{constructor(){this.fs=new Ge(Bt.ds),this.ws=new Ge(Bt._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Bt(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Bt(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new x(new Ee([])),r=new Bt(t,e),i=new Bt(t,e+1),s=[];return this.ws.forEachInRange([r,i],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new x(new Ee([])),r=new Bt(t,e),i=new Bt(t,e+1);let s=le();return this.ws.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Bt(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Bt{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return x.comparator(e.key,t.key)||ne(e.As,t.As)}static _s(e,t){return ne(e.As,t.As)||x.comparator(e.key,t.key)}}class Pce{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ge(Bt.ds)}checkEmpty(e){return w.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const o=new s0(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new Bt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,t){return w.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return w.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Bt(t,0),i=new Bt(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],o=>{const a=this.Ps(o.As);s.push(a)}),w.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ge(ne);return t.forEach(i=>{const s=new Bt(i,0),o=new Bt(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{r=r.add(a.As)})}),w.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;x.isDocumentKey(s)||(s=s.child(""));const o=new Bt(new x(s),0);let a=new Ge(ne);return this.Rs.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.As)),!0)},o),w.resolve(this.Vs(a))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){j(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return w.forEach(t.mutations,i=>{const s=new Bt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Bt(t,0),i=this.Rs.firstAfterOrEqual(r);return w.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return w.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Oce{constructor(e){this.Ds=e,this.docs=new Ue(x.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return w.resolve(r?r.document.mutableCopy():ze.newInvalidDocument(t))}getEntries(e,t){let r=Gn();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ze.newInvalidDocument(i))}),w.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Gn();const o=t.path,a=new x(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||jC(tU(c),r)<=0||(i.has(c.key)||Td(t,c))&&(s=s.insert(c.key,c.mutableCopy()))}return w.resolve(s)}getAllFromCollectionGroup(e,t,r,i){F()}Cs(e,t){return w.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Fce(this)}getSize(e){return w.resolve(this.size)}}class Fce extends Ace{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),w.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Lce{constructor(e){this.persistence=e,this.xs=new Zi(t=>jo(t),bd),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Ns=0,this.ks=new b0,this.targetCount=0,this.Ms=Xo.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),w.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Xo(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,w.resolve()}updateTargetData(e,t){return this.Fn(t),w.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),w.waitFor(s).next(()=>i)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return w.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),w.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),w.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),w.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return w.resolve(r)}containsKey(e,t){return w.resolve(this.ks.containsKey(t))}}class I0{constructor(e,t){this.$s={},this.overlays={},this.Os=new sr(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Lce(this),this.indexManager=new bce,this.remoteDocumentCache=new Oce(r=>this.referenceDelegate.Ls(r)),this.serializer=new E$(t),this.qs=new Rce(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kce,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new Pce(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){S("MemoryPersistence","Starting transaction:",e);const i=new Vce(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return w.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Vce extends sle{constructor(e){super(),this.currentSequenceNumber=e}}class im{constructor(e){this.persistence=e,this.Qs=new b0,this.js=null}static zs(e){return new im(e)}get Ws(){if(this.js)return this.js;throw F()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),w.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),w.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),w.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Ws,r=>{const i=x.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,H.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return w.or([()=>w.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class S0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=le(),i=le();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new S0(e,t.fromCache,r,i)}}class Q${constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(PU(t))return w.resolve(null);let r=xn(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Gg(t,null,"F"),r=xn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=le(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.ji(t,a);return this.zi(t,l,o,u.readTime)?this.Ki(e,Gg(t,null,"F")):this.Wi(e,l,t,u)}))})))}Gi(e,t,r,i){return PU(t)||i.isEqual(H.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const o=this.ji(t,s);return this.zi(t,o,r,i)?this.Qi(e,t):(BC()<=_e.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),t0(t)),this.Wi(e,o,t,function eU(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=H.fromTimestamp(1e9===r?new tt(t+1,0):new tt(t,r));return new ir(i,x.empty(),e)}(i,-1)))})}ji(e,t){let r=new Ge(LU(e));return t.forEach((i,s)=>{Td(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return BC()<=_e.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",t0(t)),this.Ui.getDocumentsMatchingQuery(e,t,ir.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Uce{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Ue(ne),this.Yi=new Zi(s=>jo(s),bd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W$(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function X$(n,e){return A0.apply(this,arguments)}function A0(){return A0=y(function*(n,e){const t=N(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=le();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return t.localDocuments.getDocuments(r,u).next(l=>({er:l,removedBatchIds:o,addedBatchIds:a}))})})}),A0.apply(this,arguments)}function J$(n){const e=N(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Hce(n,e){const t=N(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qu(n,e,t){return M0.apply(this,arguments)}function M0(){return M0=y(function*(n,e,t){const r=N(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!As(o))throw o;S("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),M0.apply(this,arguments)}function am(n,e,t){const r=N(n);let i=H.min(),s=le();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,l){const c=N(a),d=c.Yi.get(l);return void 0!==d?w.resolve(c.Ji.get(d)):c.Bs.getTargetData(u,l)}(r,o,xn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,t?i:H.min(),t?s:le())).next(a=>(function nj(n,e,t){let r=n.Xi.get(e)||H.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}(r,function FU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ir:s})))}class P0{constructor(){this.activeTargetIds=function n0(){return Gle}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sj{constructor(){this.Hr=new P0,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new P0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qce{Yr(e){}shutdown(){}}class oj{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let cm=null;function F0(){return null===cm?cm=268435456+Math.round(2147483648*Math.random()):cm++,"0x"+cm.toString(16)}const Wce={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kce{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const pn="WebChannelConnection";class Qce extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const o=F0(),a=this.To(e,t);S("RestConnection",`Sending RPC '${e}' ${o}:`,a,r);const u={};return this.Eo(u,i,s),this.Ao(e,a,u,r).then(l=>(S("RestConnection",`Received RPC '${e}' ${o}: `,l),l),l=>{throw Hr("RestConnection",`RPC '${e}' ${o} failed with error: `,l,"url: ",a,"request:",r),l})}vo(e,t,r,i,s,o){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ku,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${Wce[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=F0();return new Promise((o,a)=>{const u=new Wue;u.setWithCredentials(!0),u.listenOnce(Gue.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case VC.NO_ERROR:const c=u.getResponseJson();S(pn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case VC.TIMEOUT:S(pn,`RPC '${e}' ${s} timed out`),a(new C(E.DEADLINE_EXCEEDED,"Request time out"));break;case VC.HTTP_ERROR:const d=u.getStatus();if(S(pn,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(m)>=0?m:E.UNKNOWN}(f.status);a(new C(p,f.message))}else a(new C(E.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new C(E.UNAVAILABLE,"Connection failed."));break;default:F()}}finally{S(pn,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);S(pn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Ro(e,t,r){const i=F0(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jue(),a=Hue(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new que({})),this.Eo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const c=s.join("");S(pn,`Creating RPC '${e}' stream ${i}: ${c}`,u);const d=o.createWebChannel(c,u);let h=!1,f=!1;const p=new Kce({ro:m=>{f?S(pn,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(S(pn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),S(pn,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},oo:()=>d.close()}),g=(m,_,b)=>{m.listen(_,v=>{try{b(v)}catch(A){setTimeout(()=>{throw A},0)}})};return g(d,xg.EventType.OPEN,()=>{f||S(pn,`RPC '${e}' stream ${i} transport opened.`)}),g(d,xg.EventType.CLOSE,()=>{f||(f=!0,S(pn,`RPC '${e}' stream ${i} transport closed`),p.wo())}),g(d,xg.EventType.ERROR,m=>{f||(f=!0,Hr(pn,`RPC '${e}' stream ${i} transport errored:`,m),p.wo(new C(E.UNAVAILABLE,"The operation could not be completed")))}),g(d,xg.EventType.MESSAGE,m=>{var _;if(!f){const b=m.data[0];j(!!b);const A=b.error||(null===(_=b[0])||void 0===_?void 0:_.error);if(A){S(pn,`RPC '${e}' stream ${i} received error:`,A);const L=A.status;let V=function(Nt){const mn=Et[Nt];if(void 0!==mn)return t$(mn)}(L),Ie=A.message;void 0===V&&(V=E.INTERNAL,Ie="Unknown error status: "+L+" with message "+A.message),f=!0,p.wo(new C(V,Ie)),d.close()}else S(pn,`RPC '${e}' stream ${i} received:`,b),p._o(b)}}),g(a,zue.STAT_EVENT,m=>{m.stat===KB.PROXY?S(pn,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===KB.NOPROXY&&S(pn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function dm(){return typeof document<"u"?document:null}function Hd(n){return new ice(n,!0)}class L0{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&S("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class uj{constructor(e,t,r,i,s,o,a,u){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new L0(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return y(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return y(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return y(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===E.RESOURCE_EXHAUSTED?(ht(t.toString()),ht("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===E.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new C(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No(y(function*(){e.state=0,e.start()}))}tu(e){return S("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yce extends uj{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function ace(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:F(),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(j(void 0===l||"string"==typeof l),xt.fromBase64String(l||"")):(j(void 0===l||l instanceof Uint8Array),xt.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const l=void 0===u.code?E.UNKNOWN:t$(u.code);return new C(l,u.message||"")}(o);t=new o$(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=gi(n,r.document.name),s=pt(r.document.updateTime),o=r.document.createTime?pt(r.document.createTime):H.min(),a=new Zt({mapValue:{fields:r.document.fields}}),u=ze.newFoundDocument(i,s,o,a);t=new Qg(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=gi(n,r.document),s=r.readTime?pt(r.readTime):H.min(),o=ze.newNoDocument(i,s);t=new Qg([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=gi(n,r.document);t=new Qg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return F();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new Jle(i,s);t=new s$(r.targetId,o)}}var u;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return H.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?H.min():s.readTime?pt(s.readTime):H.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=kd(this.serializer),t.addTarget=function(i,s){let o;const a=s.target;if(o=$g(a)?{documents:m$(i,a)}:{query:p0(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=c$(i,s.resumeToken);const u=c0(i,s.expectedCount);null!==u&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(H.min())>0){o.readTime=Gu(i,s.snapshotVersion.toTimestamp());const u=c0(i,s.expectedCount);null!==u&&(o.expectedCount=u)}return o}(this.serializer,e);const r=function lce(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return F()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=kd(this.serializer),t.removeTarget=e,this.Wo(t)}}class Xce extends uj{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(j(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function uce(n,e){return n&&n.length>0?(j(void 0!==e),n.map(t=>function(r,i){let s=pt(r.updateTime?r.updateTime:i);return s.isEqual(H.min())&&(s=pt(i)),new Kle(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=pt(e.commitTime);return this.listener.cu(r,t)}return j(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=kd(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function Pd(n,e){let t;if(e instanceof ju)t={update:p$(n,e.key,e.value)};else if(e instanceof Hu)t={delete:Rd(n,e.key)};else if(e instanceof es)t={update:p$(n,e.key,e.data),updateMask:fce(e.fieldMask)};else{if(!(e instanceof r0))return F();t={verify:Rd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Uu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Go)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof zo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof $u)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw F()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:sce(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:F()),t;var i}(this.serializer,r))};this.Wo(t)}}class Jce extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new C(E.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new C(E.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new C(E.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class ede{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ht(t),this.mu=!1):S("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class tde{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(a=>{r.enqueueAndForget(y(function*(){var u;Bs(o)&&(S("RemoteStore","Restarting streams for network reachability change."),yield(u=y(function*(l){const c=N(l);c.vu.add(4),yield Yu(c),c.bu.set("Unknown"),c.vu.delete(4),yield Gd(c)}),function(l){return u.apply(this,arguments)})(o))}))}),this.bu=new ede(r,i)}}function Gd(n){return B0.apply(this,arguments)}function B0(){return B0=y(function*(n){if(Bs(n))for(const e of n.Ru)yield e(!0)}),B0.apply(this,arguments)}function Yu(n){return U0.apply(this,arguments)}function U0(){return U0=y(function*(n){for(const e of n.Ru)yield e(!1)}),U0.apply(this,arguments)}function hm(n,e){const t=N(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),H0(t)?j0(t):Ju(t).Ko()&&$0(t,e))}function zd(n,e){const t=N(n),r=Ju(t);t.Au.delete(e),r.Ko()&&lj(t,e),0===t.Au.size&&(r.Ko()?r.jo():Bs(t)&&t.bu.set("Unknown"))}function $0(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ju(n).su(e)}function lj(n,e){n.Vu.qt(e),Ju(n).iu(e)}function j0(n){n.Vu=new ece({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Ju(n).start(),n.bu.gu()}function H0(n){return Bs(n)&&!Ju(n).Uo()&&n.Au.size>0}function Bs(n){return 0===N(n).vu.size}function cj(n){n.Vu=void 0}function nde(n){return G0.apply(this,arguments)}function G0(){return G0=y(function*(n){n.Au.forEach((e,t)=>{$0(n,e)})}),G0.apply(this,arguments)}function rde(n,e){return z0.apply(this,arguments)}function z0(){return z0=y(function*(n,e){cj(n),H0(n)?(n.bu.Iu(e),j0(n)):n.bu.set("Unknown")}),z0.apply(this,arguments)}function ide(n,e,t){return q0.apply(this,arguments)}function q0(){return q0=y(function*(n,e,t){if(n.bu.set("Online"),e instanceof o$&&2===e.state&&e.cause)try{yield(r=y(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.Au.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Au.delete(a),i.Vu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){S("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fm(n,r)}else if(e instanceof Qg?n.Vu.Ht(e):e instanceof s$?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(H.min()))try{const r=yield J$(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.Vu.ce(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const l=i.Au.get(u);l&&i.Au.set(u,l.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,u)=>{const l=i.Au.get(a);if(!l)return;i.Au.set(a,l.withResumeToken(xt.EMPTY_BYTE_STRING,l.snapshotVersion)),lj(i,a);const c=new ts(l.target,a,u,l.sequenceNumber);$0(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){S("RemoteStore","Failed to raise snapshot:",r),yield fm(n,r)}var r}),q0.apply(this,arguments)}function fm(n,e,t){return W0.apply(this,arguments)}function W0(){return W0=y(function*(n,e,t){if(!As(e))throw e;n.vu.add(1),yield Yu(n),n.bu.set("Offline"),t||(t=()=>J$(n.localStore)),n.asyncQueue.enqueueRetryable(y(function*(){S("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Gd(n)}))}),W0.apply(this,arguments)}function dj(n,e){return e().catch(t=>fm(n,t,e))}function Xu(n){return K0.apply(this,arguments)}function K0(){return K0=y(function*(n){const e=N(n),t=Us(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;sde(e);)try{const i=yield Hce(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,ode(e,i)}catch(i){yield fm(e,i)}hj(e)&&fj(e)}),K0.apply(this,arguments)}function sde(n){return Bs(n)&&n.Eu.length<10}function ode(n,e){n.Eu.push(e);const t=Us(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function hj(n){return Bs(n)&&!Us(n).Uo()&&n.Eu.length>0}function fj(n){Us(n).start()}function ade(n){return Q0.apply(this,arguments)}function Q0(){return Q0=y(function*(n){Us(n).hu()}),Q0.apply(this,arguments)}function ude(n){return Y0.apply(this,arguments)}function Y0(){return Y0=y(function*(n){const e=Us(n);for(const t of n.Eu)e.uu(t.mutations)}),Y0.apply(this,arguments)}function lde(n,e,t){return X0.apply(this,arguments)}function X0(){return X0=y(function*(n,e,t){const r=n.Eu.shift(),i=o0.from(r,e,t);yield dj(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Xu(n)}),X0.apply(this,arguments)}function cde(n,e){return J0.apply(this,arguments)}function J0(){return J0=y(function*(n,e){var t;e&&Us(n).ou&&(yield(t=y(function*(r,i){if(function e$(n){switch(n){default:return F();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}(s=i.code)&&s!==E.ABORTED){const o=r.Eu.shift();Us(r).Qo(),yield dj(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Xu(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),hj(n)&&fj(n)}),J0.apply(this,arguments)}function pj(n,e){return Z0.apply(this,arguments)}function Z0(){return Z0=y(function*(n,e){const t=N(n);t.asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials");const r=Bs(t);t.vu.add(3),yield Yu(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Gd(t)}),Z0.apply(this,arguments)}function tS(){return tS=y(function*(n,e){const t=N(n);e?(t.vu.delete(2),yield Gd(t)):e||(t.vu.add(2),yield Yu(t),t.bu.set("Unknown"))}),tS.apply(this,arguments)}function Ju(n){return n.Su||(n.Su=function(e,t,r){const i=N(e);return i.fu(),new Yce(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:nde.bind(null,n),ao:rde.bind(null,n),nu:ide.bind(null,n)}),n.Ru.push(function(){var e=y(function*(t){t?(n.Su.Qo(),H0(n)?j0(n):n.bu.set("Unknown")):(yield n.Su.stop(),cj(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Us(n){return n.Du||(n.Du=function(e,t,r){const i=N(e);return i.fu(),new Xce(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:ade.bind(null,n),ao:cde.bind(null,n),au:ude.bind(null,n),cu:lde.bind(null,n)}),n.Ru.push(function(){var e=y(function*(t){t?(n.Du.Qo(),yield Xu(n)):(yield n.Du.stop(),n.Eu.length>0&&(S("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class nS{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new nS(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new C(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zu(n,e){if(ht("AsyncQueue",`${e}: ${n}`),As(n))return new C(E.UNAVAILABLE,`${e}: ${n}`);throw n}class el{constructor(e){this.comparator=e?(t,r)=>e(t,r)||x.comparator(t.key,r.key):(t,r)=>x.comparator(t.key,r.key),this.keyedMap=Dd(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new el(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof el)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new el;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class gj{constructor(){this.Cu=new Ue(x.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):F():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class tl{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new tl(e,t,el.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class dde{constructor(){this.Nu=void 0,this.listeners=[]}}class hde{constructor(){this.queries=new Zi(e=>OU(e),Id),this.onlineState="Unknown",this.ku=new Set}}function iS(){return iS=y(function*(n,e){const t=N(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new dde),i)try{s.Nu=yield t.onListen(r)}catch(o){const a=Zu(o,`Initialization of query '${t0(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&aS(t)}),iS.apply(this,arguments)}function oS(){return oS=y(function*(n,e){const t=N(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),oS.apply(this,arguments)}function fde(n,e){const t=N(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.$u(i)&&(r=!0);o.Nu=i}}r&&aS(t)}function pde(n,e,t){const r=N(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function aS(n){n.ku.forEach(e=>{e.next()})}class uS{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class _j{constructor(e){this.key=e}}class vj{constructor(e){this.key=e}}class wj{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=le(),this.mutatedKeys=le(),this.tc=LU(e),this.ec=new el(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new gj,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=Td(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),m=!0):this.rc(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.tc(f,u)>0||l&&this.tc(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||l)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ec:o,ic:r,zi:a,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((l,c)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F()}};return f(d)-f(h)}(l.type,c.type)||this.tc(l.doc,c.doc)),this.oc(r);const o=t?this.uc():[],a=0===this.Zu.size&&this.current?1:0,u=a!==this.Xu;return this.Xu=a,0!==s.length||u?{snapshot:new tl(this.query,e.ec,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new gj,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=le(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new vj(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new _j(r))}),t}hc(e){this.Yu=e.ir,this.Zu=le();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return tl.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class yde{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _de{constructor(e){this.key=e,this.fc=!1}}class vde{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Zi(a=>OU(a),Id),this._c=new Map,this.mc=new Set,this.gc=new Ue(x.comparator),this.yc=new Map,this.Ic=new b0,this.Tc={},this.Ec=new Map,this.Ac=Xo.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function wde(n,e){return lS.apply(this,arguments)}function lS(){return lS=y(function*(n,e){const t=function RS(n){const e=N(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ej.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ide.bind(null,e),e.dc.nu=fde.bind(null,e.eventManager),e.dc.Pc=pde.bind(null,e.eventManager),e}(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const o=yield function Ku(n,e){const t=N(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,w.resolve(i)):t.Bs.allocateTargetId(r).next(o=>(i=new ts(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,xn(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function cS(n,e,t,r,i){return dS.apply(this,arguments)}(t,e,r,"current"===a,o.resumeToken),t.isPrimaryClient&&hm(t.remoteStore,o)}return i}),lS.apply(this,arguments)}function dS(){return dS=y(function*(n,e,t,r,i){n.Rc=(d,h,f)=>{return(p=y(function*(g,m,_,b){let v=m.view.sc(_);v.zi&&(v=yield am(g.localStore,m.query,!1).then(({documents:V})=>m.view.sc(V,v)));const A=b&&b.targetChanges.get(m.targetId),L=m.view.applyChanges(v,g.isPrimaryClient,A);return ES(g,m.targetId,L.cc),L.snapshot}),function(g,m,_,b){return p.apply(this,arguments)})(n,d,h,f);var p};const s=yield am(n.localStore,e,!0),o=new wj(e,s.ir),a=o.sc(s.documents),u=Nd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,u);ES(n,t,l.cc);const c=new yde(e,t,o);return n.wc.set(e,c),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),l.snapshot}),dS.apply(this,arguments)}function Ede(n,e){return hS.apply(this,arguments)}function hS(){return hS=y(function*(n,e){const t=N(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!Id(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Qu(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),zd(t.remoteStore,r.targetId),nl(t,r.targetId)}).catch(Ss))):(nl(t,r.targetId),yield Qu(t.localStore,r.targetId,!0))}),hS.apply(this,arguments)}function fS(){return fS=y(function*(n,e,t){const r=function kS(n){const e=N(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tde.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dde.bind(null,e),e}(n);try{const i=yield function(s,o){const a=N(s),u=tt.now(),l=o.reduce((h,f)=>h.add(f.key),le());let c,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=Gn(),p=le();return a.Zi.getEntries(h,l).next(g=>{f=g,f.forEach((m,_)=>{_.isValidDocument()||(p=p.add(m))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{c=g;const m=[];for(const _ of o){const b=Yle(_,c.get(_.key).overlayedDocument);null!=b&&m.push(new es(_.key,b,EU(b.value.mapValue),Ye.exists(!0)))}return a.mutationQueue.addMutationBatch(h,u,m,o)}).next(g=>{d=g;const m=g.applyToLocalDocumentSet(c,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,m)})}).then(()=>({batchId:d.batchId,changes:BU(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.Tc[s.currentUser.toKey()];u||(u=new Ue(ne)),u=u.insert(o,a),s.Tc[s.currentUser.toKey()]=u}(r,i.batchId,t),yield ns(r,i.changes),yield Xu(r.remoteStore)}catch(i){const s=Zu(i,"Failed to persist write");t.reject(s)}}),fS.apply(this,arguments)}function Ej(n,e){return pS.apply(this,arguments)}function pS(){return pS=y(function*(n,e){const t=N(n);try{const r=yield function jce(n,e){const t=N(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(t.Bs.removeMatchingKeys(s,c.removedDocuments,d).next(()=>t.Bs.addMatchingKeys(s,c.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,m;null!==e.targetMismatches.get(d)?f=f.withResumeToken(xt.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),g=f,m=c,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0)&&a.push(t.Bs.updateTargetData(s,f))});let u=Gn(),l=le();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(function Z$(n,e,t){let r=le(),i=le();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Gn();return t.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(H.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):S("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{nr:o,sr:i}})}(s,o,e.documentUpdates).next(c=>{u=c.nr,l=c.sr})),!r.isEqual(H.min())){const c=t.Bs.getLastRemoteSnapshotVersion(s).next(d=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return w.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.yc.get(s);o&&(j(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?j(o.fc):i.removedDocuments.size>0&&(j(o.fc),o.fc=!1))}),yield ns(t,r,e)}catch(r){yield Ss(r)}}),pS.apply(this,arguments)}function bj(n,e,t){const r=N(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=N(s);a.onlineState=o;let u=!1;a.queries.forEach((l,c)=>{for(const d of c.listeners)d.Mu(o)&&(u=!0)}),u&&aS(a)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ide(n,e,t){return gS.apply(this,arguments)}function gS(){return gS=y(function*(n,e,t){const r=N(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let o=new Ue(x.comparator);o=o.insert(s,ze.newNoDocument(s,H.min()));const a=le().add(s),u=new xd(H.min(),new Map,new Ue(ne),o,a);yield Ej(r,u),r.gc=r.gc.remove(s),r.yc.delete(e),bS(r)}else yield Qu(r.localStore,e,!1).then(()=>nl(r,e,t)).catch(Ss)}),gS.apply(this,arguments)}function Tde(n,e){return mS.apply(this,arguments)}function mS(){return mS=y(function*(n,e){const t=N(n),r=e.batch.batchId;try{const i=yield function $ce(n,e){const t=N(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,l){const c=u.batch,d=c.keys();let h=w.resolve();return d.forEach(f=>{h=h.next(()=>l.getEntry(a,f)).next(p=>{const g=u.docVersions.get(f);j(null!==g),p.version.compareTo(g)<0&&(c.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),l.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=le();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);wS(t,r,null),vS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ns(t,i)}catch(i){yield Ss(i)}}),mS.apply(this,arguments)}function Dde(n,e,t){return yS.apply(this,arguments)}function yS(){return yS=y(function*(n,e,t){const r=N(n);try{const i=yield function(s,o){const a=N(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return a.mutationQueue.lookupMutationBatch(u,o).next(c=>(j(null!==c),l=c.keys(),a.mutationQueue.removeMutationBatch(u,c))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>a.localDocuments.getDocuments(u,l))})}(r.localStore,e);wS(r,e,t),vS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ns(r,i)}catch(i){yield Ss(i)}}),yS.apply(this,arguments)}function vS(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function wS(n,e,t){const r=N(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function nl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Ij(n,r)})}function Ij(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(zd(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),bS(n))}function ES(n,e,t){for(const r of t)r instanceof _j?(n.Ic.addReference(r.key,e),Sde(n,r)):r instanceof vj?(S("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Ij(n,r.key)):F()}function Sde(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(S("SyncEngine","New document in limbo: "+t),n.mc.add(r),bS(n))}function bS(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new x(Ee.fromString(e)),r=n.Ac.next();n.yc.set(r,new _de(t)),n.gc=n.gc.insert(t,r),hm(n.remoteStore,new ts(xn(Bu(t.path)),r,"TargetPurposeLimboResolution",sr.ct))}}function ns(n,e,t){return IS.apply(this,arguments)}function IS(){return IS=y(function*(n,e,t){const r=N(n),i=[],s=[],o=[];var a;r.wc.isEmpty()||(r.wc.forEach((a,u)=>{o.push(r.Rc(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);const c=S0.Li(u.targetId,l);s.push(c)}}))}),yield Promise.all(o),r.dc.nu(i),yield(a=y(function*(u,l){const c=N(u);try{yield c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>w.forEach(l,h=>w.forEach(h.Fi,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>w.forEach(h.Bi,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!As(d))throw d;S("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const f=c.Ji.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);c.Ji=c.Ji.insert(h,g)}}}),function(u,l){return a.apply(this,arguments)})(r.localStore,s))}),IS.apply(this,arguments)}function Ade(n,e){return TS.apply(this,arguments)}function TS(){return TS=y(function*(n,e){const t=N(n);if(!t.currentUser.isEqual(e)){S("SyncEngine","User change. New user:",e.toKey());const r=yield X$(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(o=>{o.forEach(a=>{a.reject(new C(E.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ns(t,r.er)}var i}),TS.apply(this,arguments)}function Mde(n,e){const t=N(n),r=t.yc.get(e);if(r&&r.fc)return le().add(r.key);{let i=le();const s=t._c.get(e);if(!s)return i;for(const o of s){const a=t.wc.get(o);i=i.unionWith(a.view.nc)}return i}}class pm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return y(function*(){t.serializer=Hd(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function Y$(n,e,t,r){return new Uce(n,e,t,r)}(this.persistence,new Q$,e.initialUser,this.serializer)}createPersistence(e){return new I0(im.zs,this.serializer)}createSharedClientState(e){return new sj}terminate(){var e=this;return y(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class rl{initialize(e,t){var r=this;return y(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>bj(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Ade.bind(null,r.syncEngine),yield function eS(n,e){return tS.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new hde}createDatastore(e){const t=Hd(e.databaseInfo.databaseId),r=new Qce(e.databaseInfo);return new Jce(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>bj(this.syncEngine,a,0),o=oj.D()?new oj:new qce,new tde(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,a,u,l){const c=new vde(r,i,s,o,a,u);return l&&(c.vc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=y(function*(t){const r=N(t);S("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Yu(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class gm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ht("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class jde{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=JB.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=y(function*(a){S("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(S("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return y(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new C(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(y(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zu(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function mm(n,e){return PS.apply(this,arguments)}function PS(){return PS=y(function*(n,e){n.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=y(function*(s){r.isEqual(s)||(yield X$(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),PS.apply(this,arguments)}function OS(n,e){return FS.apply(this,arguments)}function FS(){return FS=y(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function LS(n){return VS.apply(this,arguments)}(n);S("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>pj(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>pj(e.remoteStore,s)),n._onlineComponents=e}),FS.apply(this,arguments)}function VS(){return VS=y(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){S("FirestoreClient","Using user provided OfflineComponentProvider");try{yield mm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function Mj(n){return"FirebaseError"===n.name?n.code===E.FAILED_PRECONDITION||n.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;Hr("Error using user provided cache. Falling back to memory cache: "+t),yield mm(n,new pm)}}else S("FirestoreClient","Using default OfflineComponentProvider"),yield mm(n,new pm);return n._offlineComponents}),VS.apply(this,arguments)}function ym(n){return BS.apply(this,arguments)}function BS(){return BS=y(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(S("FirestoreClient","Using user provided OnlineComponentProvider"),yield OS(n,n._uninitializedComponentsProvider._online)):(S("FirestoreClient","Using default OnlineComponentProvider"),yield OS(n,new rl))),n._onlineComponents}),BS.apply(this,arguments)}function il(n){return $S.apply(this,arguments)}function $S(){return $S=y(function*(n){const e=yield ym(n),t=e.eventManager;return t.onListen=wde.bind(null,e.syncEngine),t.onUnlisten=Ede.bind(null,e.syncEngine),t}),$S.apply(this,arguments)}function Oj(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Fj=new Map;function jS(n,e,t){if(!t)throw new C(E.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Lj(n){if(!x.isDocumentKey(n))throw new C(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Vj(n){if(x.isDocumentKey(n))throw new C(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vm(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":F()}function ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new C(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vm(n);throw new C(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class Uj{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new C(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new C(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Xde(n,e,t,r){if(!0===e&&!0===r)throw new C(E.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Oj(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new C(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new C(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new C(E.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qd{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uj({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new C(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new C(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uj(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Que;switch(t.type){case"firstParty":return new Zue(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new C(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fj.get(e);t&&(S("ComponentProvider","Removing Datastore"),Fj.delete(e),t.terminate())}(this),Promise.resolve()}}class gt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}}class en{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new en(this.firestore,e,this._query)}}class mi extends en{constructor(e,t,r){super(e,t,Bu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new x(e))}withConverter(e){return new mi(this.firestore,e,this._path)}}function Zde(n,e,...t){if(n=Sn(n),jS("collection","path",e),n instanceof qd){const r=Ee.fromString(e,...t);return Vj(r),new mi(n,null,r)}{if(!(n instanceof gt||n instanceof mi))throw new C(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ee.fromString(e,...t));return Vj(r),new mi(n.firestore,null,r)}}function $j(n,e,...t){if(n=Sn(n),1===arguments.length&&(e=JB.A()),jS("doc","path",e),n instanceof qd){const r=Ee.fromString(e,...t);return Lj(r),new gt(n,null,new x(r))}{if(!(n instanceof gt||n instanceof mi))throw new C(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ee.fromString(e,...t));return Lj(r),new gt(n.firestore,n instanceof mi?n.converter:null,new x(r))}}class ehe{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new L0(this,"async_queue_retry"),this.Xc=()=>{const t=dm();t&&S("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=dm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Mt;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return y(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!As(t))throw t;S("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,ht("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=nS.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&F()}verifyOperationInProgress(){}sa(){var e=this;return y(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function HS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class qe extends qd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ehe,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Hj(this),this._firestoreClient.terminate()}}function nhe(n,e){const r="string"==typeof n?n:e||"(default)",i=function kF(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}("object"==typeof n?n:OF(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=XJ("firestore");s&&function Jde(n,e,t,r={}){var i;const s=(n=ve(n,qd))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Hr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Lt.MOCK_USER;else{a=function ZJ(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[pu(JSON.stringify({alg:"none",type:"JWT"})),pu(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new C(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Lt(l)}n._authCredentials=new Yue(new YB(a,u))}}(i,...s)}return i}function bt(n){return n._firestoreClient||Hj(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Hj(n){var e,t,r;const i=n._freezeSettings(),s=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Mle(n._databaseId,a,n._persistenceKey,(l=i).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Oj(l.experimentalLongPollingOptions),l.useFetchStreams));var a,l;n._firestoreClient=new jde(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zo(xt.fromBase64String(e))}catch(t){throw new C(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zo(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new C(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class GS{constructor(e){this._methodName=e}}class zS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new C(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new C(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}}const ihe=/^__.*__$/;class she{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new es(e,this.data,this.fieldMask,t,this.fieldTransforms):new ju(e,this.data,t,this.fieldTransforms)}}class qj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new es(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F()}}class wm{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new wm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return bm(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Wj(this.ca)&&ihe.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class ohe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hd(e)}ya(e,t,r,i=!1){return new wm({ca:e,methodName:t,ga:r,path:ft.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ol(n){const e=n._freezeSettings(),t=Hd(n._databaseId);return new ohe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qS(n,e,t,r,i,s={}){const o=n.ya(s.merge||s.mergeFields?2:0,e,t,i);KS("Data must be an object, but it was:",o,r);const a=Jj(r,o);let u,l;if(s.merge)u=new Hn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const h=Qd(e,d,t);if(!o.contains(h))throw new C(E.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);eH(c,h)||c.push(h)}u=new Hn(c),l=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,l=o.fieldTransforms;return new she(new Zt(a),u,l)}class Kd extends GS{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kd}}function ea(n,e){if(Zj(n=Sn(n)))return KS("Unsupported field value:",e,n),Jj(n,e);if(n instanceof GS)return function(t,r){if(!Wj(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let a=ea(o,r.wa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=Sn(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return HU(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=tt.fromDate(t);return{timestampValue:Gu(r.serializer,i)}}if(t instanceof tt){const i=new tt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Gu(r.serializer,i)}}if(t instanceof zS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Zo)return{bytesValue:c$(r.serializer,t._byteString)};if(t instanceof gt){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:d0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${vm(t)}`)}(n,e)}function Jj(n,e){const t={};return hU(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(n,(r,i)=>{const s=ea(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Zj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tt||n instanceof zS||n instanceof Zo||n instanceof gt||n instanceof GS)}function KS(n,e,t){if(!Zj(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vm(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Qd(n,e,t){if((e=Sn(e))instanceof sl)return e._internalPath;if("string"==typeof e)return Em(n,e);throw bm("Field path arguments must be of type string or ",n,!1,void 0,t)}const che=new RegExp("[~\\*/\\[\\]]");function Em(n,e,t){if(e.search(che)>=0)throw bm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sl(...e.split("."))._internalPath}catch{throw bm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bm(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new C(E.INVALID_ARGUMENT,a+n+u)}function eH(n,e){return n.some(t=>t.isEqual(e))}class QS{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dhe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Im("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dhe extends QS{data(){return super.data()}}function Im(n,e){return"string"==typeof e?Em(n,e):e instanceof sl?e._internalPath:e._delegate._internalPath}class fhe{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw F()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ms(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new zS(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_d(e));default:return null}}convertTimestamp(e){const t=xs(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ee.fromString(e);j(w$(r));const i=new Uo(r.get(1),r.get(3)),s=new x(r.popFirst(5));return i.isEqual(t)||ht(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class ta{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ul extends QS{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Im("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Sm extends ul{data(e={}){return super.data(e)}}class ll{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sm(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new C(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Sm(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ta(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new Sm(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ta(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,l=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),l=s.indexOf(o.doc.key)),{type:ghe(o.type),doc:a,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ghe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F()}}class $s extends fhe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}function mhe(n,e,t,...r){n=ve(n,gt);const i=ve(n.firestore,qe),s=ol(i);let o;return o="string"==typeof(e=Sn(e))||e instanceof sl?function Yj(n,e,t,r,i,s){const o=n.ya(1,e,t),a=[Qd(e,r,t)],u=[i];if(s.length%2!=0)throw new C(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(Qd(e,s[h])),u.push(s[h+1]);const l=[],c=Zt.empty();for(let h=a.length-1;h>=0;--h)if(!eH(l,a[h])){const f=a[h];let p=u[h];p=Sn(p);const g=o.da(f);if(p instanceof Kd)l.push(f);else{const m=ea(p,g);null!=m&&(l.push(f),c.set(f,m))}}const d=new Hn(l);return new qj(c,d,o.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function Qj(n,e,t,r){const i=n.ya(1,e,t);KS("Data must be an object, but it was:",i,r);const s=[],o=Zt.empty();Ms(r,(u,l)=>{const c=Em(e,u,t);l=Sn(l);const d=i.da(c);if(l instanceof Kd)s.push(c);else{const h=ea(l,d);null!=h&&(s.push(c),o.set(c,h))}});const a=new Hn(s);return new qj(o,a,i.fieldTransforms)}(s,"updateDoc",n._key,e),Xd(i,[o.toMutation(n._key,Ye.exists(!0))])}function yhe(n,e){const t=ve(n.firestore,qe),r=$j(n),i=function XS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return Xd(t,[qS(ol(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ye.exists(!1))]).then(()=>r)}function Xd(n,e){return function(t,r){const i=new Mt;return t.asyncQueue.enqueueAndForget(y(function*(){return function bde(n,e,t){return fS.apply(this,arguments)}(yield function US(n){return ym(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(bt(n),e)}var xhe={includeMetadataChanges:!1};function ZS(n,e){return void 0===e&&(e=xhe),new We(function(t){var r=function _he(n,...e){var t,r,i;n=Sn(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||HS(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(HS(e[o])){const d=e[o];e[o]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,l,c;if(n instanceof gt)l=ve(n.firestore,qe),c=Bu(n._key.path),u={next:d=>{e[o]&&e[o](function JS(n,e,t){const r=t.docs.get(e._key),i=new $s(n);return new ul(n,i,e._key,r,new ta(t.hasPendingWrites,t.fromCache),e.converter)}(l,n,d))},error:e[o+1],complete:e[o+2]};else{const d=ve(n,en);l=ve(d.firestore,qe),c=d._query;const h=new $s(l);u={next:f=>{e[o]&&e[o](new ll(l,h,d,f))},error:e[o+1],complete:e[o+2]},function tH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new C(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(d,h,f,p){const g=new gm(p),m=new uS(h,g,f);return d.asyncQueue.enqueueAndForget(y(function*(){return function rS(n,e){return iS.apply(this,arguments)}(yield il(d),m)})),()=>{g.Dc(),d.asyncQueue.enqueueAndForget(y(function*(){return function sS(n,e){return oS.apply(this,arguments)}(yield il(d),m)}))}}(bt(l),c,a,u)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Lhe(n,e){return void 0===e&&(e={}),function Fhe(n){return ZS(n,{includeMetadataChanges:!0}).pipe(fe(function(e){return e.docs}))}(n).pipe(fe(function(t){return t.map(function(r){return function lH(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(r,e)})}))}class cl{constructor(e){return e}}const fH="firestore",nA=new $("angularfire2.firestore-instances");function Uhe(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new cl(r)}}const $he={provide:class Vhe{constructor(){return EI(fH)}},deps:[[new In,nA]]},jhe={provide:cl,useFactory:function Bhe(n,e){const t=function wI(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(fH,n,e);return t&&new cl(t)},deps:[[new In,nA],Eu]};let Hhe=(()=>{class n{constructor(){vr("angularfire",hI.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({providers:[jhe,$he]}),n})();function Ghe(n,...e){return{ngModule:Hhe,providers:[{provide:nA,useFactory:Uhe(n),multi:!0,deps:[ke,Tn,n2,r2,[new In,cV],[new In,RV],...e]}]}}const pH=Mo(Lhe,!0),zhe=Mo(yhe,!0),rA=Mo(Zde,!0),qhe=Mo($j,!0),Whe=Mo(nhe,!0),Khe=Mo(mhe,!0);var It=(()=>(function(n){n.EASY="easy",n.MEDIUM="medium",n.HARD="hard",n.PERSONALIZED="personalized"}(It||(It={})),It))(),Nn=(()=>(function(n){n.WON="You won!",n.LOSE="Game Over!",n.NONE=""}(Nn||(Nn={})),Nn))();let dl=(()=>{var n;class e{constructor(){this.selectedLevel$=new ln(It.EASY),this.gameStatus$=new ln(Nn.NONE),this.gameConfiguration$=new ln({numberOfMines:1,numberOfSides:9}),this.savedData$=new ln({numberOfMines:1,numberOfSides:9}),this.historyLog$=new ln(null)}getSelectedLevel(){return this.selectedLevel$.asObservable()}setSelectedLevel(r){this.selectedLevel$.next(r)}getGameStatus(){return this.gameStatus$.asObservable()}setGameStatus(r){this.gameStatus$.next(r)}getGameConfiguration(){return this.gameConfiguration$.asObservable()}setGameConfiguration(r){this.gameConfiguration$.next(r)}getSavedData(){return this.savedData$.asObservable()}setSavedData(r){this.savedData$.next(r)}getHistoryLog(){return this.historyLog$.asObservable()}setHistoryLog(r){this.historyLog$.next(r)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),gH=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(D(Mi),D(Jn))},n.\u0275dir=ee({type:n}),n})(),na=(()=>{class n extends gH{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Gt(n)))(r||n)}}(),n.\u0275dir=ee({type:n,features:[Me]}),n})();const yi=new $("NgValueAccessor"),Xhe={provide:yi,useExisting:Ve(()=>Mm),multi:!0},Zhe=new $("CompositionEventMode");let Mm=(()=>{class n extends gH{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Jhe(){const n=Fi()?Fi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(D(Mi),D(Jn),D(Zhe,8))},n.\u0275dir=ee({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&Re("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Qe([Xhe]),Me]}),n})();const efe=!1;function js(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function yH(n){return null!=n&&"number"==typeof n.length}const gn=new $("NgValidators"),Hs=new $("NgAsyncValidators"),tfe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class xm{static min(e){return _H(e)}static max(e){return function vH(n){return e=>{if(js(e.value)||js(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function wH(n){return js(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function EH(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function bH(n){return js(n.value)||tfe.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function IH(n){return e=>js(e.value)||!yH(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function TH(n){return e=>yH(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function DH(n){if(!n)return Nm;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(js(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return NH(e)}static composeAsync(e){return RH(e)}}function _H(n){return e=>{if(js(e.value)||js(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Nm(n){return null}function CH(n){return null!=n}function SH(n){const e=Wl(n)?mt(n):n;if(efe&&!tv(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new I(-1101,t)}return e}function AH(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function MH(n,e){return e.map(t=>t(n))}function xH(n){return n.map(e=>function nfe(n){return!n.validate}(e)?e:t=>e.validate(t))}function NH(n){if(!n)return null;const e=n.filter(CH);return 0==e.length?null:function(t){return AH(MH(t,e))}}function iA(n){return null!=n?NH(xH(n)):null}function RH(n){if(!n)return null;const e=n.filter(CH);return 0==e.length?null:function(t){return function Qhe(...n){const e=TM(n),{args:t,keys:r}=iO(n),i=new We(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let c=0;c<o;c++){let d=!1;lr(t[c]).subscribe(Tt(s,h=>{d||(d=!0,l--),a[c]=h},()=>u--,void 0,()=>{(!u||!d)&&(l||s.next(r?oO(r,a):a),s.complete())}))}});return e?i.pipe(sO(e)):i}(MH(t,e).map(SH)).pipe(fe(AH))}}function sA(n){return null!=n?RH(xH(n)):null}function kH(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function PH(n){return n._rawValidators}function OH(n){return n._rawAsyncValidators}function oA(n){return n?Array.isArray(n)?n:[n]:[]}function Rm(n,e){return Array.isArray(n)?n.includes(e):n===e}function FH(n,e){const t=oA(e);return oA(n).forEach(i=>{Rm(t,i)||t.push(i)}),t}function LH(n,e){return oA(e).filter(t=>!Rm(n,t))}class VH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Rn extends VH{get formDirective(){return null}get path(){return null}}class Gs extends VH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class BH{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let UH=(()=>{class n extends BH{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(D(Gs,2))},n.\u0275dir=ee({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&mf("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Me]}),n})(),$H=(()=>{class n extends BH{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(D(Rn,10))},n.\u0275dir=ee({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&mf("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Me]}),n})();function jH(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const lA=!1,Jd="VALID",Pm="INVALID",hl="PENDING",Zd="DISABLED";function cA(n){return(Om(n)?n.validators:n)||null}function dA(n,e){return(Om(e)?e.asyncValidators:n)||null}function Om(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function HH(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new I(1e3,lA?function ofe(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new I(1001,lA?function afe(n,e){return`Cannot find form control ${jH(n,e)}`}(e,t):"")}function GH(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new I(1002,lA?function ufe(n,e){return`Must supply a value for form control ${jH(n,e)}`}(e,i):"")})}class Fm{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Jd}get invalid(){return this.status===Pm}get pending(){return this.status==hl}get disabled(){return this.status===Zd}get enabled(){return this.status!==Zd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(FH(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(FH(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(LH(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(LH(e,this._rawAsyncValidators))}hasValidator(e){return Rm(this._rawValidators,e)}hasAsyncValidator(e){return Rm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Jd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jd||this.status===hl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zd:Jd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hl,this._hasOwnPendingAsyncValidator=!0;const t=SH(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?Zd:this.errors?Pm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hl)?hl:this._anyControlsHaveStatus(Pm)?Pm:Jd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Om(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function lfe(n){return Array.isArray(n)?iA(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function cfe(n){return Array.isArray(n)?sA(n):n||null}(this._rawAsyncValidators)}}class eh extends Fm{constructor(e,t,r){super(cA(t),dA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){GH(this,!0,e),Object.keys(e).forEach(r=>{HH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class zH extends eh{}const fl=new $("CallSetDisabledState",{providedIn:"root",factory:()=>Lm}),Lm="always";function th(n,e,t=Lm){hA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function hfe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qH(n,e)})}(n,e),function pfe(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ffe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qH(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function dfe(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Bm(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),$m(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Um(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hA(n,e){const t=PH(n);null!==e.validator?n.setValidators(kH(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=OH(n);null!==e.asyncValidator?n.setAsyncValidators(kH(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Um(e._rawValidators,i),Um(e._rawAsyncValidators,i)}function $m(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=PH(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=OH(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Um(e._rawValidators,r),Um(e._rawAsyncValidators,r),t}function qH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function QH(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function YH(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const rh=class extends Fm{constructor(e=null,t,r){super(cA(t),dA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Om(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=YH(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){QH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){QH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){YH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let tG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ee({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Ife={provide:yi,useExisting:Ve(()=>yA),multi:!0};let yA=(()=>{class n extends na{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Gt(n)))(r||n)}}(),n.\u0275dir=ee({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&Re("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[Qe([Ife]),Me]}),n})(),nG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({}),n})();const _A=new $("NgModelWithFormControlWarning"),Afe={provide:Rn,useExisting:Ve(()=>jm)};let jm=(()=>{class n extends Rn{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Je,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($m(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return th(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Bm(t.control||null,t,!1),function _fe(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function KH(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Bm(r||null,t),(n=>n instanceof rh)(i)&&(th(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function WH(n,e){hA(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function gfe(n,e){return $m(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hA(this.form,this),this._oldForm&&$m(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(D(gn,10),D(Hs,10),D(fl,8))},n.\u0275dir=ee({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&Re("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qe([Afe]),Me,hr]}),n})();const Nfe={provide:Gs,useExisting:Ve(()=>EA)};let EA=(()=>{class n extends Gs{set isDisabled(t){}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new Je,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function gA(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Mm?t=s:function yfe(n){return Object.getPrototypeOf(n.constructor)===na}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function pA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Vm(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(D(Rn,13),D(gn,10),D(Hs,10),D(yi,10),D(_A,8))},n.\u0275dir=ee({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Qe([Nfe]),Me,hr]}),n})();let ra=(()=>{class n{constructor(){this._validator=Nm}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Nm,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ee({type:n,features:[hr]}),n})();const Bfe={provide:gn,useExisting:Ve(()=>TA),multi:!0};let TA=(()=>{class n extends ra{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function cG(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>_H(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Gt(n)))(r||n)}}(),n.\u0275dir=ee({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&Vn("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Qe([Bfe]),Me]}),n})(),qfe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({imports:[nG]}),n})();class yG extends Fm{constructor(e,t,r){super(cA(t),dA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){GH(this,!1,e),e.forEach((r,i)=>{HH(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function _G(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Wfe=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return _G(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new eh(i,s)}record(t,r=null){const i=this._reduceControls(t);return new zH(i,r)}control(t,r,i){let s={};return this.useNonNullable?(_G(r)?s=r:(s.validators=r,s.asyncValidators=i),new rh(t,{...s,nonNullable:!0})):new rh(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new yG(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof rh||t instanceof Fm?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kfe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_A,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:fl,useValue:t.callSetDisabledState??Lm}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({imports:[qfe]}),n})();function Qfe(n,e){1&n&&(G(0,"div",15),ae(1," This field is required. "),z())}function Yfe(n,e){1&n&&(G(0,"div",15),ae(1," The number of sides should be at least 2. "),z())}function Xfe(n,e){1&n&&(G(0,"div",15),ae(1," This field is required. "),z())}function Jfe(n,e){1&n&&(G(0,"div",15),ae(1," There should be at least 1 mine. "),z())}function Zfe(n,e){if(1&n&&(G(0,"div",15),ae(1),z()),2&n){const t=zt(2);te(1),Or(" ",t.errorStatus," ")}}function epe(n,e){if(1&n&&(G(0,"form",8)(1,"div",9)(2,"label",10),ae(3,"Number of Sides:"),z(),un(4,"input",11),Ke(5,Qfe,2,0,"div",12),Ke(6,Yfe,2,0,"div",12),z(),G(7,"div",9)(8,"label",13),ae(9,"Number of Mines:"),z(),un(10,"input",14),Ke(11,Xfe,2,0,"div",12),Ke(12,Jfe,2,0,"div",12),Ke(13,Zfe,2,1,"div",12),z()()),2&n){const t=zt();pe("formGroup",t.settingsForm),te(5),pe("ngIf",(null==t.numberOfSides?null:t.numberOfSides.touched)&&(null==t.numberOfSides||null==t.numberOfSides.errors?null:t.numberOfSides.errors.required)),te(1),pe("ngIf",(null==t.numberOfSides?null:t.numberOfSides.touched)&&(null==t.numberOfMines||null==t.numberOfMines.errors?null:t.numberOfMines.errors.min)),te(5),pe("ngIf",(null==t.numberOfMines?null:t.numberOfMines.touched)&&(null==t.numberOfMines||null==t.numberOfMines.errors?null:t.numberOfMines.errors.required)),te(1),pe("ngIf",(null==t.numberOfMines?null:t.numberOfMines.touched)&&(null==t.numberOfMines||null==t.numberOfMines.errors?null:t.numberOfMines.errors.min)),te(1),pe("ngIf",!!t.errorStatus)}}const Hm=function(n){return{active:n}};let tpe=(()=>{var n;class e{constructor(r,i){this.fb=r,this.router=i,this.showForm=!1,this.selectedLevel=It.EASY,this.uiService=W(dl)}ngOnInit(){this.settingsForm=this.fb.group({numberOfSides:["",[xm.required,xm.min(2)]],numberOfMines:["",[xm.required,xm.min(1)]]})}onStartLevel(){this.settingsForm.valid&&this.selectedLevel===It.PERSONALIZED&&this.uiService.setGameConfiguration(this.settingsForm.value),this.router.navigate(["board"])}onLoadLevel(){this.uiService.setSelectedLevel(It.PERSONALIZED),this.uiService.setGameStatus(Nn.NONE),this.router.navigate(["board"])}onSelectLevel(r){this.selectedLevel=r,this.uiService.setSelectedLevel(r),this.uiService.setGameStatus(Nn.NONE),this.showForm=r===It.PERSONALIZED}get numberOfSides(){return this.settingsForm.get("numberOfSides")}get numberOfMines(){return this.settingsForm.get("numberOfMines")}get errorStatus(){let r="";return this.numberOfSides?.valid&&this.numberOfMines?.valid&&Number(this.numberOfSides?.value)*Number(this.numberOfSides?.value)<=Number(this.numberOfMines?.value)&&(r="Number of mines can't be more or equal than the total tiles!"),r}get disabledStatus(){return!(this.selectedLevel!==It.PERSONALIZED||!this.numberOfMines?.invalid&&!this.numberOfSides?.invalid&&!this.errorStatus)}}return(n=e).\u0275fac=function(r){return new(r||n)(D(Wfe),D(Un))},n.\u0275cmp=Ar({type:n,selectors:[["app-minesweeper-form"]],decls:20,vars:14,consts:[[1,"minesweeper-form"],[1,"minesweeper-form__buttons"],[3,"ngClass","click"],["class","minesweeper-form__inputs",3,"formGroup",4,"ngIf"],[1,"minesweeper-form__start"],["routerLink","/history"],[3,"disabled","click"],[3,"click"],[1,"minesweeper-form__inputs",3,"formGroup"],[1,"form-group"],["for","numberOfSides"],["type","number","id","numberOfSides","formControlName","numberOfSides","min","0"],["class","error",4,"ngIf"],["for","numberOfMines"],["type","number","id","numberOfMines","formControlName","numberOfMines","min","0"],[1,"error"]],template:function(r,i){1&r&&(G(0,"main",0)(1,"h1"),ae(2,"Select your difficulty"),z(),G(3,"div",1)(4,"button",2),Re("click",function(){return i.onSelectLevel("easy")}),ae(5,"Easy"),z(),G(6,"button",2),Re("click",function(){return i.onSelectLevel("medium")}),ae(7,"Medium"),z(),G(8,"button",2),Re("click",function(){return i.onSelectLevel("hard")}),ae(9,"Hard"),z(),G(10,"button",2),Re("click",function(){return i.onSelectLevel("personalized")}),ae(11,"Personalized"),z()(),Ke(12,epe,14,6,"form",3),G(13,"div",4)(14,"button",5),ae(15,"History Log"),z(),G(16,"button",6),Re("click",function(){return i.onStartLevel()}),ae(17,"Start Game"),z(),G(18,"button",7),Re("click",function(){return i.onLoadLevel()}),ae(19,"Load Game"),z()()()),2&r&&(te(4),pe("ngClass",uo(6,Hm,"easy"===i.selectedLevel)),te(2),pe("ngClass",uo(8,Hm,"medium"===i.selectedLevel)),te(2),pe("ngClass",uo(10,Hm,"hard"===i.selectedLevel)),te(2),pe("ngClass",uo(12,Hm,"personalized"===i.selectedLevel)),te(2),pe("ngIf",i.showForm),te(4),pe("disabled",i.disabledStatus))},dependencies:[iw,uc,hu,tG,Mm,yA,UH,$H,TA,jm,EA],styles:[".minesweeper-form[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;gap:20px}.minesweeper-form__buttons[_ngcontent-%COMP%]{display:flex;gap:20px}.minesweeper-form__buttons[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{border:2px solid #9681eb}.minesweeper-form__inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.minesweeper-form__inputs[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.minesweeper-form__inputs[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;border:none;box-shadow:#00000026 1.95px 1.95px 2.6px}.minesweeper-form__start[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.minesweeper-form__start[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;background-color:#9681eb}.minesweeper-form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#f66}"]}),e})(),npe=(()=>{var n;class e{constructor(){this.db=W(cl),this.uiService=W(dl),this.destroyed=!1}ngOnInit(){const r=rA(this.db,"lastgame");pH(r).pipe(fc(()=>!this.destroyed)).subscribe({next:i=>{const{numberOfSides:s,numberOfMines:o}=i[0].configuration;this.uiService.setGameConfiguration({numberOfMines:o,numberOfSides:s})}})}ngOnDestroy(){this.destroyed=!0}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Ar({type:n,selectors:[["app-setup"]],decls:2,vars:0,consts:[[1,"setup"]],template:function(r,i){1&r&&(G(0,"div",0),un(1,"app-minesweeper-form"),z())},dependencies:[tpe],styles:[".setup[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}"]}),e})();class vG{}class rpe{}const rs="*";function ipe(n,e){return{type:7,name:n,definitions:e,options:{}}}function wG(n,e=null){return{type:4,styles:e,timings:n}}function EG(n,e=null){return{type:2,steps:n,options:e}}function ih(n){return{type:6,styles:n,offset:null}}function CA(n,e,t){return{type:0,name:n,styles:e,options:t}}function bG(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function IG(n){Promise.resolve().then(n)}class sh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){IG(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class TG{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?IG(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const SA="!",DG=["toast-component",""];function spe(n,e){if(1&n){const t=pf();G(0,"button",5),Re("click",function(){return Cl(t),Sl(zt().remove())}),G(1,"span",6),ae(2,"\xd7"),z()()}}function ope(n,e){if(1&n&&(qa(0),ae(1),Wa()),2&n){const t=zt(2);te(1),Or("[",t.duplicatesCount+1,"]")}}function ape(n,e){if(1&n&&(G(0,"div"),ae(1),Ke(2,ope,2,1,"ng-container",4),z()),2&n){const t=zt();Ri(t.options.titleClass),Vn("aria-label",t.title),te(1),Or(" ",t.title," "),te(1),pe("ngIf",t.duplicatesCount)}}function upe(n,e){if(1&n&&un(0,"div",7),2&n){const t=zt();Ri(t.options.messageClass),pe("innerHTML",t.message,T_)}}function lpe(n,e){if(1&n&&(G(0,"div",8),ae(1),z()),2&n){const t=zt();Ri(t.options.messageClass),Vn("aria-label",t.message),te(1),Or(" ",t.message," ")}}function cpe(n,e){if(1&n&&(G(0,"div"),un(1,"div",9),z()),2&n){const t=zt();te(1),Qa("width",t.width+"%")}}class ype{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class _pe{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class vpe{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new tn,this._activate=new tn,this._manualClose=new tn,this._resetTimeout=new tn,this._countDuplicate=new tn}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class Gm{constructor(e,t,r,i,s,o){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this._onTap=new tn,this._onAction=new tn,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const SG=new $("ToastConfig");class wpe extends _pe{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Epe=(()=>{class n{constructor(){this._document=W(yt)}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class bpe{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let Ipe=(()=>{class n{constructor(){this._overlayContainer=W(Epe),this._componentFactoryResolver=W(xa),this._appRef=W(lo),this._document=W(yt),this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new wpe(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new bpe(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AA=(()=>{class n{constructor(t,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){const{includeTitleDuplicates:o}=this.toastrConfig;for(const a of this.toasts)if((!o||o&&a.title===t)&&a.message===r)return a.toastRef.onDuplicate(i,s),a;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==o)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const u=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let l=r;r&&s.enableHtml&&(l=this.sanitizer.sanitize(Oe.HTML,r));const c=new vpe(u),d=new Gm(this.index,s,l,i,t,c),f=Tn.create({providers:[{provide:Gm,useValue:d}],parent:this._injector}),p=new ype(s.toastComponent,f),g=u.attach(p,s.newestOnTop);c.componentInstance=g.instance;const m={toastId:this.index,title:i||"",message:r||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:d.onTap(),onAction:d.onAction(),portal:g};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{m.toastRef.activate()})),this.toasts.push(m),m}}return n.\u0275fac=function(t){return new(t||n)(P(SG),P(Ipe),P(Tn),P(nO),P(ke))},n.\u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AG=(()=>{class n{get displayStyle(){if("inactive"===this.state.value)return"none"}constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(D(AA),D(Gm),D(ke))},n.\u0275cmp=Ar({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&Re("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(uv("@flyInOut",r.state),Ri(r.toastClasses),Qa("display",r.displayStyle))},standalone:!0,features:[If],attrs:DG,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(Ke(0,spe,3,0,"button",0),Ke(1,ape,3,5,"div",1),Ke(2,upe,1,3,"div",2),Ke(3,lpe,2,4,"div",3),Ke(4,cpe,2,2,"div",4)),2&t&&(pe("ngIf",r.options.closeButton),te(1),pe("ngIf",r.title),te(1),pe("ngIf",r.message&&r.options.enableHtml),te(1),pe("ngIf",r.message&&!r.options.enableHtml),te(1),pe("ngIf",r.options.progressBar))},dependencies:[uc],encapsulation:2,data:{animation:[ipe("flyInOut",[CA("inactive",ih({opacity:0})),CA("active",ih({opacity:1})),CA("removed",ih({opacity:0})),bG("inactive => active",wG("{{ easeTime }}ms {{ easing }}")),bG("active => removed",wG("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const Tpe={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:AG},Dpe=(n={})=>function Zq(n){return{\u0275providers:n}}([{provide:SG,useValue:{default:Tpe,config:n}}]);let Cpe=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[Dpe(t)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({imports:[AG]}),n})();function Spe(n,e){1&n&&(G(0,"span",7),un(1,"img",8),z())}function Ape(n,e){1&n&&(G(0,"span",7),un(1,"img",9),z())}const Mpe=function(n){return{background:n}};function xpe(n,e){if(1&n){const t=pf();G(0,"div",5),Re("click",function(){const s=Cl(t).$implicit;return Sl(zt(2).revealTile(s))})("contextmenu",function(i){const o=Cl(t).$implicit;return Sl(zt(2).setFlag(i,o))}),Ke(1,Spe,2,0,"span",6),Ke(2,Ape,2,0,"span",6),z()}if(2&n){const t=e.$implicit;pe("ngStyle",uo(3,Mpe,t.isRevealed&&!t.hasMine&&"#45CFDD")),te(1),pe("ngIf",t.isRevealed&&t.hasMine),te(1),pe("ngIf",!t.isRevealed&&t.isFlagged)}}function Npe(n,e){if(1&n&&(G(0,"div",3),Ke(1,xpe,3,5,"div",4),z()),2&n){const t=e.$implicit;te(1),pe("ngForOf",t)}}let Rpe=(()=>{var n;class e{constructor(){this.minesEmitter=new Je,this.startTime=new Date,this.endTime=new Date,this.mines=0,this.selectedLevel=It.EASY,this.gameStatus=Nn.NONE,this.boardSize=9,this.board=[],this.uiService=W(dl)}ngOnInit(){Xf([this.uiService.getSelectedLevel(),this.uiService.getGameConfiguration()]).subscribe({next:([r,i])=>{this.selectedLevel=r,r===It.PERSONALIZED?this.setBoardTiles(r,i.numberOfSides,i.numberOfMines):this.setBoardTiles(r)}})}setStartingValues(){this.startTime=new Date(Date.now())}revealTile(r,i,s){if(!r.isFlagged&&!r.isRevealed&&this.gameStatus===Nn.NONE){if(r.isRevealed=!0,r.hasMine)return void this.gameOver();if(0===r.adjacentMines){i=void 0===i?this.board.findIndex(a=>a.includes(r)):i,s=void 0===s?this.board[i].indexOf(r):s;const o=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[a,u]of o){const l=i+a,c=s+u;l>=0&&l<this.boardSize&&c>=0&&c<this.boardSize&&this.revealTile(this.board[l][c],l,c)}}this.checkGameStatus()}}setFlag(r,i){r.preventDefault(),this.gameStatus===Nn.NONE&&(i.isFlagged=!i.isFlagged,this.mines>0&&this.mines--,this.minesEmitter.emit(this.mines))}gameOver(){this.board.forEach(i=>i.forEach(s=>{s.hasMine&&(s.isRevealed=!0)})),this.gameStatus=Nn.LOSE,this.endTime=new Date(Date.now());const r={difficulty:this.selectedLevel,ellapsedTime:(this.endTime.valueOf()-this.startTime.valueOf())/1e3,startTime:this.startTime,endTime:this.endTime,status:this.gameStatus};this.uiService.setHistoryLog(r),this.uiService.setGameStatus(this.gameStatus)}checkGameStatus(){for(const i of this.board)for(const s of i)if(!s.hasMine&&!s.isRevealed)return;this.gameStatus=Nn.WON,this.endTime=new Date(Date.now());const r={difficulty:this.selectedLevel,ellapsedTime:(this.endTime.valueOf()-this.startTime.valueOf())/1e3,startTime:this.startTime,endTime:this.endTime,status:this.gameStatus};this.uiService.setHistoryLog(r),this.uiService.setGameStatus(this.gameStatus)}setBoardTiles(r,i=9,s=0){switch(this.gameStatus=Nn.NONE,r){case It.EASY:this.boardSize=9,s=9;break;case It.MEDIUM:this.boardSize=14,s=18;break;case It.HARD:this.boardSize=20,s=36;break;case It.PERSONALIZED:this.boardSize=i;break;default:this.boardSize=9,s=9}this.mines=s,this.initializeBoard(s)}initializeBoard(r){const i=new Set;for(this.board=new Array(this.boardSize);i.size<r;){const s=Math.floor(Math.random()*this.boardSize),o=Math.floor(Math.random()*this.boardSize);i.add(`${s},${o}`)}for(let s=0;s<this.boardSize;s++)this.board[s]=new Array(this.boardSize).fill(null).map((o,a)=>({hasMine:i.has(`${s},${a}`),adjacentMines:0,isRevealed:!1,isFlagged:!1}));this.uiService.setSavedData({numberOfSides:this.boardSize,numberOfMines:r}),this.minesEmitter.emit(r),this.calculateAdjacentMines()}calculateAdjacentMines(){const r=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(let i=0;i<this.boardSize;i++)for(let s=0;s<this.boardSize;s++)if(!this.board[i][s].hasMine){const o=r.reduce((a,[u,l])=>{const c=i+u,d=s+l;return c>=0&&c<this.boardSize&&d>=0&&d<this.boardSize&&this.board[c][d].hasMine&&a++,a},0);this.board[i][s].adjacentMines=o}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Ar({type:n,selectors:[["app-minesweeper-layout"]],outputs:{minesEmitter:"minesEmitter"},decls:3,vars:2,consts:[[1,"layout",3,"ngClass"],[1,"layout__board"],["class","layout__board-tile",4,"ngFor","ngForOf"],[1,"layout__board-tile"],["class","layout__board-cell",3,"ngStyle","click","contextmenu",4,"ngFor","ngForOf"],[1,"layout__board-cell",3,"ngStyle","click","contextmenu"],["class","mine",4,"ngIf"],[1,"mine"],["src","assets/mine.png"],["src","assets/flag.png"]],template:function(r,i){1&r&&(G(0,"main",0)(1,"div",1),Ke(2,Npe,2,1,"div",2),z()()),2&r&&(pe("ngClass",i.selectedLevel),te(2),pe("ngForOf",i.board))},dependencies:[iw,sw,uc,uw],styles:[".layout[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px}.layout__board[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.layout__board-cell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:rgb(155,232,216);cursor:pointer;border:1px solid #1d5b79;height:30px;width:30px}.layout__board[_ngcontent-%COMP%]   .mine[_ngcontent-%COMP%]{display:flex}.layout__board[_ngcontent-%COMP%]   .mine[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}"]}),e})();const kpe=function(n){return{width:n}};let Ppe=(()=>{var n;class e{constructor(){this.mines=0,this.headerSize="270px",this.timeEllapsed=0,this.gameStatus="",this.selectedLevel=It.EASY,this.sides=0,this.uiService=W(dl)}ngOnInit(){Xf([this.uiService.getSelectedLevel(),this.uiService.getGameStatus(),this.uiService.getGameConfiguration()]).subscribe({next:([r,i,s])=>{this.gameStatus=i,this.sides=s.numberOfSides,this.selectedLevel=r,this.setHeaderSize(r)}})}resetGame(){this.uiService.setSelectedLevel(this.selectedLevel),this.uiService.setGameStatus(Nn.NONE),this.uiService.setHistoryLog(null)}setHeaderSize(r){switch(r){case It.EASY:this.headerSize="270px";break;case It.MEDIUM:this.headerSize="420px";break;case It.HARD:this.headerSize="600px";break;case It.PERSONALIZED:this.headerSize=30*this.sides+"px";break;default:this.headerSize="270px"}}get statusImg(){let r="assets/happiness.png";return this.gameStatus===Nn.LOSE&&(r="assets/sad.png"),this.gameStatus===Nn.WON&&(r="assets/smiling.png"),r}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Ar({type:n,selectors:[["app-minesweeper-header"]],inputs:{mines:"mines"},decls:7,vars:5,consts:[[1,"header",3,"ngStyle"],[1,"header__counter"],["src","assets/mine.png"],[1,"header__img",3,"click"],["alt","status face",3,"src"]],template:function(r,i){1&r&&(G(0,"main",0)(1,"div",1),un(2,"img",2),G(3,"span"),ae(4),z()(),G(5,"span",3),Re("click",function(){return i.resetGame()}),un(6,"img",4),z()()),2&r&&(pe("ngStyle",uo(3,kpe,i.headerSize)),te(4),Or(" ",i.mines," "),te(2),pe("src",i.statusImg,D_))},dependencies:[uw],styles:[".header[_ngcontent-%COMP%]{height:60px;border:1px solid #1d5b79;border-bottom:none;border-radius:5px 5px 0 0;display:flex;gap:10px;align-items:center;justify-content:center}.header__counter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.header__counter[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem;color:#1d5b79}.header__counter[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.header__img[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.header__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}"]}),e})(),Ope=(()=>{var n;class e{constructor(){this.gameStatus$=new We,this.destroyed=!1,this.mines=0,this.uiService=W(dl),this.toastr=W(AA),this.firestore=W(cl),this.cd=W(ic)}ngOnInit(){this.gameStatus$=this.uiService.getGameStatus(),this.uiService.getHistoryLog().pipe(fc(()=>!this.destroyed)).subscribe({next:r=>{if(r){const i=rA(this.firestore,"log");zhe(i,r).catch(s=>{console.error("Error updating configuration:",s)})}}})}onSaveGame(){this.destroyed=!1,this.uiService.getSavedData().pipe(fc(()=>!this.destroyed)).subscribe({next:r=>{const i=qhe(this.firestore,"lastgame","qluTJwbgCXASM5aqbWF9");Khe(i,{configuration:r}).then(()=>{this.destroyed=!0,this.toastr.success("Succes!, your game was saved")}).catch(s=>{console.error("Error updating configuration:",s)})}})}getCurrentMineNumber(r){this.mines=r,this.cd.detectChanges()}ngOnDestroy(){this.uiService.setHistoryLog(null),this.destroyed=!0}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Ar({type:n,selectors:[["app-minesweeper"]],decls:17,vars:4,consts:[[1,"minesweeper"],[1,"minesweeper__back"],["routerLink","/"],[1,"minesweeper__back-right-buttons"],["routerLink","/history"],[3,"click"],[1,"minesweeper__main"],[3,"mines"],[3,"minesEmitter"]],template:function(r,i){1&r&&(G(0,"main",0)(1,"div",1)(2,"button",2),ae(3,"Go Back"),z(),G(4,"div",3)(5,"button",4),ae(6,"History Log"),z(),G(7,"button",5),Re("click",function(){return i.onSaveGame()}),ae(8,"Save Game"),z()()(),G(9,"h1"),ae(10," MineSweeper"),z(),G(11,"div",6),un(12,"app-minesweeper-header",7),G(13,"app-minesweeper-layout",8),Re("minesEmitter",function(o){return i.getCurrentMineNumber(o)}),z()(),G(14,"h1"),ae(15),yv(16,"async"),z()()),2&r&&(te(12),pe("mines",i.mines),te(3),ls(function tk(n,e,t){const r=n+je,i=T(),s=ya(i,r);return tc(i,r)?YR(i,En(),e,s.transform,t,s):s.transform(t)}(16,2,i.gameStatus$)))},dependencies:[hu,Rpe,Ppe,SP],styles:[".minesweeper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%}.minesweeper__back[_ngcontent-%COMP%]{padding:1rem;width:100vw;display:flex;justify-content:space-between}.minesweeper__back-right-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.minesweeper__main[_ngcontent-%COMP%]{box-shadow:#64646f33 0 7px 29px}"],changeDetection:0}),e})(),Fpe=(()=>{var n;class e{transform(r,i="floor"){return"ceil"===i?Math.ceil(r):Math.floor(r)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275pipe=vn({name:"roundPipe",type:n,pure:!0}),e})();function Lpe(n,e){if(1&n&&(qa(0),G(1,"span"),ae(2),z(),G(3,"span"),ae(4),z(),G(5,"span"),ae(6),z(),G(7,"span"),ae(8),z(),G(9,"span"),ae(10),z(),Wa()),2&n){const t=e.$implicit;te(2),ls(t.startTime),te(2),ls(t.endTime),te(2),ls(t.ellapsedTime),te(2),ls(t.difficulty),te(2),ls(t.status)}}const Vpe=[{path:"",component:npe},{path:"board",component:Ope},{path:"history",component:(()=>{var n;class e{constructor(r){this.firestore=r,this.uiService=W(dl),this.logList=[],this.destroyed=!1,this.currentPage=1,this.itemsPerPage=10,this.totalItems=0}ngOnInit(){this.totalItems=this.logList.length;const r=rA(this.firestore,"log");pH(r).pipe(fe(i=>this.mapCollectionData(i)),fc(()=>!this.destroyed)).subscribe({next:i=>{this.logList=i,this.totalItems=this.logList.length}})}mapCollectionData(r){return r.sort((i,s)=>i.ellapsedTime-s.ellapsedTime),r.map(i=>({ellapsedTime:this.formatEllapsedTime(i?.ellapsedTime),difficulty:i.difficulty,status:i.status,startTime:this.formatDate(i.startTime.seconds),endTime:this.formatDate(i.endTime.seconds)}))}formatEllapsedTime(r){return r<60?`${r} sec`:r<3600?`${Math.floor(r/60)} min`:`${Math.floor(r/3600)} hr`}formatDate(r){const i=new Date(1e3*r);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).format(i)}ngOnDestroy(){this.destroyed=!0}nextPage(){this.currentPage<Math.ceil(this.totalItems/this.itemsPerPage)&&this.currentPage++}prevPage(){this.currentPage>1&&this.currentPage--}get displayedLogs(){const r=(this.currentPage-1)*this.itemsPerPage;return this.logList.slice(r,r+this.itemsPerPage)}}return(n=e).\u0275fac=function(r){return new(r||n)(D(cl))},n.\u0275cmp=Ar({type:n,selectors:[["app-history"]],decls:23,vars:7,consts:[[1,"history"],["routerLink","/"],[1,"history__table"],[1,"history__table-header"],[4,"ngFor","ngForOf"],[1,"history__pagination"],[3,"disabled","click"],[3,"click"]],template:function(r,i){1&r&&(G(0,"main",0)(1,"button",1),ae(2,"Back to Configuration"),z(),G(3,"div",2)(4,"span",3),ae(5,"Start Time"),z(),G(6,"span",3),ae(7,"End Time"),z(),G(8,"span",3),ae(9,"Time Spent"),z(),G(10,"span",3),ae(11,"Difficulty"),z(),G(12,"span",3),ae(13,"Status"),z(),Ke(14,Lpe,11,5,"ng-container",4),z(),G(15,"div",5)(16,"button",6),Re("click",function(){return i.prevPage()}),ae(17,"Previous"),z(),G(18,"span"),ae(19),yv(20,"roundPipe"),z(),G(21,"button",7),Re("click",function(){return i.nextPage()}),ae(22,"Next"),z()()()),2&r&&(te(14),pe("ngForOf",i.displayedLogs),te(2),pe("disabled",1===i.currentPage),te(3),av("Page ",i.currentPage," of ",nk(20,4,i.totalItems/i.itemsPerPage,"ceil"),""))},dependencies:[sw,hu,Fpe],styles:[".history[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column}.history__table[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);width:100%;padding:20px}.history__table-header[_ngcontent-%COMP%]{font-weight:700;background-color:#f2f2f2;padding:10px;border:1px solid #ddd}.history__table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;text-align:left}.history[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:140px}.history__pagination[_ngcontent-%COMP%]{align-self:center}"]}),e})()}];let Bpe=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({imports:[mF.forRoot(Vpe),mF]}),e})(),Upe=(()=>{var n;class e{constructor(){this.title="minesweep-angular"}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=Ar({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&un(0,"router-outlet")},dependencies:[Vw]}),e})();const $pe_firebase={apiKey:"AIzaSyAp7608JT_atIqWQTFbhYE2M7qhePqX0UY",authDomain:"minesweep-angular.firebaseapp.com",projectId:"minesweep-angular",storageBucket:"minesweep-angular.appspot.com",messagingSenderId:"892391961566",appId:"1:892391961566:web:d61a467dd41c7aee50234f"};function MG(n){return new I(3e3,!1)}function bge(){return typeof window<"u"&&typeof window.document<"u"}function MA(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function zs(n){switch(n.length){case 0:return new sh;case 1:return n[0];default:return new TG(n)}}function xG(n,e,t,r,i=new Map,s=new Map){const o=[],a=[];let u=-1,l=null;if(r.forEach(c=>{const d=c.get("offset"),h=d==u,f=h&&l||new Map;c.forEach((p,g)=>{let m=g,_=p;if("offset"!==g)switch(m=e.normalizePropertyName(m,o),_){case SA:_=i.get(g);break;case rs:_=s.get(g);break;default:_=e.normalizeStyleValue(g,m,_,o)}f.set(m,_)}),h||a.push(f),l=f,u=d}),o.length)throw function cge(n){return new I(3502,!1)}();return a}function xA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&NA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&NA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&NA(t,"destroy",n)))}}function NA(n,e,t){const s=RA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function RA(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function or(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function NG(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let kA=(n,e)=>!1,RG=(n,e,t)=>[],kG=null;function PA(n){const e=n.parentNode||n.host;return e===kG?null:e}(MA()||typeof Element<"u")&&(bge()?(kG=(()=>document.documentElement)(),kA=(n,e)=>{for(;e;){if(e===n)return!0;e=PA(e)}return!1}):kA=(n,e)=>n.contains(e),RG=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let ia=null,PG=!1;const OG=kA,FG=RG;let LG=(()=>{class n{validateStyleProperty(t){return function Tge(n){ia||(ia=function Dge(){return typeof document<"u"?document.body:null}()||{},PG=!!ia.style&&"WebkitAppearance"in ia.style);let e=!0;return ia.style&&!function Ige(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in ia.style,!e&&PG&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ia.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return OG(t,r)}getParentElement(t){return PA(t)}query(t,r,i){return FG(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],u){return new sh(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})(),OA=(()=>{class n{}return n.NOOP=new LG,n})();const Cge=1e3,FA="ng-enter",zm="ng-leave",qm="ng-trigger",Wm=".ng-trigger",BG="ng-animating",LA=".ng-animating";function is(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:VA(parseFloat(e[1]),e[2])}function VA(n,e){return"s"===e?n*Cge:n}function Km(n,e,t){return n.hasOwnProperty("duration")?n:function Age(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(MG()),{duration:0,delay:0,easing:""};i=VA(parseFloat(a[1]),a[2]);const u=a[3];null!=u&&(s=VA(parseFloat(u),a[4]));const l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,u=e.length;i<0&&(e.push(function jpe(){return new I(3100,!1)}()),a=!0),s<0&&(e.push(function Hpe(){return new I(3101,!1)}()),a=!0),a&&e.splice(u,0,MG())}return{duration:i,delay:s,easing:o}}(n,e,t)}function oh(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function UG(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function qs(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function jG(n,e,t){return t?e+":"+t+";":""}function HG(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=jG(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=jG(0,Rge(t),n.style[t]));n.setAttribute("style",e)}function _i(n,e,t){n.style&&(e.forEach((r,i)=>{const s=UA(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),MA()&&HG(n))}function sa(n,e){n.style&&(e.forEach((t,r)=>{const i=UA(r);n.style[i]=""}),MA()&&HG(n))}function ah(n){return Array.isArray(n)?1==n.length?n[0]:EG(n):n}const BA=new RegExp("{{\\s*(.+?)\\s*}}","g");function GG(n){let e=[];if("string"==typeof n){let t;for(;t=BA.exec(n);)e.push(t[1]);BA.lastIndex=0}return e}function uh(n,e,t){const r=n.toString(),i=r.replace(BA,(s,o)=>{let a=e[o];return null==a&&(t.push(function zpe(n){return new I(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function Qm(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Nge=/-+([a-z0-9])/g;function UA(n){return n.replace(Nge,(...e)=>e[1].toUpperCase())}function Rge(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ar(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function qpe(n){return new I(3004,!1)}()}}function zG(n,e){return window.getComputedStyle(n)[e]}const Jm="*";function Vge(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Bge(n,e,t){if(":"==n[0]){const u=function Uge(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function oge(n){return new I(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof u)return void e.push(u);n=u}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function sge(n){return new I(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(qG(i,o));"<"==s[0]&&!(i==Jm&&o==Jm)&&e.push(qG(o,i))}(r,t,e)):t.push(n),t}const Zm=new Set(["true","1"]),ey=new Set(["false","0"]);function qG(n,e){const t=Zm.has(n)||ey.has(n),r=Zm.has(e)||ey.has(e);return(i,s)=>{let o=n==Jm||n==i,a=e==Jm||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?Zm.has(n):ey.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?Zm.has(e):ey.has(e)),o&&a}}const $ge=new RegExp("s*:selfs*,?","g");function $A(n,e,t,r){return new jge(n).build(e,t,r)}class jge{constructor(e){this._driver=e}build(e,t,r){const i=new zge(t);return this._resetContextStyleTimingState(i),ar(this,ah(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Kpe(){return new I(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const u=a,l=u.name;l.toString().split(/\s*,\s*/).forEach(c=>{u.name=c,s.push(this.visitState(u,t))}),u.name=l}else if(1==a.type){const u=this.visitTransition(a,t);r+=u.queryCount,i+=u.depCount,o.push(u)}else t.errors.push(function Qpe(){return new I(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{GG(u).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&(Qm(s.values()),t.errors.push(function Ype(n,e){return new I(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ar(this,ah(e.animation),t);return{type:1,matchers:Vge(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:oa(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ar(this,r,t)),options:oa(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=ar(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:oa(e.options)}}visitAnimate(e,t){const r=function Wge(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return jA(Km(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=jA(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=Km(t,e);return jA(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:ih({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const l={};r.easing&&(l.easing=r.easing),o=ih(l)}t.currentTime+=r.duration+r.delay;const u=this.visitStyle(o,t);u.isEmptyStep=a,i=u}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===rs?r.push(a):t.errors.push(new I(3002,!1)):r.push(UG(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let u of a.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,u)=>{const l=t.collectedStyles.get(t.currentQuerySelector),c=l.get(u);let d=!0;c&&(s!=i&&s>=c.startTime&&i<=c.endTime&&(t.errors.push(function Jpe(n,e,t,r,i){return new I(3010,!1)}()),d=!1),s=c.startTime),d&&l.set(u,{startTime:s,endTime:i}),t.options&&function xge(n,e,t){const r=e.params||{},i=GG(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Gpe(n){return new I(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Zpe(){return new I(3011,!1)}()),r;let s=0;const o=[];let a=!1,u=!1,l=0;const c=e.steps.map(_=>{const b=this._makeStyleAst(_,t);let v=null!=b.offset?b.offset:function qge(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(b.styles),A=0;return null!=v&&(s++,A=b.offset=v),u=u||A<0||A>1,a=a||A<l,l=A,o.push(A),b});u&&t.errors.push(function ege(){return new I(3012,!1)}()),a&&t.errors.push(function tge(){return new I(3200,!1)}());const d=e.steps.length;let h=0;s>0&&s<d?t.errors.push(function nge(){return new I(3202,!1)}()):0==s&&(h=1/(d-1));const f=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return c.forEach((_,b)=>{const v=h>0?b==f?1:h*b:o[b],A=v*m;t.currentTime=p+g.delay+A,g.duration=A,this._validateStyleAst(_,t),_.offset=v,r.styles.push(_)}),r}visitReference(e,t){return{type:8,animation:ar(this,ah(e.animation),t),options:oa(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:oa(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:oa(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Hge(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace($ge,"")),n=n.replace(/@\*/g,Wm).replace(/@\w+/g,t=>Wm+"-"+t.slice(1)).replace(/:animating/g,LA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,or(t.collectedStyles,t.currentQuerySelector,new Map);const a=ar(this,ah(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:oa(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function rge(){return new I(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Km(e.timings,t.errors,!0);return{type:12,animation:ar(this,ah(e.animation),t),timings:r,options:null}}}class zge{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function oa(n){return n?(n=oh(n)).params&&(n.params=function Gge(n){return n?oh(n):null}(n.params)):n={},n}function jA(n,e,t){return{duration:n,delay:e,easing:t}}function HA(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class ty{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Yge=new RegExp(":enter","g"),Jge=new RegExp(":leave","g");function GA(n,e,t,r,i,s=new Map,o=new Map,a,u,l=[]){return(new Zge).buildKeyframes(n,e,t,r,i,s,o,a,u,l)}class Zge{buildKeyframes(e,t,r,i,s,o,a,u,l,c=[]){l=l||new ty;const d=new zA(e,t,l,i,s,c,[]);d.options=u;const h=u.delay?is(u.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,u),ar(this,r,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){const m=f[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,u)}return f.length?f.map(p=>p.buildKeyframes()):[HA(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:is(uh(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?is(r.duration):null,a=null!=r.delay?is(r.delay):null;return 0!==o&&e.forEach(u=>{const l=t.appendInstructionToTimeline(u,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ar(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=ny);const o=is(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>ar(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?is(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),ar(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Km(t.params?uh(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(u=>{a.forwardTime((u.offset||0)*s),a.setStyles(u.styles,u.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?is(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ny);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let u=null;a.forEach((l,c)=>{t.currentQueryIndex=c;const d=t.createSubContext(e.options,l);s&&d.delayNextStep(s),l===t.element&&(u=d.currentTimeline),ar(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let u=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=a-u;break;case"full":u=r.currentStaggerTime}const c=t.currentTimeline;u&&c.delayNextStep(u);const d=c.currentTime;ar(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const ny={};class zA{constructor(e,t,r,i,s,o,a,u){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ny,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new ry(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=is(r.duration)),null!=r.delay&&(i.delay=is(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=uh(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new zA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=ny,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new eme(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Yge,"."+this._enterClassName)).replace(Jge,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&0==a.length&&o.push(function ige(n){return new I(3014,!1)}()),a}}class ry{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new ry(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||rs),this._currentKeyframe.set(t,rs);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function tme(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,rs)}else qs(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,u]of o){const l=uh(u,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??rs),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,u)=>{const l=qs(a,new Map,this._backFill);l.forEach((c,d)=>{c===SA?e.add(d):c===rs&&t.add(d)}),r||l.set("offset",u/this.duration),i.push(l)});const s=e.size?Qm(e.values()):[],o=t.size?Qm(t.values()):[];if(r){const a=i[0],u=new Map(a);a.set("offset",0),u.set("offset",1),i=[a,u]}return HA(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class eme extends ry{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,u=qs(e[0]);u.set("offset",0),s.push(u);const l=qs(e[0]);l.set("offset",QG(a)),s.push(l);const c=e.length-1;for(let d=1;d<=c;d++){let h=qs(e[d]);const f=h.get("offset");h.set("offset",QG((t+f*r)/o)),s.push(h)}r=o,t=0,i="",e=s}return HA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function QG(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class qA{}const nme=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class rme extends qA{normalizePropertyName(e,t){return UA(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(nme.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Wpe(n,e){return new I(3005,!1)}())}return o+s}}function YG(n,e,t,r,i,s,o,a,u,l,c,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:l,postStyleProps:c,totalTime:d,errors:h}}const WA={};class XG{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function ime(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,u,l,c){const d=[],h=this.ast.options&&this.ast.options.params||WA,p=this.buildStyles(r,a&&a.params||WA,d),g=u&&u.params||WA,m=this.buildStyles(i,g,d),_=new Set,b=new Map,v=new Map,A="void"===i,L={params:sme(g,h),delay:this.ast.options?.delay},V=c?[]:GA(e,t,this.ast.animation,s,o,p,m,L,l,d);let Ie=0;if(V.forEach(mn=>{Ie=Math.max(mn.duration+mn.delay,Ie)}),d.length)return YG(t,this._triggerName,r,i,A,p,m,[],[],b,v,Ie,d);V.forEach(mn=>{const zr=mn.element,hz=or(b,zr,new Set);mn.preStyleProps.forEach(aa=>hz.add(aa));const ch=or(v,zr,new Set);mn.postStyleProps.forEach(aa=>ch.add(aa)),zr!==t&&_.add(zr)});const Nt=Qm(_.values());return YG(t,this._triggerName,r,i,A,p,m,V,Nt,b,v,Ie)}}function sme(n,e){const t=oh(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class ome{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=oh(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=uh(o,i,t));const u=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,u,o,t),r.set(a,o)})}),r}}class ume{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new ome(i.style,i.options&&i.options.params||{},r))}),JG(this.states,"true","1"),JG(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new XG(e,i,this.states))}),this.fallbackTransition=function lme(n,e,t){return new XG(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function JG(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const cme=new ty;class dme{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],s=$A(this._driver,t,r,i);if(r.length)throw function dge(n){return new I(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=xG(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=GA(this._driver,t,s,FA,zm,new Map,new Map,r,cme,i),o.forEach(c=>{const d=or(a,c.element,new Map);c.postStyleProps.forEach(h=>d.set(h,null))})):(i.push(function hge(){return new I(3300,!1)}()),o=[]),i.length)throw function fge(n){return new I(3504,!1)}();a.forEach((c,d)=>{c.forEach((h,f)=>{c.set(f,this._driver.computeStyle(d,f,rs))})});const l=zs(o.map(c=>{const d=a.get(c.element);return this._buildPlayer(c,new Map,d)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function pge(n){return new I(3301,!1)}();return t}listen(e,t,r,i){const s=RA(t,"","","");return xA(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const ZG="ng-animate-queued",KA="ng-animate-disabled",mme=[],ez={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},yme={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Tr="__ng_removed";class QA{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Eme(n){return n??null}(r?e.value:e),r){const s=oh(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const lh="void",YA=new QA(lh);class _me{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Dr(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function gge(n,e){return new I(3302,!1)}();if(null==r||0==r.length)throw function mge(n){return new I(3303,!1)}();if(!function bme(n){return"start"==n||"done"==n}(r))throw function yge(n,e){return new I(3400,!1)}();const s=or(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=or(this._engine.statesByElement,e,new Map);return a.has(t)||(Dr(e,qm),Dr(e,qm+"-"+t),a.set(t,YA)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function _ge(n){return new I(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new XA(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Dr(e,qm),Dr(e,qm+"-"+t),this._engine.statesByElement.set(e,a=new Map));let u=a.get(t);const l=new QA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),a.set(t,l),u||(u=YA),l.value!==lh&&u.value===l.value){if(!function Dme(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(u.params,l.params)){const g=[],m=s.matchStyles(u.value,u.params,g),_=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{sa(e,m),_i(e,_)})}return}const h=or(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=s.matchTransition(u.value,l.value,e,l.params),p=!1;if(!f){if(!i)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:u,toState:l,player:o,isFallbackTransition:p}),p||(Dr(e,ZG),o.onStart(()=>{pl(e,ZG)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(e);if(m){let _=m.indexOf(o);_>=0&&m.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Wm,!0);r.forEach(i=>{if(i[Tr])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((u,l)=>{if(o.set(l,u.value),this._triggers.has(l)){const c=this.trigger(e,l,lh,i);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&zs(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const u=this._triggers.get(o).fallbackTransition,l=r.get(o)||YA,c=new QA(lh),d=new XA(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:u,fromState:l,toState:c,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Tr];(!s||s===ez)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Dr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const u=RA(s,r.triggerName,r.fromState.value,r.toState.value);u._data=e,xA(r.player,a.phase,u,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class vme{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new _me(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const u=i.get(a);if(u){const l=r.indexOf(u);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(iy(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!iy(t))return;const s=t[Tr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Dr(e,KA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),pl(e,KA))}removeNode(e,t,r,i){if(iy(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Tr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return iy(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Wm,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,LA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return zs(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Tr];if(t&&t.setForRemoval){if(e[Tr]=ez,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(KA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Dr(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?zs(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function vge(n){return new I(3402,!1)}()}_flushAnimations(e,t){const r=new ty,i=[],s=new Map,o=[],a=new Map,u=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(B=>{c.add(B);const q=this.driver.query(B,".ng-animate-queued",!0);for(let Z=0;Z<q.length;Z++)c.add(q[Z])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=rz(h,this.collectedEnterElements),p=new Map;let g=0;f.forEach((B,q)=>{const Z=FA+g++;p.set(q,Z),B.forEach(Te=>Dr(Te,Z))});const m=[],_=new Set,b=new Set;for(let B=0;B<this.collectedLeaveElements.length;B++){const q=this.collectedLeaveElements[B],Z=q[Tr];Z&&Z.setForRemoval&&(m.push(q),_.add(q),Z.hasAnimation?this.driver.query(q,".ng-star-inserted",!0).forEach(Te=>_.add(Te)):b.add(q))}const v=new Map,A=rz(h,Array.from(_));A.forEach((B,q)=>{const Z=zm+g++;v.set(q,Z),B.forEach(Te=>Dr(Te,Z))}),e.push(()=>{f.forEach((B,q)=>{const Z=p.get(q);B.forEach(Te=>pl(Te,Z))}),A.forEach((B,q)=>{const Z=v.get(q);B.forEach(Te=>pl(Te,Z))}),m.forEach(B=>{this.processLeaveNode(B)})});const L=[],V=[];for(let B=this._namespaceList.length-1;B>=0;B--)this._namespaceList[B].drainQueuedTransitions(t).forEach(Z=>{const Te=Z.player,Ut=Z.element;if(L.push(Te),this.collectedEnterElements.length){const yn=Ut[Tr];if(yn&&yn.setForMove){if(yn.previousTriggersValues&&yn.previousTriggersValues.has(Z.triggerName)){const ua=yn.previousTriggersValues.get(Z.triggerName),Cr=this.statesByElement.get(Z.element);if(Cr&&Cr.has(Z.triggerName)){const ay=Cr.get(Z.triggerName);ay.value=ua,Cr.set(Z.triggerName,ay)}}return void Te.destroy()}}const vi=!d||!this.driver.containsElement(d,Ut),ur=v.get(Ut),Ws=p.get(Ut),nt=this._buildInstruction(Z,r,Ws,ur,vi);if(nt.errors&&nt.errors.length)return void V.push(nt);if(vi)return Te.onStart(()=>sa(Ut,nt.fromStyles)),Te.onDestroy(()=>_i(Ut,nt.toStyles)),void i.push(Te);if(Z.isFallbackTransition)return Te.onStart(()=>sa(Ut,nt.fromStyles)),Te.onDestroy(()=>_i(Ut,nt.toStyles)),void i.push(Te);const gz=[];nt.timelines.forEach(yn=>{yn.stretchStartingKeyframe=!0,this.disabledNodes.has(yn.element)||gz.push(yn)}),nt.timelines=gz,r.append(Ut,nt.timelines),o.push({instruction:nt,player:Te,element:Ut}),nt.queriedElements.forEach(yn=>or(a,yn,[]).push(Te)),nt.preStyleProps.forEach((yn,ua)=>{if(yn.size){let Cr=u.get(ua);Cr||u.set(ua,Cr=new Set),yn.forEach((ay,eM)=>Cr.add(eM))}}),nt.postStyleProps.forEach((yn,ua)=>{let Cr=l.get(ua);Cr||l.set(ua,Cr=new Set),yn.forEach((ay,eM)=>Cr.add(eM))})});if(V.length){const B=[];V.forEach(q=>{B.push(function wge(n,e){return new I(3505,!1)}())}),L.forEach(q=>q.destroy()),this.reportError(B)}const Ie=new Map,Nt=new Map;o.forEach(B=>{const q=B.element;r.has(q)&&(Nt.set(q,q),this._beforeAnimationBuild(B.player.namespaceId,B.instruction,Ie))}),i.forEach(B=>{const q=B.element;this._getPreviousPlayers(q,!1,B.namespaceId,B.triggerName,null).forEach(Te=>{or(Ie,q,[]).push(Te),Te.destroy()})});const mn=m.filter(B=>sz(B,u,l)),zr=new Map;nz(zr,this.driver,b,l,rs).forEach(B=>{sz(B,u,l)&&mn.push(B)});const ch=new Map;f.forEach((B,q)=>{nz(ch,this.driver,new Set(B),u,SA)}),mn.forEach(B=>{const q=zr.get(B),Z=ch.get(B);zr.set(B,new Map([...Array.from(q?.entries()??[]),...Array.from(Z?.entries()??[])]))});const aa=[],fz=[],pz={};o.forEach(B=>{const{element:q,player:Z,instruction:Te}=B;if(r.has(q)){if(c.has(q))return Z.onDestroy(()=>_i(q,Te.toStyles)),Z.disabled=!0,Z.overrideTotalTime(Te.totalTime),void i.push(Z);let Ut=pz;if(Nt.size>1){let ur=q;const Ws=[];for(;ur=ur.parentNode;){const nt=Nt.get(ur);if(nt){Ut=nt;break}Ws.push(ur)}Ws.forEach(nt=>Nt.set(nt,Ut))}const vi=this._buildAnimation(Z.namespaceId,Te,Ie,s,ch,zr);if(Z.setRealPlayer(vi),Ut===pz)aa.push(Z);else{const ur=this.playersByElement.get(Ut);ur&&ur.length&&(Z.parentPlayer=zs(ur)),i.push(Z)}}else sa(q,Te.fromStyles),Z.onDestroy(()=>_i(q,Te.toStyles)),fz.push(Z),c.has(q)&&i.push(Z)}),fz.forEach(B=>{const q=s.get(B.element);if(q&&q.length){const Z=zs(q);B.setRealPlayer(Z)}}),i.forEach(B=>{B.parentPlayer?B.syncPlayerEvents(B.parentPlayer):B.destroy()});for(let B=0;B<m.length;B++){const q=m[B],Z=q[Tr];if(pl(q,zm),Z&&Z.hasAnimation)continue;let Te=[];if(a.size){let vi=a.get(q);vi&&vi.length&&Te.push(...vi);let ur=this.driver.query(q,LA,!0);for(let Ws=0;Ws<ur.length;Ws++){let nt=a.get(ur[Ws]);nt&&nt.length&&Te.push(...nt)}}const Ut=Te.filter(vi=>!vi.destroyed);Ut.length?Ime(this,q,Ut):this.processLeaveNode(q)}return m.length=0,aa.forEach(B=>{this.players.push(B),B.onDone(()=>{B.destroy();const q=this.players.indexOf(B);this.players.splice(q,1)}),B.play()}),aa}elementContainsData(e,t){let r=!1;const i=t[Tr];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const u=!s||s==lh;a.forEach(l=>{l.queued||!u&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const u of t.timelines){const l=u.element,c=l!==s,d=or(r,l,[]);this._getPreviousPlayers(l,c,o,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}sa(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,u=t.element,l=[],c=new Set,d=new Set,h=t.timelines.map(p=>{const g=p.element;c.add(g);const m=g[Tr];if(m&&m.removedBeforeQueried)return new sh(p.duration,p.delay);const _=g!==u,b=function Tme(n){const e=[];return iz(n,e),e}((r.get(g)||mme).map(Ie=>Ie.getRealPlayer())).filter(Ie=>!!Ie.element&&Ie.element===g),v=s.get(g),A=o.get(g),L=xG(0,this._normalizer,0,p.keyframes,v,A),V=this._buildPlayer(p,L,b);if(p.subTimeline&&i&&d.add(g),_){const Ie=new XA(e,a,g);Ie.setRealPlayer(V),l.push(Ie)}return V});l.forEach(p=>{or(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function wme(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,p.element,p))}),c.forEach(p=>Dr(p,BG));const f=zs(h);return f.onDestroy(()=>{c.forEach(p=>pl(p,BG)),_i(u,t.toStyles)}),d.forEach(p=>{or(i,p,[]).push(f)}),f}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new sh(e.duration,e.delay)}}class XA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new sh,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>xA(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){or(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function iy(n){return n&&1===n.nodeType}function tz(n,e){const t=n.style.display;return n.style.display=e??"none",t}function nz(n,e,t,r,i){const s=[];t.forEach(u=>s.push(tz(u)));const o=[];r.forEach((u,l)=>{const c=new Map;u.forEach(d=>{const h=e.computeStyle(l,d,i);c.set(d,h),(!h||0==h.length)&&(l[Tr]=yme,o.push(l))}),n.set(l,c)});let a=0;return t.forEach(u=>tz(u,s[a++])),o}function rz(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let u=s.get(a);if(u)return u;const l=a.parentNode;return u=t.has(l)?l:i.has(l)?r:o(l),s.set(a,u),u}return e.forEach(a=>{const u=o(a);u!==r&&t.get(u).push(a)}),t}function Dr(n,e){n.classList?.add(e)}function pl(n,e){n.classList?.remove(e)}function Ime(n,e,t){zs(t).onDone(()=>n.processLeaveNode(e))}function iz(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof TG?iz(r.players,e):e.push(r)}}function sz(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class sy{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new vme(e,t,r),this._timelineEngine=new dme(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const u=[],l=[],c=$A(this._driver,s,u,l);if(u.length)throw function lge(n,e){return new I(3404,!1)}();a=function ame(n,e,t){return new ume(n,e,t)}(i,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=NG(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=NG(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Sme=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&_i(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(_i(this._element,this._initialStyles),this._endStyles&&(_i(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(sa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(sa(this._element,this._endStyles),this._endStyles=null),_i(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function JA(n){let e=null;return n.forEach((t,r)=>{(function Ame(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class oz{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:zG(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Mme{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return OG(e,t)}getParentElement(e){return PA(e)}query(e,t,r){return FG(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const u={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(u.easing=s);const l=new Map,c=o.filter(f=>f instanceof oz);(function kge(n,e){return 0===n||0===e})(r,i)&&c.forEach(f=>{f.currentSnapshot.forEach((p,g)=>l.set(g,p))});let d=function Mge(n){return n.length?n[0]instanceof Map?n:n.map(e=>UG(e)):[]}(t).map(f=>qs(f));d=function Pge(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,zG(n,a)))}}return e}(e,d,l);const h=function Cme(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=JA(e[0]),e.length>1&&(r=JA(e[e.length-1]))):e instanceof Map&&(t=JA(e)),t||r?new Sme(n,t,r):null}(e,d);return new oz(e,d,u,h)}}let xme=(()=>{class n extends vG{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Sr.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?EG(t):t;return az(this._renderer,null,r,"register",[i]),new Nme(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(P(jl),P(yt))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})();class Nme extends rpe{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Rme(this._id,e,t||{},this._renderer)}}class Rme{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return az(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function az(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const uz="@.disabled";let kme=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let c=this._rendererCache.get(s);return c||(c=new lz("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,c)),c}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const u=c=>{Array.isArray(c)?c.forEach(u):this.engine.registerTrigger(o,a,t,c.name,c)};return r.data.animation.forEach(u),new Pme(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(P(jl),P(sy),P(ke))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})();class lz{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==uz?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Pme extends lz{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==uz?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Ome(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Fme(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let Lme=(()=>{class n extends sy{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(P(yt),P(OA),P(qA),P(lo))},n.\u0275prov=U({token:n,factory:n.\u0275fac}),n})();const cz=[{provide:vG,useClass:xme},{provide:qA,useFactory:function Vme(){return new rme}},{provide:sy,useClass:Lme},{provide:jl,useFactory:function Bme(n,e,t){return new kme(n,e,t)},deps:[Qf,sy,ke]}],ZA=[{provide:OA,useFactory:()=>new Mme},{provide:kk,useValue:"BrowserAnimations"},...cz],dz=[{provide:OA,useClass:LG},{provide:kk,useValue:"NoopAnimations"},...cz];let Ume=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?dz:ZA}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=kn({type:n}),n.\u0275inj=_n({providers:ZA,imports:[JP]}),n})(),$me=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=kn({type:n,bootstrap:[Upe]}),n.\u0275inj=_n({imports:[JP,Bpe,Kfe,Ume,Cpe.forRoot(),bie(()=>Iie($pe_firebase)),Ghe(()=>Whe())]}),e})();ZQ().bootstrapModule($me).catch(n=>console.error(n))}},Fe=>{Fe(Fe.s=898)}]);